!(function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return e[i].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)})([(function(e,t,n){function i(){function e(e){var t=n(144),i=[t];i.push(n(146)),i.push(n(152)),i.push(n(155)),i.push(n(158)),i.push(n(160)),i.push(n(170)),i.push(n(174)),i.push(n(176)),i.push(n(179)),i.push(n(182)),i.push(n(186)),i.push(n(189)),i.push(n(193)),i.push(n(197)),i.push(n(202)),i.push(n(203)),i.push(n(204)),i.push(n(207)),i.push(n(211)),i.push(n(215)),i.push(n(218)),i.push(n(219)),g.initialize({clientData:e,plugins:i})}function t(e,t,n){return"/dist/preview_data.js?token=__TOKEN__&preview_layer_ids=__PREVIEW_LAYER_IDS__".replace("__TOKEN__",e).replace("__PROJECT_ID__",t).replace("__PREVIEW_LAYER_IDS__",n.join(",")).replace("__GET_ONLY_PREVIEW_LAYERS__",!0)}window.performance&&window.performance.mark&&window.performance.mark("optimizely:blockBegin");var i=n(1);i.initialize();var r=n(82),a=n(20),o=n(16);n(124);var s=o.get("stores/directive"),u=n(86);if(!u.isCORSSupported())throw new Error("CORS is not supported on this browser, aborting.");var c,l=n(126),d=n(114),f=n(127),p={"layers": [{"holdback": 0, "activation": {}, "integrationSettings": {}, "integrationStringVersion": null, "viewIds": ["8261443030"], "experiments": [{"weightDistributions": null, "audienceName": "Everyone else", "name": "Georgia Tech Program Pricing", "bucketingStrategy": null, "variations": [{"id": "8258751536", "actions": [{"viewId": "8261443030", "changes": [{"selector": "li:nth-of-type(9) > .block-list__desc", "dependencies": [], "attributes": {"html": "Free to try or pursue the MicroMasters credential for $1500"}, "type": "attribute", "id": "B8ADAA18-232C-4BDC-A5ED-9B080489B07C", "css": {}}]}], "name": "Updated Pricing"}], "audienceIds": null, "changes": null, "id": "8254051035", "integrationSettings": null}], "id": "8248626618", "weightDistributions": null, "name": "Georgia Tech Program Pricing", "groupId": null, "commitId": "8262440925", "decisionMetadata": null, "policy": "single_experiment", "changes": null}, {"holdback": 0, "activation": {}, "integrationSettings": {}, "integrationStringVersion": 2, "viewIds": ["8562284423"], "experiments": [{"weightDistributions": null, "audienceName": "Everyone else", "name": "Hide Review Courses", "bucketingStrategy": null, "variations": [{"id": "9662632332", "actions": [{"viewId": "8562284423", "changes": [{"value": function($){function hideReviewCourses() {
  // Put all review course ids here. Can easily be updated.
  var review_course_ids = [
    "course-v1\\:MITx\\+6\\.002\\.3x_1_review\\+2T2016",
    "course-v1\\:MITx\\+8\\.370\\.1x_review\\+1T2018",
    "course-v1\\:MITx\\+8\\.370\\.2x_review\\+1T2018",
    "course-v1\\:MITx\\+8\\.370\\.3x_review\\+1T2018"
  ];
  for (var i = 0; i < review_course_ids.length; i++) {
    var id = review_course_ids[i];
    var review_course_card = $("#course-title-" + id);
    if (review_course_card) {
      $(review_course_card.closest(".course-item")).remove();
    }
  }
}

var numCoursesBefore = $(".course-item").length;
var intervalID = setInterval(function() {
  var numCoursesAfter = $(".course-item").length;
  if (numCoursesBefore === numCoursesAfter) {
    clearInterval(intervalID);
    hideReviewCourses();
  } else {
    numCoursesBefore = numCoursesAfter;
  }
}, 100);
}, "dependencies": [], "type": "custom_code", "id": "3E8E3769-922B-49CF-A7D4-95AE89562EF1"}]}], "name": "Hide Review Courses"}], "audienceIds": null, "changes": null, "id": "9665742865", "integrationSettings": null}], "id": "9667832193", "weightDistributions": null, "name": "Hide Review Courses", "groupId": null, "commitId": "10163791146", "decisionMetadata": null, "policy": "single_experiment", "changes": null}, {"holdback": 0, "activation": {}, "integrationSettings": {"google_universal_analytics": {"universal_analytics_tracker": "", "universal_analytics_slot": "81"}}, "integrationStringVersion": 2, "viewIds": ["10187053196", "9857878336", "9862639519", "9974274234", "9994033171"], "experiments": [{"weightDistributions": [{"entityId": "9865429331", "endOfRange": 5000}, {"entityId": "10013610263", "endOfRange": 10000}], "audienceName": "EdX Preferred Language is English,Not Enterprise", "name": "LEARNER-3377: Growth: Learner Analytics upsell test", "bucketingStrategy": null, "variations": [{"id": "9865429331", "actions": [{"viewId": "9857878336", "changes": []}, {"viewId": "10187053196", "changes": [{"dependencies": [], "type": "custom_code", "id": "A64694C9-65FB-40FE-990F-26C3CDB2F380", "value": function($){var utils = window['optimizely'].get('utils');
var getLearnerAnalyticsURL = function() {
  // format is courses/{courseKey}/course so we want to match only until the first / after courses/
  return window.location.href.match(/(https:\/\/courses\.edx\.org\/courses\/.+?(?=\/))/)[1] + '/learner_analytics';
};

// Displays new tab for verified learners.

utils.waitForElement('.navbar-nav').then(function(){
  var enrollment_mode = JSON.parse($('#user-metadata').text()).enrollment_mode;
  if (enrollment_mode === "verified") {
		$(".navbar-nav .nav-item:first").after('<li class="nav-item stats-nav-item"><a href="' + getLearnerAnalyticsURL() + '" class="nav-link">My Stats</a></li>');
  }
});

	// Special case to ensure the tab shows up on wiki pages.
utils.waitForElement('.wrapper-course-material').then(function(){
  var enrollment_mode = JSON.parse($('#user-metadata').text()).enrollment_mode;
  if (enrollment_mode === "verified") {
 		$(".tab:first").after('<li class="tab><a href="' + getLearnerAnalyticsURL() + '" class="nav-link">My Stats</a></li>');
   }
});
}}]}, {"viewId": "9974274234", "changes": []}], "name": "Original"}, {"id": "10013610263", "actions": [{"viewId": "9857878336", "changes": [{"dependencies": [], "type": "custom_code", "id": "86457C62-37BD-4898-8D2A-A37DBED24E1C", "value": function($){var $ = jQuery;

// HTML Identifiers
var courseItem = '.course-item';

var courseKeys = [
    'course-v1:adam+adam+adam',
    'course-v1:BerkeleyX+ColWri2.1x+3T2017_2',
    'course-v1:HarvardX+PH125.1x+3T2017',
    'course-v1:Microsoft+DAT205x+1T2018',
    'course-v1:Microsoft+DAT206x+1T2018',
    'course-v1:Microsoft+DAT207x+1T2018',
    'course-v1:Microsoft+DAT208x+1T2018',
    'course-v1:Microsoft+DEV283x+2T2017',
    'course-v1:UQx+TOURISMx+3T2017',
    'course-v1:UTHealthSPHx+IMAGINE99x+3T2017',
    'course-v1:AdelaideX+Project101x+1T2017',
    'course-v1:Catalystx+IL5x+1T2018',
    'course-v1:ETSx+TOEFLx+1T2018',
    'course-v1:LinuxFoundationX+LFS101x+1T2017',
    'course-v1:LinuxFoundationX+LFS171x+3T2017',
    'course-v1:UBCx+COMM220x+3T2017',
    'course-v1:UQx+IELTSx+1T2018',
    'course-v1:NYIF+CM1.x+3T2017',
    'course-v1:CurtinX+IOT1x+1T2018',
    'course-v1:HarvardX+PH526x+1T2018',
    'course-v1:Harvardx+HLS2X+1T2018',
    'course-v1:Microsoft+CLD251x+1T2018',
    'course-v1:Microsoft+DAT204x+1T2018',
    'course-v1:Microsoft+DAT222x+1T2018',
    'course-v1:Microsoft+DAT256x+1T2018',
    'course-v1:NewcastleX+SWL101x+1T2018',
    'course-v1:RITx+SKILLS101x+1T2018',
    'course-v1:UPValenciaX+BSP101x+1T2017',
    'course-v1:UTArlingtonX+CSE1309x+1T2018'
  ];
var updatedMessage = '<span class="new-feature">NEW</span><b class="message-copy-bold">My Stats</b><div class="insights-upsell">Verified Certificate purchasers now receive access to the in-course <span style="font-weight: 600">My Stats</span> page.<br>Upgrade to get started!</div><a class="learn-more-link">Learn more about My Stats</a>   |   <a href="https://www.edx.org/verified-certificate" class="verified-info">Learn more about Verified Certificates</a>';

window.optimizely = window.optimizely || [];

// memoize checkout urls for courses
var courseCheckoutURLs = {};

// add course id data attribute so that checkout url can be programmatically retrieved on click
var getUpsellMessage = function(courseId) {
  return '<span class="new-feature">NEW</span><b class="message-copy-bold">My Stats</b><div class="insights-upsell">Verified Certificate purchasers now receive access to the in-course <span style="font-weight: 600">My Stats</span> page.<br>Upgrade to get started!</div><a class="learn-more-link" data-course-id="' + courseId + '">Learn more about My Stats</a>   |   <a href="https://www.edx.org/verified-certificate" class="verified-info">Learn more about Verified Certificates</a>';
};

var replaceUpgradePriceMessage = function() {
  // Note, no price here
  $(window.upgradeButton).text('Upgrade');
};

var handleUpgradeButtonClick = function(checkoutURL) {
  $(window.upgradeButton).click(function(event) {
    // Stop the default click handler on the upgrade button
    event.stopPropagation();
    window.location.href = checkoutURL;
  });
};

var addUpsellMessaging = function() {
  $(courseItem).each(function(index, item){
    var courseKey = $(item).find('.enter-course').data('course-key');
    if (courseKeys.indexOf(courseKey) > -1) {
      $(item).find('.message-copy').html(getUpsellMessage(courseKey));
    }
    // checkoutURL will be undefined for archived courses
    var checkoutURL = $(item).find($('.action.action-upgrade')).attr('href');
    courseCheckoutURLs[courseKey] = checkoutURL;
  });
};

var addUpsells = function() {
  addUpsellMessaging();

  window.handleModalExit();
  window.setModalEventHandlers('LEARNER-3377_dashboard_page_modal_upgrade');

  replaceUpgradePriceMessage();

  $(window.learnMoreLink).click(function(event) {
    var link = event.target;
    var courseId = $(link).data('courseId');
    var checkoutURL = courseCheckoutURLs[courseId];
    handleUpgradeButtonClick(checkoutURL);

    window.optimizely.push({
      type: "event",
      eventName: "LEARNER-3377_dashboard_page_learn_more_click"
    });

    window.sendCarouselEvent(window.getCurrentSlideIndex());
    window.showModal();
  });
};


var numCoursesBefore = $(courseItem).length;
var intervalID = setInterval(function() {
  var numCoursesAfter = $(courseItem).length;
  if (numCoursesBefore === numCoursesAfter) {
    clearInterval(intervalID);
    addUpsells();
  } else {
    numCoursesBefore = numCoursesAfter;
  }
}, 100);
}}, {"src": "/actions/4992d6ebe98b37e8a1c38fee431e6303094b778c82eec06c11ecb34f0c389649.js", "dependencies": [], "id": "990A47F8-BF07-4461-B8A6-677A7789BC27"}]}, {"viewId": "9994033171", "changes": [{"dependencies": [], "type": "custom_code", "id": "D9F2E6C8-124A-4C16-B919-6B38E3B16066", "value": function($){var utils = window.optimizely.get('utils');
utils.waitForElement('.learner-analytics-dashboard').then(function(analyticsDashboard){
  utils.waitForElement('.stats-nav-tab').then(function(){
    $('.stats-nav-tab a').addClass('active');
  });

  if (analyticsDashboard.innerHTML.trim() === 'Page is not available.') {
    analyticsDashboard.style.display = 'none';

    utils.waitForElement('.in-feature-upsell').then(function(upsellWrapper){
      upsellWrapper.style.display = 'block';
    });

    utils.waitForElement('[data-toggle="tooltip"]').then(function(tooltip){
      var $tooltip = $(tooltip);
      if ($tooltip.hasOwnProperty('tooltip')) {
        $tooltip.tooltip();
      } else {
        $tooltip.css('display', 'none');
      }
    });

    utils.waitForElement('.in-feature-upsell  .upsell-upgrade').then(function(upgradeBtn){
      var data = JSON.parse($('#user-metadata').text());
      if (data.upgrade_link && data.upgrade_price) {
        upgradeBtn.innerHTML = 'Upgrade (' +  data.upgrade_price + ' USD)';
        upgradeBtn.setAttribute('href', data.upgrade_link);
      }
    });
  } else {
   
    utils.waitForElement('.page-content').then(function(){
  	      $('.page-content').after('<div class="survey-wrapper" style="margin-left: 20px"><div style="font-weight: bold">Do you have a minute to help make edX better?</div><div style="margin: 10px 0">Let us know how we can improve. Your responses will be kept confidential.</div><a style="margin-bottom: 10px; width: 220px" class="btn btn-primary" href="https://s.qualaroo.com/59450/3102bdcb-ad08-4c6e-bec0-6a928591731c" target="_blank"><span>Give Us Your Feedback</span></a></div>');
      //<div class="survey-wrapper" style="display: none; margin-left: 10px"><span style="font-weight: bold">Do you have a minute to help make edX better?</span><span style="margin: 10px 0">Let us know how we can improve. Your responses will be kept confidential.</span><a style="width: 220px" class="btn btn-primary" href="https://s.qualaroo.com/59450/3102bdcb-ad08-4c6e-bec0-6a928591731c"><span>Give Us Your Feedback</span></a></div>
      
      $('.page-header-main').after('<div style="display: block; border-left: 4px solid #19961b; margin: 15px 0; padding: 20px 10px; background: #F6F6F6;"><div style="font-weight: bold;">Your enrollment: Verified track</div></div>'); 
    });
    
    $('.learner-analytics-header').css('padding-bottom', '0');
  }
  utils.waitForElement('.learner-analytics-header .page-header-main').then(function(mainHeader) {    
    var tooltip = document.createElement('span'),
        tooltipText = document.createElement('span');

    tooltip.className = 'upsell-tooltip';
    tooltip.setAttribute('tabindex', '0');
    tooltip.innerHTML = 'Why am I seeing this?';

    tooltipText.className = 'tooltip-text';
    tooltipText.innerHTML = 'EdX is offering some additional features as part of the Verified Certificate track experience for no additional cost!';

    tooltip.appendChild(tooltipText);
    mainHeader.appendChild(tooltip);
    $('.learner-analytics-header .page-header-main .title').css('display', 'inline');
  });
});
}}, {"value": "<style>.tooltip-inner {\n  max-width: 450px;\n  /* If max-width does not work, try using width instead */\n  width: 450px; \n}\n\n.feature-screenshot {\n  width: 320px;\n  margin-top: 15px;\n}\n\n.upsell-tooltip {\n    position: relative;\n    display: block;\n    border-bottom: 1px dotted #065683;\n    color: #065683;\n    margin-left: 15px;\n    font-size: 12px;\n    margin-top: 6px;\n    padding-right:5px;\n    width: fit-content;\n}\n\n.upsell-tooltip .tooltip-text {\n    visibility: hidden;\n    width: 200px;\n    background-color: black;\n    color: #fff;\n    font-weight: 600;\n    text-align: center;\n    border-radius: 4px;\n    padding: 5px;\n\n    /* Position the tooltip */\n    position: absolute;\n    z-index: 1;\n    margin-left: 10px;\n    margin-top: -4px;\n}\n\n.upsell-tooltip .tooltip-text::before {\n  content: '';\n    width: 0;\n    height: 0;\n    position: absolute;\n    left: -12px;\n    border: 7px solid transparent;\n    border-right: 7px solid black;\n    top: 7px;\n}\n\n.upsell-tooltip:focus .tooltip-text,\n.upsell-tooltip:hover .tooltip-text {\n    visibility: visible;\n}\n\n@media only screen and (min-width: 630px) {\n  .upsell-tooltip {\n    display: inline-block;\n  }\n}\n\n@media only screen and (min-width: 865px) {\n  .upsell-tooltip .tooltip-text {\n    width: 400px;\n  }\n}\n\n.stats-nav-tab {\n\tmargin-top: 8px !important;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "93350B0B-CCD4-433F-B1E4-D4A2526E0AF1"}, {"value": "<div class=\"in-feature-upsell\" style=\"display: none; padding: 0 20px;\n\">\n    <div style=\"\n    display: block;\n    border-left: 4px solid #1F5C78;\n    margin: 15px 0;\n    padding: 10px;\n    background: #F6F6F6;\n    \"><div style=\"\n    font-weight: bold;\n\">Your enrollment: Audit track<span></span></div><span style=\"\n    font-size: 13px;\n\">You are enrolled in the audit track for this course. The audit track does not include a certificate.</span></div>\n<div style=\"\n    color: grey;\n    font-size: 14px;\n    max-width: 640px;\n\">My Stats introduces new personalized views that help you track your progress towards completing your course. Learners who upgrade to the Verified Certificate track unlock their My Stats page. Upgrade today to get access and see how you're performing!</div><div style=\"\n    margin-top: 20px;\n    margin-bottom: 25px;\n\"><a class=\"btn-brand upsell-upgrade\" style=\"\n    background: rgb(0, 129, 0) none repeat scroll 0% 0% / auto padding-box border-box;\n    border: 1px solid rgb(0, 129, 0);\n    font: normal normal 600 normal 16px / normal &quot;Open Sans&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;\n    padding: 8px 20px;\n\">\n    </a><img src=\"https://courses.edx.org/static/images/edx-verified-mini-cert.png\" alt=\"\" style=\"\n    height: 43px;\n    margin-top: -3px;\n    margin-left: 15px;\n\"></div><div style=\"\n    display: flex;\n      flex-wrap: wrap;\n    margin-left: -20px;\n\">\n\t\n\t<div style=\"\n    max-width: 400px;\n    margin: 10px 20px;\n\"><div style=\"\n    margin-bottom: 5px;\n\"><b>Course Activity Streak</b></div><span style=\"\n    color: grey;\n    font-size: 14px;\n\">Did you know the learners most likely to complete a course log in every week? Let us help you track your weekly streak - you just have to log in every week and learn something new. You can also see how many of the other learners in your course logged in this week.</span>\n    <img class=\"feature-screenshot\" src=\"https://prod-edx-mktg-edit.edx.org/sites/default/files/week_streak.png\" alt=\"\"></div>\n\t<div style=\"\n    max-width: 400px;\n    margin: 10px 20px;\n\"><div style=\"\n    margin-bottom: 5px;\n\"><b>Grade Progress</b></div><span style=\"\n    color: grey;\n    font-size: 14px;\n\">Wonder how you're doing in the course so far? We can show you not only all your grades and how much each assignment is worth, but also what graded pieces are coming up. This is a great way to track what you might need to work on the most for a final exam.</span><img class=\"feature-screenshot\" src=\"https://prod-edx-mktg-edit.edx.org/sites/default/files/grading.png\" alt=\"\"></div>\n\t<div style=\"\n    max-width: 400px;\n    margin: 10px 20px;\n\"><div style=\"\n    margin-bottom: 5px;\n\"><b>Discussion Engagement</b></div><span style=\"\n    color: grey;\n    font-size: 14px;\n\">We see a high % of successful learners using the discussion forums for interaction. Compare your forum stats to previous graduates to see how you're doing.</span><img class=\"feature-screenshot\" src=\"https://prod-edx-mktg-edit.edx.org/sites/default/files/discussions.png\" alt=\"\"></div>\n</div>\n    </div>", "selector": ".page-header", "dependencies": [], "operator": "after", "type": "append", "id": "1B111050-368B-4317-BDF7-37FCC50B142B"}]}, {"viewId": "9862639519", "changes": [{"dependencies": [], "type": "custom_code", "id": "65110EA2-9DB5-4753-BA32-671DE85C732B", "value": function($){window.optimizely = window.optimizely || [];
var utils = window.optimizely.get('utils');


// When the modal upgrade is clicked trigger click event for "Upgrade" button on right
// which will take user to checkout page
var handleUpgradeButtonClick = function() {
  $(window.upgradeButton).click(function(event) {
    // Stop the default click handler on the upgrade button
    event.stopPropagation();
		window.location.href = JSON.parse($('#user-metadata').text()).upgrade_link;
  });
};


utils.waitForElement(window.learnMoreLink).then(function (container) {
    window.handleModalExit();
    window.setModalEventHandlers('LEARNER-3377_track_selection_page_modal_upgrade');

    handleUpgradeButtonClick();
    window.replaceUpgradePriceMessage();

    $(window.learnMoreLink).click(function() {
      window.optimizely.push({ type: 'event', eventName: 'LEARNER-3377_track_selection_page_learn_more_click' });
      window.sendCarouselEvent(window.getCurrentSlideIndex());
      window.showModal();
    });
});
}}, {"src": "/actions/b3e03ad9de0a4e1a1d6d822d5388f1699dbdf21588ad9c35b6c6b927109de663.js", "dependencies": [], "id": "8199FBDF-9BCA-4A03-ABCC-BFAD1346FE83"}, {"value": "<li><span class=\"new-feature\">NEW</span> <b>My Stats: </b>Check out your personal progress and stats related to your course! <a class=\"learn-more-link\">Learn More</a></li>", "selector": ".copy-inline:nth-of-type(1) > ul", "dependencies": [], "operator": "append", "type": "append", "id": "B4F8AAA6-06FB-4A14-9143-35E321BE1FC7"}]}, {"viewId": "9974274234", "changes": [{"dependencies": [], "type": "custom_code", "id": "FAFD7C0A-8011-4C1F-9FD1-B2BDA8C22B23", "value": function($){var $ = jQuery;
var utils = window.optimizely.get('utils');

var upgradeSection = '.section-upgrade .hd-6';
var message = '<span class="new-feature">NEW</span><b class="message-copy-bold">My Stats</b><div class="insights-upsell">Verified Certificate purchasers now receive access to the in-course <span style="font-weight:600">My Stats</span> page.<br>Upgrade to get started!</div>';

var handleLinkClick = function() {
  window.optimizely.push({
    type: 'event',
    eventName: 'LEARNER-3377_course_home_page_learn_more_click',
  });
  window.sendCarouselEvent(window.getCurrentSlideIndex());
  window.showModal();
};

var handleUpgradeClick = function(event) {
  event.stopPropagation();
    
  var metadata = JSON.parse($('#user-metadata').text());
  window.location.href = metadata.upgrade_link;
};

utils.waitForElement(upgradeSection).then(function() {
  $(upgradeSection).replaceWith(message);
  $('.promo-learn-more').replaceWith('<a class="btn-link btn-small learn-more-link">Learn More</a>');

  window.handleModalExit();
  window.setModalEventHandlers('LEARNER-3377_course_home_page_modal_upgrade');
  window.replaceUpgradePriceMessage();
  
  utils.waitForElement(window.learnMoreLink).then(function() {
    $(window.learnMoreLink).click(handleLinkClick);
  });
  
  utils.waitForElement(window.upgradeButton).then(function() {
    $(window.upgradeButton).click(handleUpgradeClick);
  });
});
}}, {"value": "<style>.insights-upsell {\n    margin: 5px 0 10px 3px;\n    font-size: 14px;\n}\n.stats-nav-item .new-feature {\n  margin: 3px 10px 0 0 !important;\n}\n.course-home-sidebar-upgrade .new-feature {\n\tmargin: 3px 10px 0 5px !important;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "62993E79-632D-48E4-90FA-110F3AF20C77"}]}, {"viewId": "10187053196", "changes": [{"dependencies": [], "type": "custom_code", "id": "CCCB7D13-068F-4F47-9706-FE6916293EBE", "value": function($){var getLearnerAnalyticsURL = function() {
  // format is courses/{courseKey}/course so we want to match only until the first / after courses/
  return window.location.href.match(/(https:\/\/courses\.edx\.org\/courses\/.+?(?=\/))/)[1] + '/learner_analytics';
};

var utils = window['optimizely'].get('utils');

// Display tab for all learners.
utils.waitForElement('.navbar-nav').then(function(){
  var enrollment_mode = JSON.parse($('#user-metadata').text()).enrollment_mode;
  var tabString = 'My Stats';
  // Show locked icon for audit learners, unlocked icon for verified learners.
  if (enrollment_mode === "audit" || enrollment_mode === null) {
    tabString = '<span class="fa fa-lock" aria-hidden="true"></span> My Stats';
  }
  else {
     tabString = '<span class="fa fa-unlock-alt" aria-hidden="true"></span> My Stats';
  }
  $(".navbar-nav .nav-item:first").after('<li class="nav-item stats-nav-item"><a href="' + getLearnerAnalyticsURL() + '" class="nav-link">' + tabString + '</a><span class="new-feature">NEW</span></li>');
});

// Special case for the tab on wiki pages.
utils.waitForElement('.wrapper-course-material').then(function(){
  var enrollment_mode = JSON.parse($('#user-metadata').text()).enrollment_mode;
  var tabString = 'My Stats';
  if (enrollment_mode === "audit" || enrollment_mode === null) {
    tabString = '<span class="fa fa-lock" aria-hidden="true"></span> My Stats';
  }
  else {
    tabString = '<span class="fa fa-unlock-alt" aria-hidden="true"></span> My Stats';
  }
  $(".tab:first").after('<li class="tab stats-nav-tab"><a href="' + getLearnerAnalyticsURL() + '" class="nav-link">' + tabString + '</a><span class="new-feature">NEW</span></li>');
});
}}, {"value": "<style>.new-feature {\n    font-size: 12px;\n    margin-left: -5px;\n  \tmargin-top: 12px;\n  \theight: 18px;\n}\n\n.stats-nav-tab {\n  width: 120px !important;\n}\n.stats-nav-item {\n\twidth: 130px !important;\n  margin-top: 10px !important;\n}\n\n.stats-nav-tab .nav-link, .stats-nav-item .nav-link {\n  display: inline !important;\n}\n\n.stats-nav-tab .new-feature, .stats-nav-item .new-feature {\n\tposition: absolute;\n  margin-top: 3px;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "150CA3A8-C68C-4E46-A699-7B3A6462D505"}]}], "name": "Learner Analytics Upsell"}], "audienceIds": ["and", "8430051876", "9874510616"], "changes": null, "id": "10003132234", "integrationSettings": null}], "id": "9862218455", "weightDistributions": null, "name": "LEARNER-3377: Growth: Learner Analytics upsell test", "groupId": null, "commitId": "10239102109", "decisionMetadata": null, "policy": "single_experiment", "changes": [{"dependencies": [], "type": "custom_code", "id": "68310C7A-C591-4D53-8C6D-B8CF09F156E3", "value": function($){var $ = jQuery;

window.learnMoreLink = '.learn-more-link';
window.modalId = '#upsell-modal';
window.modalEscapeButton = '#upsell-modal .paragon__btn.paragon__btn-light';
window.paragonModal = '#upsell-modal .paragon__modal';
window.paragonOpenModalClass = 'paragon__modal paragon__modal-open paragon__modal-backdrop paragon__show';
window.upgradeButton = '#upsell-modal .paragon__btn.paragon__btn-success';

window.replaceUpgradePriceMessage = function() {
  var metadata = JSON.parse($('#user-metadata').text());
  var newMessage = 'Upgrade (' + metadata.upgrade_price + ' USD)';
  $(upgradeButton).text(newMessage);
};

window.showModal = function() {
  $(modalId).css('display', 'inherit');

  $(paragonModal).attr('class', paragonOpenModalClass);

  // hack to make modal fit page properly
  window.dispatchEvent(new Event('resize'));
  $(modalEscapeButton).focus();
};

window.getCurrentSlideIndex = function() {
  return $('div.slick-slide.slick-active.carousel-item')[0].dataset.index;
};

window.sendCarouselEvent = function(slideIndex) {
  window.optimizely.push({
    type: 'event',
    eventName: 'LEARNER-3377_viewed_modal_slide_' + slideIndex,
  });
};

window.updateUpgradeButton = function(callback) {
  $(upgradeButton).click(function(event) {
    // Stop the default click handler on the upgrade button
    event.stopPropagation();
    
    callback();
  });
};

window.setModalEventHandlers = function(upgradeEventName) {
  // Modal Upgrade
  $(upgradeButton).click(function() {
  	window.optimizely.push({
      type: 'event',
      eventName: upgradeEventName
    });
  });

  // Modal Previous or Next Buttons Clicked
  $('#upsell-modal .carousel-arrow.next').click(function() {
    var currentSlideIndex = window.getCurrentSlideIndex();
    // the next viewed carousel slide will be after the current slide index
    sendCarouselEvent(+currentSlideIndex + 1);
  });

  $('#upsell-modal .carousel-arrow.prev').click(function() {
    var currentSlideIndex = window.getCurrentSlideIndex();
    // the next viewed carousel slide will be before the current slide index
    sendCarouselEvent(+currentSlideIndex - 1);
  });
  
  $('#upsell-modal .slick-dots li button').click(function(event) {
    sendCarouselEvent(+event.target.textContent - 1);
  });
};

window.fireModalOpenEvent = function() {
  window['optimizely'] = window['optimizely'] || [];
  window['optimizely'].push({
    type: "event",
    eventName: "LEARNER-3377_track_selection_page_learn_more_click"
  });
};

window.handleModalExit = function() {
  // handle click and escape button press
  $(modalEscapeButton).click(function(){
    $(modalId).css('display', 'none');
  });

  $(document).keyup(function(e) {
    if (e.keyCode === 27) {
      $(modalId).css('display', 'none');
    }
  });
};
}}, {"value": "<style>/** \nThis CSS is used on the following pages:\n- Track selection page\n\nMake sure any changes work on all pages it is used.\n*/\n\n.new-feature {\n    background-color: #ccdde6;\n    color: #00507e;\n    margin-right: 8px;\n    font-weight: 500;\n    box-shadow: 0 -1px 0 2px #ccdde6;\n    border-radius: 1px;\n\t  float: left;\n  \tcursor: pointer;\n}\n\n.learn-more-link {\n    font-weight: 500 !important;\n  \tcursor: pointer !important;\n\t  color: #0075b4 !important;\n}\n\n.paragon__btn.paragon__btn-success{\n  cursor: pointer !important;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "02F76009-40E9-496B-8ECE-1B78788C29F4"}]}, {"holdback": 0, "activation": {}, "integrationSettings": {"google_universal_analytics": {"universal_analytics_tracker": "", "universal_analytics_slot": "85"}}, "integrationStringVersion": 2, "viewIds": ["10188118405", "10242602152", "10257400230", "10309704977", "10311317979"], "experiments": [{"weightDistributions": [{"entityId": "10197215480", "endOfRange": 5000}, {"entityId": "10236590857", "endOfRange": 10000}], "audienceName": "EdX Preferred Language is English,Not Enterprise", "name": "LEARNER-3514: Growth: Enhanced Support", "bucketingStrategy": null, "variations": [{"id": "10197215480", "actions": [{"viewId": "10309704977", "changes": [{"dependencies": [], "type": "custom_code", "id": "E833949D-E0FF-4D3A-99DE-45814B068308", "value": function($){var utils = window['optimizely'].get('utils');
utils.waitForElement('#user-metadata').then(function(){
  var mode = JSON.parse($('#user-metadata').text()).enrollment_mode;
  if (mode === "audit") {
    $('.forum-nav-browse-title').each(function(i, o){
      if ($(o).text().indexOf("Enhanced Support") > -1) {
        o.remove();
      } 
    });
  }
});
}}]}], "name": "Original"}, {"id": "10236590857", "actions": [{"viewId": "10257400230", "changes": [{"dependencies": [], "type": "custom_code", "id": "FE305676-4E7A-471D-B53F-4D715A461F60", "value": function($){var $ = jQuery;

// HTML Identifiers
var courseItem = '.course-item';

var courseKeys = [
    'course-v1:UBCx+COMM420x+3T2017',
    'course-v1:ColumbiaX+CORPFIN1x+1T2018'
  ];

window.optimizely = window.optimizely || [];

// memoize checkout urls for courses
var courseCheckoutURLs = {};

// add course id data attribu	te so that checkout url can be programmatically retrieved on click
var getUpsellMessage = function(courseId) {
  return '<span class="new-feature">NEW</span><b class="message-copy-bold">Enhanced Support Forum:</b><div class="insights-upsell">Verified Certificate purchasers now receive access to the <span style="font-weight: 600"> Enhanced Support Forum.</span><br>Upgrade to get started!</div><a class="learn-more-link" data-course-id="' + courseId + '">Learn more about the Enhanced Support Forum</a>   |   <a href="https://www.edx.org/verified-certificate" class="verified-info">Learn more about Verified Certificates</a>';
};

var replaceUpgradePriceMessage = function() {
  // Note, no price here
  $(window.upgradeButton).text('Upgrade');
};

var handleUpgradeButtonClick = function(checkoutURL) {
  $(window.upgradeButton).click(function(event) {
    // Stop the default click handler on the upgrade button
    event.stopPropagation();
    window.location.href = checkoutURL;
  });
};

var addUpsellMessaging = function() {
  $(courseItem).each(function(index, item){
    var courseKey = $(item).find('.enter-course').data('course-key');
    if (courseKeys.indexOf(courseKey) > -1) {
      $(item).find('.message-copy').html(getUpsellMessage(courseKey));
    }
    // checkoutURL will be undefined for archived courses
    var checkoutURL = $(item).find($('.action.action-upgrade')).attr('href');
    courseCheckoutURLs[courseKey] = checkoutURL;
  });
};

var addUpsells = function() {
  addUpsellMessaging();

  window.handleModalExit();
  window.setModalEventHandlers('LEARNER-3514_dashboard_page_modal_upgrade');

  replaceUpgradePriceMessage();

  $(window.learnMoreLink).click(function(event) {
    var link = event.target;
    var courseId = $(link).data('courseId');
    var checkoutURL = courseCheckoutURLs[courseId];
    handleUpgradeButtonClick(checkoutURL);

    window.optimizely.push({
      type: "event",
      eventName: "LEARNER-3514_dashboard_page_learn_more_click"
    });

    window.sendCarouselEvent(window.getCurrentSlideIndex());
    window.showModal();
  });
};


var numCoursesBefore = $(courseItem).length;
var intervalID = setInterval(function() {
  var numCoursesAfter = $(courseItem).length;
  if (numCoursesBefore === numCoursesAfter) {
    clearInterval(intervalID);
    addUpsells();
  } else {
    numCoursesBefore = numCoursesAfter;
  }
}, 100);
}}, {"value": "<style>#upsell-modal .paragon__modal {\n  font-family: \"Open Sans\", \"Helvetica Neue\", Helvetica, Arial, sans-serif;\n  font-size: 1rem;\n  font-weight: 400;\n  line-height: 1.5;\n}\n\n#upsell-modal .paragon__modal-title {\n  font-family: \"Open Sans\", \"Helvetica Neue\", Helvetica, Arial, sans-serif;\n  font-size: 1.5rem;\n  font-weight: 600;\n  line-height: 1.5;\n}\n\n#upsell-modal .paragon__btn.paragon__btn-success {\n  font-family: \"Open Sans\", \"Helvetica Neue\", Helvetica, Arial, sans-serif;\n  font-size: 1rem;\n  font-weight: 800;\n  line-height: 1.5;\n  text-shadow: none;\n  letter-spacing: 0;\n}\n\n#upsell-modal .slick-dots li button {\n  box-shadow: none;\n}\n\n#upsell-modal .paragon__btn.paragon__btn-light {\n  box-shadow: none;\n  text-shadow: none;\n  background: white;\n}\n\n#upsell-modal .slick-slide.carousel-item {\n  width: 448px;\n}\n\n#upsell-modal .upsell-certificate {\n\tleft: 120px !important; \n}\n\n.insights-upsell {\n\tmargin: 5px 0 10px 0;\n}\n\n#upsell-modal .slick-slide.carousel-item {\n  min-width: none !important;\n  max-width: none !important;\n  padding: 0 !important;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "1304E647-101A-457D-91F1-F200AA12AFC6"}]}, {"viewId": "10242602152", "changes": [{"dependencies": [], "type": "custom_code", "id": "7A20D696-8BD8-4683-BC2E-4B7FB8F877FF", "value": function($){window.optimizely = window.optimizely || [];
var utils = window.optimizely.get('utils');


// When the modal upgrade is clicked trigger click event for "Upgrade" button on right
// which will take user to checkout page
var handleUpgradeButtonClick = function() {
  $(window.upgradeButton).click(function(event) {
    // Stop the default click handler on the upgrade button
    event.stopPropagation();
    window.location.href = JSON.parse($('#user-metadata').text()).upgrade_link;
  });
};


utils.waitForElement(window.learnMoreLink).then(function (container) {
    window.handleModalExit();
    window.setModalEventHandlers('LEARNER-3514_track_selection_page_modal_upgrade');

    handleUpgradeButtonClick();
    window.replaceUpgradePriceMessage();

    $(window.learnMoreLink).click(function() {
      window.optimizely.push({ type: 'event', eventName: 'LEARNER-3514_track_selection_page_learn_more_click' });
      window.sendCarouselEvent(window.getCurrentSlideIndex());
      window.showModal();
    });
});
}}, {"value": "<style>#upsell-modal .paragon__modal {\n  font-family: \"Open Sans\", \"Helvetica Neue\", Helvetica, Arial, sans-serif;\n  font-size: 1rem;\n  font-weight: 400;\n  line-height: 1.5;\n}\n\n#upsell-modal .paragon__modal-title {\n  font-family: \"Open Sans\", \"Helvetica Neue\", Helvetica, Arial, sans-serif;\n  font-size: 1.5rem;\n  font-weight: 600;\n  line-height: 1.5;\n}\n\n#upsell-modal .paragon__btn.paragon__btn-success {\n  font-family: \"Open Sans\", \"Helvetica Neue\", Helvetica, Arial, sans-serif;\n  font-size: 1rem;\n  font-weight: 800;\n  line-height: 1.5;\n  text-shadow: none;\n  letter-spacing: 0;\n}\n\n#upsell-modal .slick-dots li button {\n  box-shadow: none;\n}\n\n#upsell-modal .paragon__btn.paragon__btn-light {\n  box-shadow: none;\n  text-shadow: none;\n  background: white;\n}\n\n#upsell-modal .slick-slide.carousel-item {\n  width: 448px;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "787FCA71-FB03-4192-BC94-52B843613BAC"}, {"value": "<li><span class=\"new-feature\">NEW</span> <b>Enhanced Support Forum:</b>  Get faster response times from TAs in a dedicated discussion forum. <a class=\"learn-more-link\">Learn More</a></li>", "selector": ".copy-inline:nth-of-type(1) > ul", "dependencies": [], "operator": "append", "type": "append", "id": "BB4421B9-E259-4754-A2ED-F93F6434A684"}]}, {"viewId": "10188118405", "changes": [{"dependencies": [], "type": "custom_code", "id": "B6AF2FE7-65EF-490F-8B42-49AA437D8907", "value": function($){var $ = jQuery;
var utils = window.optimizely.get('utils');

var upgradeSection = '.section-upgrade .hd-6';
var message = '<span class="new-feature">NEW</span><b class="message-copy-bold">Enhanced Support Forum</b><div class="insights-upsell">Verified Certificate purchasers now receive access to the <span style="font-weight:600">Enhanced Support Forum</span>.<br>Upgrade to get started!</div>';

var handleLinkClick = function() {
  window.optimizely.push({
    type: 'event',
    eventName: 'LEARNER-3514_course_home_page_learn_more_click',
  });
  window.sendCarouselEvent(window.getCurrentSlideIndex());
  window.showModal();
};

var handleUpgradeClick = function(event) {
  event.stopPropagation();
    
  var metadata = JSON.parse($('#user-metadata').text());
  window.location.href = metadata.upgrade_link;
};

utils.waitForElement(upgradeSection).then(function() {
  $(upgradeSection).replaceWith(message);
  $('.promo-learn-more').replaceWith('<a class="btn-link btn-small learn-more-link">Learn More</a>');

  window.handleModalExit();
  window.setModalEventHandlers('LEARNER-3514_course_home_page_modal_upgrade');
  window.replaceUpgradePriceMessage();
  
  utils.waitForElement(window.learnMoreLink).then(function() {
    $(window.learnMoreLink).click(handleLinkClick);
  });
  
  utils.waitForElement(window.upgradeButton).then(function() {
    $(window.upgradeButton).click(handleUpgradeClick);
  });
});
}}, {"value": "<style>.insights-upsell {\n    margin: 5px 0 10px 3px;\n    font-size: 14px;\n}\n.stats-nav-item .new-feature {\n  margin: 3px 10px 0 0 !important;\n}\n.course-home-sidebar-upgrade .new-feature {\n\tmargin: 3px 10px 0 5px !important;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "EF54576C-A293-428F-9345-EFD5797213C3"}]}, {"viewId": "10309704977", "changes": [{"dependencies": [], "type": "custom_code", "id": "8C00D24D-FC09-478C-A914-C874D1F43A97", "value": function($){var utils = window['optimizely'].get('utils');
utils.waitForElement('post-body').then(function(){
  $('a[href="https://ecommerce.edx.org/basket/single-item/?sku=FE0ACF6"]').click(function(){
    window['optimizely'] = window['optimizely'] || [];
    window['optimizely'].push({
      type: "event",
      eventName: "discussions_upsell_click"
    });
  });
  $('a[href="https://ecommerce.edx.org/basket/single-item/?sku=6539085"]').click(function(){
    window['optimizely'] = window['optimizely'] || [];
    window['optimizely'].push({
      type: "event",
      eventName: "discussions_upsell_click"
    });
  });
});
}}]}], "name": "Enhanced Support"}], "audienceIds": ["and", "8430051876", "9874510616"], "changes": null, "id": "10195375079", "integrationSettings": null}], "id": "10190847271", "weightDistributions": null, "name": "LEARNER-3514: Growth: Enhanced Support", "groupId": null, "commitId": "10311506801", "decisionMetadata": null, "policy": "single_experiment", "changes": [{"dependencies": [], "type": "custom_code", "id": "68310C7A-C591-4D53-8C6D-B8CF09F156E3", "value": function($){var $ = jQuery;

window.learnMoreLink = '.learn-more-link';
window.modalId = '#upsell-modal';
window.modalEscapeButton = '#upsell-modal .paragon__btn.paragon__btn-light';
window.paragonModal = '#upsell-modal .paragon__modal';
window.paragonOpenModalClass = 'paragon__modal paragon__modal-open paragon__modal-backdrop paragon__show';
window.upgradeButton = '#upsell-modal .paragon__btn.paragon__btn-success';

window.replaceUpgradePriceMessage = function() {
  var metadata = JSON.parse($('#user-metadata').text());
  var newMessage = 'Upgrade (' + metadata.upgrade_price + ' USD)';
  $(upgradeButton).text(newMessage);
};

window.showModal = function() {
  $(modalId).css('display', 'inherit');

  $(paragonModal).attr('class', paragonOpenModalClass);

  // hack to make modal fit page properly
  window.dispatchEvent(new Event('resize'));
  $(modalEscapeButton).focus();
};

window.getCurrentSlideIndex = function() {
  return $('div.slick-slide.slick-active.carousel-item')[0].dataset.index;
};

window.sendCarouselEvent = function(slideIndex) {
  window.optimizely.push({
    type: 'event',
    eventName: 'LEARNER-3377_viewed_modal_slide_' + slideIndex,
  });
};

window.updateUpgradeButton = function(callback) {
  $(upgradeButton).click(function(event) {
    // Stop the default click handler on the upgrade button
    event.stopPropagation();
    
    callback();
  });
};

window.setModalEventHandlers = function(upgradeEventName) {
  // Modal Upgrade
  $(upgradeButton).click(function() {
  	window.optimizely.push({
      type: 'event',
      eventName: upgradeEventName
    });
  });

  // Modal Previous or Next Buttons Clicked
  $('#upsell-modal .carousel-arrow.next').click(function() {
    var currentSlideIndex = window.getCurrentSlideIndex();
    // the next viewed carousel slide will be after the current slide index
    sendCarouselEvent(+currentSlideIndex + 1);
  });

  $('#upsell-modal .carousel-arrow.prev').click(function() {
    var currentSlideIndex = window.getCurrentSlideIndex();
    // the next viewed carousel slide will be before the current slide index
    sendCarouselEvent(+currentSlideIndex - 1);
  });
  
  $('#upsell-modal .slick-dots li button').click(function(event) {
    sendCarouselEvent(+event.target.textContent - 1);
  });
};

window.fireModalOpenEvent = function() {
  window['optimizely'] = window['optimizely'] || [];
  window['optimizely'].push({
    type: "event",
    eventName: "LEARNER-3377_track_selection_page_learn_more_click"
  });
};

window.handleModalExit = function() {
  // handle click and escape button press
  $(modalEscapeButton).click(function(){
    $(modalId).css('display', 'none');
  });

  $(document).keyup(function(e) {
    if (e.keyCode === 27) {
      $(modalId).css('display', 'none');
    }
  });
};

var utils = window['optimizely'].get('utils');
utils.waitForElement('#upsell-modal').then(function(){
  $('#upsell-modal .carousel-arrow').remove();
  $('#upsell-modal .slick-dots').remove();
  $('#upsell-modal [data-index="1"]').remove();
  $('#upsell-modal [data-index="2"]').remove();
  $('#upsell-modal [data-index="3"]').remove();
  $('#upsell-modal .paragon__modal-title').text('Enhanced Support Forum');
  $('#upsell-modal [data-index="0"]').html('TAs serving the entire class are trying to answer questions that come up as fast as they can, but sometimes learners want faster answers to questions to keep the momentum going in course work. <br><br> The new Enhanced Support Forum gives more dedicated support from TAs to a smaller group of highly engaged learners.  Expect richer discussions and quicker answers to questions to help you progress through your course.');
});
}}, {"value": "<style>/** \nThis CSS is used on the following pages:\n- Track selection page\n\nMake sure any changes work on all pages it is used.\n*/\n\n.new-feature {\n    background-color: #ccdde6;\n    color: #00507e;\n    margin-right: 8px;\n    font-weight: 500;\n    box-shadow: 0 -1px 0 2px #ccdde6;\n    border-radius: 1px;\n\t  float: left;\n  \tcursor: pointer;\n}\n\n.learn-more-link {\n    font-weight: 500 !important;\n  \tcursor: pointer !important;\n\t  color: #0075b4 !important;\n}\n\n.paragon__btn.paragon__btn-success{\n  cursor: pointer !important;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "02F76009-40E9-496B-8ECE-1B78788C29F4"}]}, {"holdback": 0, "activation": {}, "integrationSettings": {}, "integrationStringVersion": 2, "viewIds": ["8784327061"], "experiments": [{"weightDistributions": [{"entityId": "10193800787", "endOfRange": 3333}, {"entityId": "10204290073", "endOfRange": 6666}, {"entityId": "10193560485", "endOfRange": 10000}], "audienceName": "Valid for Inline Discussions Experiment", "name": "Inline Discussions A/B/C test", "bucketingStrategy": null, "variations": [{"id": "10193800787", "actions": [{"viewId": "8784327061", "changes": [{"dependencies": [], "type": "custom_code", "id": "3A3AB069-420F-4369-B39F-B21818AA3783", "value": function($){function threadViewHandler(){
 	window.optimizely.push(['trackEvent', 'discussion_thread_view']);
  window.optimizely.push(['trackEvent', 'discussion_any_event']); 
}

function newPostHandler(){
  window.optimizely.push(['trackEvent', 'discussion_new_post_event']);
  window.optimizely.push(['trackEvent', 'discussion_any_event']);
}

function newResponseHandler(){
  window.optimizely.push(['trackEvent', 'discussion_add_response_event']);
  window.optimizely.push(['trackEvent', 'discussion_any_event']);
}

function newCommentHandler(){
  window.optimizely.push(['trackEvent', 'discussion_comment_event']);
  window.optimizely.push(['trackEvent', 'discussion_any_event']);
}

function removeExistingHandlers(){
  jQuery('button.submit').off( 'click', newPostHandler);
  jQuery('li.forum-nav-thread').off( 'click', threadViewHandler);
  jQuery('button.discussion-submit-post').off( 'click', newResponseHandler);
  jQuery('button.discussion-submit-comment').off( 'click', newCommentHandler);
}

function addTrackingClickHandlers () {
  removeExistingHandlers();
  jQuery('.new-post-article button.submit').click( newPostHandler );
  jQuery('li.forum-nav-thread').click( threadViewHandler );
  jQuery('button.discussion-submit-post').click( newResponseHandler );
  jQuery('button.discussion-submit-comment').click( newCommentHandler );
}

jQuery(document).ready(function () {
  // set up custom event tracking
  window.optimizely = window.optimizely || []; 
  jQuery(document).on("click", ".discussion-module", addTrackingClickHandlers);
  jQuery(document).on("DOMSubtreeModified", ".discussion-module", addTrackingClickHandlers);
});
}}]}], "name": "Original"}, {"id": "10204290073", "actions": [{"viewId": "8784327061", "changes": [{"src": "/actions/d5b23f8eb324b088d74b515ddb65c38af6f18300773833b0af5eaae4a7f91572.js", "dependencies": [], "id": "87AE16D6-0F02-4D2B-ADB5-601F0C6D2851"}, {"value": "<style>.inline-discussion-container {\n display: inline-block;\n width: 30%;\n padding-top: 70px;\n padding-left: 2%;\n}\n\n.narrow-vertical {\n display: inline-block;\n width: 65%;\n vertical-align: top;\n}\n\n.full-width-discussion-title {\n\twidth: 100% !important;\n}\n\n.align-add-post-button-left {\n\ttext-align: left !important;\n}\n\n.wrap-instructor-info.studio-view.inline-block-display-in-studio {\n\tdisplay: inline-block; \n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "BDD38C7F-3EF9-4F4B-83DB-53CB31CABEED"}]}], "name": "Right-side auto-opened discussion"}, {"id": "10193560485", "actions": [{"viewId": "8784327061", "changes": [{"dependencies": [], "type": "custom_code", "id": "4B0ADE05-A738-4342-9AC4-AA1B6523957D", "value": function($){function listenForShowDiscussionButton(){
	if (!jQuery('button.discussion-show').size()) {
    window.requestAnimationFrame(listenForShowDiscussionButton); 
  } else {
    var button = jQuery('button.discussion-show');
    // call the handler instead of spoofing a click so that we don't inadvertently shift focus
    button.click();
    jQuery('#main').focus();
    jQuery('html,body').animate({ scrollTop: 0 }, 1);
  }
}

function threadViewHandler(){
 	window.optimizely.push(['trackEvent', 'discussion_thread_view']);
  window.optimizely.push(['trackEvent', 'discussion_any_event']); 
}

function newPostHandler(){
  window.optimizely.push(['trackEvent', 'discussion_new_post_event']);
  window.optimizely.push(['trackEvent', 'discussion_any_event']);
}

function newResponseHandler(){
  window.optimizely.push(['trackEvent', 'discussion_add_response_event']);
  window.optimizely.push(['trackEvent', 'discussion_any_event']);
}

function newCommentHandler(){
  window.optimizely.push(['trackEvent', 'discussion_comment_event']);
  window.optimizely.push(['trackEvent', 'discussion_any_event']);
}

function removeExistingHandlers(){
  jQuery('.new-post-article button.submit').off( 'click', newPostHandler);
  jQuery('li.forum-nav-thread').off( 'click', threadViewHandler);
  jQuery('button.discussion-submit-post').off( 'click', newResponseHandler);
  jQuery('button.discussion-submit-comment').off( 'click', newCommentHandler);
}

function addTrackingClickHandlers () {
  removeExistingHandlers();
  jQuery('.new-post-article button.submit').click( newPostHandler );
  jQuery('li.forum-nav-thread').click( threadViewHandler );
  jQuery('button.discussion-submit-post').click( newResponseHandler );
  jQuery('button.discussion-submit-comment').click( newCommentHandler );
}

function turnThingsOn(){
  listenForShowDiscussionButton();
  jQuery(document).on("click", ".discussion-module", addTrackingClickHandlers);
  jQuery(document).on("DOMSubtreeModified", ".discussion-module", addTrackingClickHandlers);
}

jQuery(document).ready(function () {
  // set up custom event tracking
  window.optimizely = window.optimizely || [];  
  turnThingsOn();

  jQuery('.nav-item.tab').not('active').click(function(){
    turnThingsOn();
  });
});
}}]}], "name": "Auto-open only"}], "audienceIds": ["or", "9115224323"], "changes": null, "id": "10207180016", "integrationSettings": null}], "id": "10191550529", "weightDistributions": null, "name": "Inline Discussions A/B/C test", "groupId": null, "commitId": "10367764066", "decisionMetadata": null, "policy": "single_experiment", "changes": null}, {"holdback": 0, "activation": {}, "integrationSettings": {"google_universal_analytics": {"universal_analytics_tracker": "", "universal_analytics_slot": "84"}}, "integrationStringVersion": 2, "viewIds": ["8636165544"], "experiments": [{"weightDistributions": [{"entityId": "10193773321", "endOfRange": 8500}, {"entityId": "10189643715", "endOfRange": 10000}], "audienceName": "EdX Preferred Language is English", "name": "I'm Feeling Lucky Hackathon (Jae)", "bucketingStrategy": null, "variations": [{"id": "10193773321", "actions": [{"viewId": "8636165544", "changes": []}], "name": "Original"}, {"id": "10189643715", "actions": [{"viewId": "8636165544", "changes": [{"dependencies": [], "type": "custom_code", "id": "67A7C2EE-D582-42F8-B2EE-156DF0432A65", "value": function($){var $ = jQuery;
var utils = window.optimizely.get('utils');

var consecutiveDeletes = 0;
var feelingLuckyHomepageSearchInput = '.simplified-home .hero-container .hero-search .react-autosuggest__input';
var timeout = null;
var buttonExists = false;

// Copied from https://courseroot.com/courses/?level=beginner&platform=edx&sortby=popularity
var courseURLs = [
		'https://www.edx.org/course?search_query=english-grammar-style-uqx-write101x-6',
    'https://www.edx.org/course?search_query=toeflr-test-preparation-insiders-guide-etsx-toeflx-4',
    'https://www.edx.org/course?search_query=ielts-academic-test-preparation',
    'https://www.edx.org/course?search_query=analyzing-visualizing-data-excel-microsoft-dat206x-8',
    'https://www.edx.org/course?search_query=learn-program-java-microsoft-dev276x-1',
    'https://www.edx.org/course?search_query=introduction-c-microsoft-dev204-1x-1',
    'https://www.edx.org/course?search_query=machine-learning-gtx-cs7641x-1',
    'https://www.edx.org/course?search_query=machine-learning-columbiax-csmm-102x-2',
    'https://www.edx.org/course?search_query=data-science-r-basics-harvardx-ph125-1x-0',
    'https://www.edx.org/course?search_query=professional-certificate%2Fharvardx-data-science',
    'https://www.edx.org/course?search_query=professional-certificate%2Fberkeleyx-foundations-of-data-science',
    'https://www.edx.org/course?search_query=python-for-data-science',
    'https://www.edx.org/course?search_query=developing-sql-databases-microsoft-dat215-1x-3',
];

var style = 'position: absolute !important; border: 2px solid #fff; border-radius: 5px; font-size: 0.75em; left: 475px; height: 48px; width: 250px; backgroud: white';

var courseURL = courseURLs[0];

var getButton = function(courseURL) {
  return "<button class='feeling-lucky' style='" + style + "'><a href='" + courseURL + "' style='font-size: 1.5em; font-weight: 600'>I'm Feeling Curious</a></button>";
  //return "<button class='feeling-lucky><a href='" + courseURL + "'>I'm Feeling Lucky</a></button>";
};

var handleSearchBarKeyPress = function(event) {
  // Delete key code
  if (event.keyCode == 46) {
    consecutiveDeletes++;
  } else {
    consecutiveDeletes = 0;
  }

  if (consecutiveDeletes >= 3) {
    showRandomButton();
  }
};

var handleSearchBarClick = function() {
  if (timeout) {
    clearTimeout(timeout);
    timeout = null;
  }

  timeout = setTimeout(showRandomButton, 2000);
};

var showRandomButton = function() {
  utils.waitForElement(feelingLuckyHomepageSearchInput).then(function() {
    if (!buttonExists) {
      var randomCourseIndex = Math.floor(Math.random() * courseURLs.length);
      courseURL = courseURLs[randomCourseIndex];
      $('.react-autosuggest__container').prepend(getButton(courseURL));
      buttonExists = true;
    }
  });
};

var setFeelingLucky = function() {
  utils.waitForElement(feelingLuckyHomepageSearchInput).then(function() {
    $(feelingLuckyHomepageSearchInput).keypress(handleSearchBarKeyPress);
    $(feelingLuckyHomepageSearchInput).click(handleSearchBarClick);
  });
};

var setOnClick = function() {
  utils.waitForElement('.feeling-lucky').then(function() {
    $('.feeling-lucky').click(function() {
      window.optimizely.push({
        type: 'event',
        eventName: 'feeling-lucky-click',
      });
      window.location.href = courseURL;
    });
  });
};


setFeelingLucky();
setOnClick();
}}, {"value": "<style>.feeling-lucky { \n  position: absolute !important;\n  border: 2px solid #fff;\n  border-radius: 5px;\n  left: 475px;\n  height: 48px;\n  width: 250px;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "81319751-A909-49FE-9FDA-A4DD29E4E292"}]}], "name": "Test"}], "audienceIds": ["or", "8430051876"], "changes": null, "id": "10194683829", "integrationSettings": null}], "id": "10195734350", "weightDistributions": null, "name": "I'm Feeling Lucky Hackathon (Jae)", "groupId": null, "commitId": "10192614777", "decisionMetadata": null, "policy": "single_experiment", "changes": null}, {"holdback": 0, "activation": {}, "integrationSettings": {"google_universal_analytics": {"universal_analytics_tracker": "", "universal_analytics_slot": "83"}}, "integrationStringVersion": 2, "viewIds": ["10238425886", "10240812267", "10244784103", "10246741690", "10279640053"], "experiments": [{"weightDistributions": [{"entityId": "10458001307", "endOfRange": 10000}], "audienceName": "EdX Preferred Language is English,Not Enterprise", "name": "LEARNER-3515: Growth: Portfolio Project upsell test", "bucketingStrategy": null, "variations": [{"id": "10191555618", "actions": [{"viewId": "10240812267", "changes": [{"dependencies": [], "type": "custom_code", "id": "C7297E1D-F1B6-4C55-8A6A-3D3B5852D604", "value": function($){var utils = window.optimizely.get('utils');
var getPortfolioProjectURL = function() {
  // format is courses/{courseKey}/course so we want to match only until the first / after courses/
  return window.location.href.match(/(https:\/\/courses\.edx\.org\/courses\/.+?(?=\/))/)[1] + '/xfeature/portfolio';
};

// Display tab for all learners.
utils.waitForElement('.navbar-nav').then(function(){
  var enrollment_mode = JSON.parse($('#user-metadata').text()).enrollment_mode,
      tabString;
  
  // Show locked icon for audit learners, unlocked icon for verified learners.

  tabString = 'Portfolio';
  
  if (enrollment_mode === 'verified') {
  	$(".navbar-nav .nav-item:first").after('<li class="nav-item stats-nav-item"><a href="' + getPortfolioProjectURL() + '" class="nav-link">' + tabString + '</a></li>');
  }
});

// Special case for the tab on wiki pages.
utils.waitForElement('.wrapper-course-material').then(function(){
  console.log('wrapper course material');
  var enrollment_mode = JSON.parse($('#user-metadata').text()).enrollment_mode,
      tabString = 'Portfolio';
  
  utils.waitForElement('.tab').then(function() {
	    console.log('first tab');
		  if (enrollment_mode === 'verified') {
    	  $(".tab:first").after('<li class="tab stats-nav-tab"><a href="' + getPortfolioProjectURL() + '" class="nav-link">' + tabString + '</a></li>');
      }
  });
});
}}, {"value": "<style>.new-feature {\n  font-size: 12px;\n  margin-left: -5px;\n  margin-top: 12px;\n  height: 18px;\n}\n\n.stats-nav-item {\n\tmargin-top: 10px !important;\n}\n\n.stats-nav-tab .nav-link, .stats-nav-item .nav-link {\n\tdisplay: inline !important;\n}\n\n.stats-nav-tab .new-feature, .stats-nav-item .new-feature {\n  position: absolute;\n\tmargin-top: 3px;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "C15E877F-CB9B-4342-8B4C-5957DC1993F0"}]}, {"viewId": "10238425886", "changes": [{"dependencies": [], "type": "custom_code", "id": "58D70246-9E9F-4147-8AD7-9D14272FE85C", "value": function($){var utils = window.optimizely.get('utils');
var $ = jQuery;

var appendTooltip = function(title) {
  var tooltip = document.createElement('span'),
      tooltipText = document.createElement('span');

  tooltip.className = 'upsell-tooltip';
  tooltip.setAttribute('tabindex', '0');
  tooltip.innerHTML = 'Why am I seeing this?';

  tooltipText.className = 'tooltip-text';
  tooltipText.innerHTML = 'EdX is offering some additional features as part of the Verified Certificate track experience for no additional cost!';

  tooltip.appendChild(tooltipText);
  title.append(tooltip);
};

utils.waitForElement('#course-container').then(function(portfolioContainer) {
  // Remove any active tabs
  $(' .navbar-nav > .nav-item').each(function(index, item) { $(item).removeClass('active'); });

  // Set active tab
  // This can potentially be removed as the navbar seems to use `nav-items` and not `nav-tabs`?
  utils.waitForElement('.stats-nav-tab').then(function(){
    $('.stats-nav-tab a').addClass('active');
  });

  // Also sets active tab
  utils.waitForElement('.stats-nav-item').then(function() {
	  $('.stats-nav-item').addClass('active');
  });

  // Set lock icon
  utils.waitForElement('.in-feature-upsell .title')
    .then(function(title) {
    	appendTooltip(title);
  	});

  	utils.waitForElement('#user-metadata').then(function(metadata) {
	    var data = JSON.parse($('#user-metadata').text());
        // Replace
        var surveyLink = 'https://goo.gl/forms/Pe93xT0YJFD4sh5X2';
			if(data.enrollment_mode === "verified"){
        // IF THIS TEXT NEEDS TO BE CHANGED, CHANGE BOTH HERE AND IN THE VARIATION
        utils.waitForElement('.portfolio-instructions').then(function(portfolioInstructions) {
          // Apply portfolio container project instructions
          portfolioInstructions.innerHTML = [
              '<div class="portfolio-wrapper">',
                  '<h2 class="hd hd-2">Portfolio Builder: My First Project</h2>',
                  '<p>Congratulations on your new coding skills! If you have finished your course or are at a point where you want to start your own side project, keep reading!</p>',
                  '<p>Below we have a project idea for you to dive into that has multiple levels.  Using your newly acquired skills, try tackling this project.  Make it your own by getting creative with it beyond our ideas.</p>',
                  '<p>Did you know that while you’re working on your project you are also working to build your portfolio (a collection of your work)?  You’ll need to be able to show your creations and we’ll give you tips to do so along the way.</p>',
                  '<p>This project isn’t part of your course - it’s all yours.  You can share it and showcase it all you want.</p>',
                  '<p>As a portfolio, this project is meant to be a representative sample of what you can do.  We are directing you to share your work on github, which is a common mechanism in software engineering for publishing your software for others to use.  Hosting on github means that your work can be shared as simply as sending a URL link to anyone who would find value in reviewing your work. </p>',
                  '<p>The project we have designed is meant to be one that would be similar to something asked in a general software engineering interview.  The specific course you are taking will lead to a different implementation path.  If your course is in java, use java; If your course is in algorithms, experiment with using different algorithms.</p>',
                  '<p>Good luck and have fun!</p>',
            			'<h3>Questions or Suggestions?</h3>',
            			'<div>Portfolio Builder is a new Beta feature provided by edX to select learners. It is not part of your course.<br></br>If you have feedback about this project, please take a moment to fill out our <a href="' + surveyLink + '">survey link</a>.</div>',
            			'<br></br>',
                  '<ul>',
                      '<li><a href="#the-project">The Project: Build a To-Do List App</a></li>',
                      '<li>',
                          '<a href="#level1">"Level 1: Keep track of stuff!</a>',
                          '<ul>',
                             '<li><a href="#level1-1">Create a Github account</a></li>',
                              '<li><a href="#level1-2">Upload your project to Github</a></li>',
                          '</ul>',
                      '</li>',
                      '<li>',
                          '<a href="#level2">Level 2: Lists</a>',
                          '<ul>',
                              '<li><a href="#level2-1">Reorder items on your list</a></li>',
                              '<li><a href="#level2-2">Multiple lists</a></li>',
                          '</ul>',
                      '</li>',
                      '<li><a href="#level3">Level 3: A completed items report</a></li>',
                      '<li><a href="#level4">Level 4: Tweet your completed items stats</a></li>',
                      '<li><a href="#level5">Level 5: Make a GUI</a></li>',
                      '<li><a href="#level6">Level 6: Sync to the cloud</a></li>',
                  '</ul>',

                  '<h3 class="hd hd-3" id="the-project">The Project: Build a To-Do List App</h3>',
                  '<p>The goal of this project is to build a productivity application that helps people keep track of the things they need to do in their busy lives.</p>',
                  '<p>We will call this application “toodoo”. Your goal is to help your users remember the important things they need to do.</p>',
                  '<p>The project is broken up into several parts, you can take it as far as you would like.</p>',
                  '<p>If you have feedback about this project, please take a moment to fill out our <a href="https://goo.gl/forms/f0VQ0jGsWBWPUkaB3" target="_BLANK"><span class="sr">portfolio project </span>survey</a>.</p>',

                  '<h3 class="hd hd-3" id="level1">Level 1: Keep track of stuff!</h3>',
                  '<p>The first level of this project is to make a simple command line application that keeps track of a single to-do list. It should be able to do the following:</p>',
                  '<ul>',
                      '<li>Allow the user to add a new item to the to-do list</li>',
                      '<li>List items that haven’t been completed yet</li>',
                      '<li>Mark an item as completed</li>',
                  '</ul>',
                  '<p>Your application should look something like this:</p>',
                  '<div class="code block">',
                      '<ul class="list steps">',
                          '<li>',
                              '<div class="action">$ toodoo create “buy milk”</div>',
                              '<div>New item “buy milk” added to your list!</div>',
                          '</li>',
                          '<li>',
                              '<div class="action">$ toodoo create “buy cereal”</div>',
                              '<div>New item “buy cereal” added to your list!</div>',
                          '</li>',
                          '<li>',
                              '<div class="action">$ toodoo list</div>',
                              '<ol>',
                                  '<li>buy milk</li>',
                                  '<li>buy cereal</li>',
                              '</ol>',
                          '</li>',
                          '<li>',
                              '<div class="action">$ toodoo complete 1</div>',
                              '<div>Marking “buy milk” as completed. Great job!</div>',
                          '</li>',
                          '<li>',
                              '<div class="action">$ toodoo list</div>',
                              '<ol>',
                                  '<li>buy cereal</li>',
                              '</ol>',
                          '</li>',
                          '<li>',
                              '<div class="action">$ toodoo complete 1</div>',
                              '<div>Marking “buy cereal” completed. Great job!</div>',
                          '</li>',
                          '<li>',
                              '<div class="action">$ toodoo list</div>',
                              '<div>You’ve done it all!</div>',
                          '</li>',
                      '</ul>',
                  '</div>',
                  '<p>Feel free to get creative with the name of your application (you need not call it “toodoo”), the names of commands, and the messages sent back to the user.</p>',
                  '<p>Start thinking about what should happen in uncommon scenarios. For example, what should happen if a user creates two items with exactly the same name? What should happen if they do not enter a name at all?</p>',

                  '<h4 class="hd hd-4" id="level1-1">Create a Github account </h4>',
                  '<ol>',
                      '<li>If you already have a github account, skip to the <a href="#level1-2">Upload your project to Github</a> section of this document.</li>',
                      '<li>Navigate to <a href="https://github.com" target="_BLANK">https://github.com</a> - the login/register form is (currently) on the home page.  Follow the instructions for creating an account or feel free to use your existing account if you have one.  Your username <b>WILL</b> be publicly visible when you share your portfolio project, so keep this in mind while choosing.</li>',
                      '<li>During creation of your account, you will be prompted to make a public repository or private+public repository account.  Both will enable you to participate in the portfolio project.</li>',
                      '<li>Once you’ve verified your email address, you can create a new public project!</li>',
                  '</ol>',

                  '<h4 class="hd hd-4" id="level1-2">Upload your project to Github</h4>',
                  '<ol>',
                      '<li>Now that you’ve created your account, navigate back to the github homepage (<a href="https://github.com" target="_BLANK">https://github.com</a>) and click on the “Start a Project” button.  As of this writing, this takes you to <a href="https://github.com/new" target="_BLANK">https://github.com/new</a> where you can specify some details of the new project.</li>',
                      '<li>The description is freeform and optional (but recommended), but we are suggesting that for the repository name, participants follow this naming convention: <span class="code">edx-portfolio1-username</span>, where username is your username on edx.</li>',
                      '<li>For your new repository, github will give you helpful instructions on how to upload your code.  Given your usage of the command line for the project, we recommend using the command-line instructions for “creating a new repository”.</li>',
                  '</ol>',

                  '<h3 class="hd hd-3" id="level2">Level 2: Lists</h3>',
                  '<h4 class="hd hd-4" id="level2-1">Reorder items on your list</h4>',
                  '<p>Sometimes you might want to swap around the order of stuff in your list.</p>',
                  '<div class="code block">',
                      '<ul class="list steps">',
                          '<li>',
                              '<div class="action">$ toodoo list</div>',
                              '<ol>',
                                  '<li>Pack phone chargers</li>',
                                  '<li>Road trip!</li>',
                                  '<li>Fill the tires in the car</li>',
                              '</ol>',
                          '</li>',
                          '<li>',
                              '<div class="action">$ toodoo swap 2 3</div>',
                              '<ol>',
                                  '<li>Pack phone chargers</li>',
                                  '<li>Fill the tires in the car</li>',
                                  '<li>Road trip!</li>',
                              '</ol>',
                          '</li>',
                      '</ul>',
                  '</div>',
                  '<p><b>Bonus:</b> See if you can open a text editor that allows the user to re-arrange as many items as they want all at once. When they save and quit the editor, their to-do list will reflect the changes.</p>',
                  '<p>Upload to github!  Use <span class="code">edx-portfolio2a-username</span> as the repository name.</p>',

                  '<h4 class="hd hd-4" id="level2-2">Multiple lists</h4>',
                  '<p>You now have some “high priority” stuff you need to do, some stuff that you need to get done “eventually” and some stuff that is “blocked” waiting for something outside of your control to happen.</p>',
                  '<p>You will probably have to change a lot of code to make this work. This process is called “refactoring” and is critical to professional software engineering. Be sure to create lots of commits in your git repository as you go so you can always go back if you don’t like how things are shaping up.</p>',
                  '<div class="code block">',
                      '<ul class="list steps">',
                          '<li>',
                              '<div class="action">$ toodoo list</div>',
                              '<ul class="list">',
                                  '<li>1. High Priority</li>',
                                  '<li>1.1 Pick up prescriptions</li>',
                                  '<li>1.2 Take out the trash</li>',
                              '</ul>',
                          '</li>',
                          '<li>',
                              '<ul class="list">',
                                  '<li>2. Eventually</li>',
                                  '<li>2.1 Shop for cheaper car insurance</li>',
                                  '<li>2.2 Clean out the trunk of the car</li>',
                              '</ul>',
                          '</li>',
                          '<li>',
                              '<ul class="list">',
                                  '<li>3. Blocked</li>',
                                  '<li>3.1  Submit the paperwork after November 2nd</li>',
                              '</ul>',
                          '</li>',
                          '<li>',
                              '<div class="action">$ toodoo complete 2.1</div>',
                              '<div>You have completed “2.1 Shop for cheaper car insurance”. Great work!</div>',
                          '</li>',
                          '<li>',
                              '<div class="action">$ toodoo list</div>',
                              '<ul class="list">',
                                  '<li>1. High Priority</li>',
                                  '<li>1.1 Pick up prescriptions</li>',
                                  '<li>1.2 Take out the trash</li>',
                              '</ul>',
                          '</li>',
                          '<li>',
                              '<ul class="list">',
                                  '<li>2. Eventually</li>',
                                  '<li>2.1 Clean out the trunk of the car</li>',
                              '</ul>',
                          '</li>',
                          '<li>',
                              '<ul class="list">',
                                  '<li>3. Blocked</li>',
                                  '<li>3.1  Submit the paperwork after November 2nd</li>',
                              '</ul>',
                          '</li>',
                          '<li>',
                              '<div class="action">$ toodoo create list “Groceries”</div>',
                              '<div>Created a new list called “Groceries”</div>',
                          '</li>',
                          '<li>',
                              '<div class="action">$ toodoo create “milk” “Groceries”</div>',
                          '</li>',
                          '<li>',
                              '<div class="action">$ toodoo list</div>',
                              '<ul class="list">',
                                  '<li>1. High Priority</li>',
                                  '<li>1.1 Pick up prescriptions</li>',
                                  '<li>1.2 Take out the trash</li>',
                              '</ul>',
                          '</li>',
                          '<li>',
                              '<ul class="list">',
                                  '<li>2. Eventually</li>',
                                  '<li>2.1 Clean out the trunk of the car</li>',
                              '</ul>',
                          '</li>',
                          '<li>',
                              '<ul class="list">',
                                  '<li>3. Blocked</li>',
                                  '<li>3.1  Submit the paperwork after November 2nd</li>',
                              '</ul>',
                          '</li>',
                          '<li>',
                              '<ul class="list">',
                                  '<li>4. Groceries</li>',
                                  '<li>4.1 milk</li>',
                              '</ul>',
                          '</li>',
                      '</ol>',
                  '</div>',

                  '<p>Now you probably hit some interesting and uncommon scenarios. What happens if I create a new item without specifying the list? What should I display if a list is empty? Should I have some way to delete lists I created? What if they have items in them?</p>',
                  '<p>Upload to github!  Use <span class="code">edx-portfolio2b-username</span> as the repository name.</p>',

                  '<h3 class="hd hd-3" id="level3">Level 3: A completed items report</h3>',
                  '<p>You want to feel good about all of the great work you did this week. This command will give you a summary of all of the tasks you completed the last week.</p>',
                  '<p>Upload to github!  Use <span class="code">edx-portfolio3-username</span> as the repository name.</p>',

                  '<h3 class="hd hd-3" id="level4">Level 4: Tweet your completed items stats</h3>',
                  '<p>Have your application send a tweet from your account that says “I completed 10 items on my toodoo list this week!”</p>',
                  '<p>Upload to github!  Use <span class="code">edx-portfolio4-username</span> as the repository name.  Keep in mind that if you are using a twitter API key that you should NOT upload that to github!!!  Consider using a <a href="https://git-scm.com/docs/gitignore" target="_BLANK">gitignore</a> file.</p>',

                  '<h3 class="hd hd-3" id="level5">Level 5: Make a Graphical User Interface (GUI)</h3>',
                  '<p>Create a Graphical User Interface (a.k.a. a GUI) for your application. This can be a web page, a native desktop application, or a mobile app!</p>',
                  '<p>Upload to github!  Use <span class="code">edx-portfolio5-username</span> as the repository name.</p>',

                  '<h3 class="hd hd-3" id="level6">Level 6: Sync to the cloud</h3>',
                  '<p>When you make changes to your list from one device, they will be updated on all of the others including your command line application.</p>',
                  '<p>Upload to github!  Use <span class="code">edx-portfolio6-username</span> as the repository name.</p>',
              '</div>'
          ].join('');
        });
      }
    });
});
}}, {"value": "<style>.portfolio-wrapper {padding: 20px;}\n.portfolio-wrapper .code {\n  font-family: Consolas,Monaco,Lucida Console,Liberation Mono,'DejaVu Sans Mono','Bitstream Vera Sans Mono','Courier New';\n  font-weight: 600;\n}\n\n.portfolio-wrapper .code.block {\n  padding: 10px 20px;\n  margin-bottom: 20px;\n  background: #eee;\n  font-weight: normal;\n  box-shadow: inset 0 0 5px 0 #aaa;\n}\n\n.portfolio-wrapper .code.block .action {font-weight: bold;}\n.portfolio-wrapper .code.block .list {list-style: none; padding: 0;}\n.portfolio-wrapper .code.block .steps ol {padding-left: 25px;}\n.portfolio-wrapper .code.block .steps > li {margin: 0 0 10px;}\n\n.tooltip-inner {\n  max-width: 450px;\n  /* If max-width does not work, try using width instead */\n  width: 450px;\n}\n\n.upsell-tooltip {\n    position: relative;\n    display: block;\n    border-bottom: 1px dotted #065683;\n    color: #065683;\n    margin-left: 15px;\n    font-size: 12px;\n    margin-top: 6px;\n    padding-right:5px;\n    width: fit-content;\n}\n\n.upsell-tooltip .tooltip-text {\n    visibility: hidden;\n    width: 200px;\n    background-color: black;\n    color: #fff;\n    font-weight: 600;\n    text-align: center;\n    border-radius: 4px;\n    padding: 5px;\n\n    /* Position the tooltip */\n    position: absolute;\n    z-index: 1;\n    margin-left: 10px;\n    margin-top: -4px;\n}\n\n.upsell-tooltip .tooltip-text::before {\n  content: '';\n    width: 0;\n    height: 0;\n    position: absolute;\n    left: -12px;\n    border: 7px solid transparent;\n    border-right: 7px solid black;\n    top: 7px;\n}\n\n.upsell-tooltip:focus .tooltip-text,\n.upsell-tooltip:hover .tooltip-text {\n    visibility: visible;\n}\n\n@media only screen and (min-width: 630px) {\n  .upsell-tooltip {\n    display: inline-block;\n  }\n}\n\n@media only screen and (min-width: 865px) {\n  .upsell-tooltip .tooltip-text {\n    width: 400px;\n  }\n}\n\n.stats-nav-tab {\n\tmargin-top: 8px !important;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "75D04CE5-5105-4A07-B4B2-4723290A7711"}, {"value": "<div class='portfolio-instructions'></div>", "selector": "#course-container", "dependencies": [], "operator": "after", "type": "append", "id": "CC3F0375-8F0A-4E0F-B2C8-EA334BA6D8AE"}]}], "name": "Original"}, {"id": "10195824677", "actions": [{"viewId": "10238425886", "changes": [{"dependencies": [], "type": "custom_code", "id": "92F8AA11-4719-4B8B-80B6-AB80F0253B68", "value": function($){var utils = window.optimizely.get('utils');
var $ = jQuery;

var appendTooltip = function(title) {
  var tooltip = document.createElement('span'),
      tooltipText = document.createElement('span');

  tooltip.className = 'upsell-tooltip';
  tooltip.setAttribute('tabindex', '0');
  tooltip.innerHTML = 'Why am I seeing this?';

  tooltipText.className = 'tooltip-text';
  tooltipText.innerHTML = 'EdX is offering some additional features as part of the Verified Certificate track experience for no additional cost!';

  tooltip.appendChild(tooltipText);
  title.append(tooltip);
};

var prependLockIcon = function(title) {
  var lockIcon = document.createElement('span');

  lockIcon.setAttribute('aria-hidden', 'true');

  utils.waitForElement('#user-metadata').then(function(metadata) {
    var data = JSON.parse($('#user-metadata').text());

    if (data.enrollment_mode === "audit" || data.enrollment_mode === null) {
      lockIcon.className = 'fa fa-lock';
    } else {
      lockIcon.className = 'fa fa-unlock-alt';
    }

    title.prepend(lockIcon);
  });
};

utils.waitForElement('#course-container').then(function(portfolioContainer) {
  // Remove any active tabs
  $(' .navbar-nav > .nav-item').each(function(index, item) { $(item).removeClass('active'); });

  // Set active tab
  // This can potentially be removed as the navbar seems to use `nav-items` and not `nav-tabs`?
  utils.waitForElement('.stats-nav-tab').then(function(){
    $('.stats-nav-tab a').addClass('active');
  });

  // Also sets active tab
  utils.waitForElement('.stats-nav-item').then(function() {
	  $('.stats-nav-item').addClass('active');
  });

  // Set lock icon
  utils.waitForElement('.in-feature-upsell .title')
    .then(function(title) {
    	appendTooltip(title);
    	prependLockIcon(title);
  	});

  	utils.waitForElement('#user-metadata').then(function(metadata) {
	    var data = JSON.parse($('#user-metadata').text());

      // if user is not enrolled
      if (data.enrollment_mode === "audit" || data.enrollment_mode === null) {
        utils.waitForElement('.in-feature-upsell').then(function(upsellWrapper){
          upsellWrapper.style.display = 'block';
        });

        utils.waitForElement('.in-feature-upsell .upsell-upgrade').then(function(upgradeBtn){
          // commented out data.update_link check for now
          // Need to add this back in later
          if (data.upgrade_price) {
            upgradeBtn.innerHTML = 'Upgrade (' +  data.upgrade_price + ' USD)';
            upgradeBtn.setAttribute('href', data.upgrade_link);
          }

          $('.in-feature-upsell .upsell-upgrade').click(function() {
            window.optimizely.push({
              type: 'event',
              eventName: 'LEARNER-3515_in_feature_page_upgrade',
            });
          });
        });

      // if user is enrolled
      } else {
        // Replace
        var surveyLink = 'https://goo.gl/forms/Pe93xT0YJFD4sh5X2';
        
        // Modify enrollment type message
        utils.waitForElement('.in-feature-upsell').then(function(upsellWrapper){
          utils.waitForElement('.enrollment-type-message-wrapper').then(function(enrollmentTypeMessageWrapper) {
            enrollmentTypeMessageWrapper.style.display = 'block';
            enrollmentTypeMessageWrapper.style['border-left'] = '4px solid #19961b';
            enrollmentTypeMessageWrapper.style.margin = '15px 0';
            enrollmentTypeMessageWrapper.style.padding = '20px 10px';
            enrollmentTypeMessageWrapper.style.background = '#F6F6F6';
            utils.waitForElement('.enrollment-type-message').then(function(enrollmentTypeMessage) {
              $('.enrollment-type-message').text('Your enrollment: Verified track');
              utils.waitForElement('.enrollment-type-message-note').then(function(enrollmentTypeMessageNote) {
                enrollmentTypeMessageNote.style.display = 'none';
                utils.waitForElement('.in-feature-upsell .upsell-upgrade').then(function(upgradeButton) {
                  upgradeButton.style.display = 'none';
                  utils.waitForElement('.upgrade-message').then(function(upgradeMessage) {
                    upgradeMessage.style.display = 'none';
                    utils.waitForElement('.upgrade-button-image').then(function(upgradeButtonImage) {
                      upgradeButtonImage.style.display = 'none';
                      utils.waitForElement('.upsell-messages').then(function(upgradeMessages) {
                        upgradeMessages.style.display = 'none';
                        upsellWrapper.style.display = 'block';
                      });
                    });
                  });
                });
              });
            });
          });
        });

        utils.waitForElement('.portfolio-instructions').then(function(portfolioInstructions) {
          // Apply portfolio container project instructions
          portfolioInstructions.innerHTML = [
              '<div class="portfolio-wrapper">',
                  '<h2 class="hd hd-2">Portfolio Builder: My First Project</h2>',
                  '<p>Congratulations on your new coding skills! If you have finished your course or are at a point where you want to start your own side project, keep reading!</p>',
                  '<p>Below we have a project idea for you to dive into that has multiple levels.  Using your newly acquired skills, try tackling this project.  Make it your own by getting creative with it beyond our ideas.</p>',
                  '<p>Did you know that while you’re working on your project you are also working to build your portfolio (a collection of your work)?  You’ll need to be able to show your creations and we’ll give you tips to do so along the way.</p>',
                  '<p>This project isn’t part of your course - it’s all yours.  You can share it and showcase it all you want.</p>',
                  '<p>As a portfolio, this project is meant to be a representative sample of what you can do.  We are directing you to share your work on github, which is a common mechanism in software engineering for publishing your software for others to use.  Hosting on github means that your work can be shared as simply as sending a URL link to anyone who would find value in reviewing your work. </p>',
                  '<p>The project we have designed is meant to be one that would be similar to something asked in a general software engineering interview.  The specific course you are taking will lead to a different implementation path.  If your course is in java, use java; If your course is in algorithms, experiment with using different algorithms.</p>',
                  '<p>Good luck and have fun!</p>',
            			'<h3>Questions or Suggestions?</h3>',
            			'<div>Portfolio Builder is a new Beta feature provided by edX to select learners. It is not part of your course.<br></br>If you have feedback about this project, please take a moment to fill out our <a href="' + surveyLink + '">survey link</a>.</div>',
            			'<br></br>',
                  '<ul>',
                      '<li><a href="#the-project">The Project: Build a To-Do List App</a></li>',
                      '<li>',
                          '<a href="#level1">"Level 1: Keep track of stuff!</a>',
                          '<ul>',
                             '<li><a href="#level1-1">Create a Github account</a></li>',
                              '<li><a href="#level1-2">Upload your project to Github</a></li>',
                          '</ul>',
                      '</li>',
                      '<li>',
                          '<a href="#level2">Level 2: Lists</a>',
                          '<ul>',
                              '<li><a href="#level2-1">Reorder items on your list</a></li>',
                              '<li><a href="#level2-2">Multiple lists</a></li>',
                          '</ul>',
                      '</li>',
                      '<li><a href="#level3">Level 3: A completed items report</a></li>',
                      '<li><a href="#level4">Level 4: Tweet your completed items stats</a></li>',
                      '<li><a href="#level5">Level 5: Make a GUI</a></li>',
                      '<li><a href="#level6">Level 6: Sync to the cloud</a></li>',
                  '</ul>',

                  '<h3 class="hd hd-3" id="the-project">The Project: Build a To-Do List App</h3>',
                  '<p>The goal of this project is to build a productivity application that helps people keep track of the things they need to do in their busy lives.</p>',
                  '<p>We will call this application “toodoo”. Your goal is to help your users remember the important things they need to do.</p>',
                  '<p>The project is broken up into several parts, you can take it as far as you would like.</p>',
                  '<p>If you have feedback about this project, please take a moment to fill out our <a href="https://goo.gl/forms/f0VQ0jGsWBWPUkaB3" target="_BLANK"><span class="sr">portfolio project </span>survey</a>.</p>',

                  '<h3 class="hd hd-3" id="level1">Level 1: Keep track of stuff!</h3>',
                  '<p>The first level of this project is to make a simple command line application that keeps track of a single to-do list. It should be able to do the following:</p>',
                  '<ul>',
                      '<li>Allow the user to add a new item to the to-do list</li>',
                      '<li>List items that haven’t been completed yet</li>',
                      '<li>Mark an item as completed</li>',
                  '</ul>',
                  '<p>Your application should look something like this:</p>',
                  '<div class="code block">',
                      '<ul class="list steps">',
                          '<li>',
                              '<div class="action">$ toodoo create “buy milk”</div>',
                              '<div>New item “buy milk” added to your list!</div>',
                          '</li>',
                          '<li>',
                              '<div class="action">$ toodoo create “buy cereal”</div>',
                              '<div>New item “buy cereal” added to your list!</div>',
                          '</li>',
                          '<li>',
                              '<div class="action">$ toodoo list</div>',
                              '<ol>',
                                  '<li>buy milk</li>',
                                  '<li>buy cereal</li>',
                              '</ol>',
                          '</li>',
                          '<li>',
                              '<div class="action">$ toodoo complete 1</div>',
                              '<div>Marking “buy milk” as completed. Great job!</div>',
                          '</li>',
                          '<li>',
                              '<div class="action">$ toodoo list</div>',
                              '<ol>',
                                  '<li>buy cereal</li>',
                              '</ol>',
                          '</li>',
                          '<li>',
                              '<div class="action">$ toodoo complete 1</div>',
                              '<div>Marking “buy cereal” completed. Great job!</div>',
                          '</li>',
                          '<li>',
                              '<div class="action">$ toodoo list</div>',
                              '<div>You’ve done it all!</div>',
                          '</li>',
                      '</ul>',
                  '</div>',
                  '<p>Feel free to get creative with the name of your application (you need not call it “toodoo”), the names of commands, and the messages sent back to the user.</p>',
                  '<p>Start thinking about what should happen in uncommon scenarios. For example, what should happen if a user creates two items with exactly the same name? What should happen if they do not enter a name at all?</p>',

                  '<h4 class="hd hd-4" id="level1-1">Create a Github account </h4>',
                  '<ol>',
                      '<li>If you already have a github account, skip to the <a href="#level1-2">Upload your project to Github</a> section of this document.</li>',
                      '<li>Navigate to <a href="https://github.com" target="_BLANK">https://github.com</a> - the login/register form is (currently) on the home page.  Follow the instructions for creating an account or feel free to use your existing account if you have one.  Your username <b>WILL</b> be publicly visible when you share your portfolio project, so keep this in mind while choosing.</li>',
                      '<li>During creation of your account, you will be prompted to make a public repository or private+public repository account.  Both will enable you to participate in the portfolio project.</li>',
                      '<li>Once you’ve verified your email address, you can create a new public project!</li>',
                  '</ol>',

                  '<h4 class="hd hd-4" id="level1-2">Upload your project to Github</h4>',
                  '<ol>',
                      '<li>Now that you’ve created your account, navigate back to the github homepage (<a href="https://github.com" target="_BLANK">https://github.com</a>) and click on the “Start a Project” button.  As of this writing, this takes you to <a href="https://github.com/new" target="_BLANK">https://github.com/new</a> where you can specify some details of the new project.</li>',
                      '<li>The description is freeform and optional (but recommended), but we are suggesting that for the repository name, participants follow this naming convention: <span class="code">edx-portfolio1-username</span>, where username is your username on edx.</li>',
                      '<li>For your new repository, github will give you helpful instructions on how to upload your code.  Given your usage of the command line for the project, we recommend using the command-line instructions for “creating a new repository”.</li>',
                  '</ol>',

                  '<h3 class="hd hd-3" id="level2">Level 2: Lists</h3>',
                  '<h4 class="hd hd-4" id="level2-1">Reorder items on your list</h4>',
                  '<p>Sometimes you might want to swap around the order of stuff in your list.</p>',
                  '<div class="code block">',
                      '<ul class="list steps">',
                          '<li>',
                              '<div class="action">$ toodoo list</div>',
                              '<ol>',
                                  '<li>Pack phone chargers</li>',
                                  '<li>Road trip!</li>',
                                  '<li>Fill the tires in the car</li>',
                              '</ol>',
                          '</li>',
                          '<li>',
                              '<div class="action">$ toodoo swap 2 3</div>',
                              '<ol>',
                                  '<li>Pack phone chargers</li>',
                                  '<li>Fill the tires in the car</li>',
                                  '<li>Road trip!</li>',
                              '</ol>',
                          '</li>',
                      '</ul>',
                  '</div>',
                  '<p><b>Bonus:</b> See if you can open a text editor that allows the user to re-arrange as many items as they want all at once. When they save and quit the editor, their to-do list will reflect the changes.</p>',
                  '<p>Upload to github!  Use <span class="code">edx-portfolio2a-username</span> as the repository name.</p>',

                  '<h4 class="hd hd-4" id="level2-2">Multiple lists</h4>',
                  '<p>You now have some “high priority” stuff you need to do, some stuff that you need to get done “eventually” and some stuff that is “blocked” waiting for something outside of your control to happen.</p>',
                  '<p>You will probably have to change a lot of code to make this work. This process is called “refactoring” and is critical to professional software engineering. Be sure to create lots of commits in your git repository as you go so you can always go back if you don’t like how things are shaping up.</p>',
                  '<div class="code block">',
                      '<ul class="list steps">',
                          '<li>',
                              '<div class="action">$ toodoo list</div>',
                              '<ul class="list">',
                                  '<li>1. High Priority</li>',
                                  '<li>1.1 Pick up prescriptions</li>',
                                  '<li>1.2 Take out the trash</li>',
                              '</ul>',
                          '</li>',
                          '<li>',
                              '<ul class="list">',
                                  '<li>2. Eventually</li>',
                                  '<li>2.1 Shop for cheaper car insurance</li>',
                                  '<li>2.2 Clean out the trunk of the car</li>',
                              '</ul>',
                          '</li>',
                          '<li>',
                              '<ul class="list">',
                                  '<li>3. Blocked</li>',
                                  '<li>3.1  Submit the paperwork after November 2nd</li>',
                              '</ul>',
                          '</li>',
                          '<li>',
                              '<div class="action">$ toodoo complete 2.1</div>',
                              '<div>You have completed “2.1 Shop for cheaper car insurance”. Great work!</div>',
                          '</li>',
                          '<li>',
                              '<div class="action">$ toodoo list</div>',
                              '<ul class="list">',
                                  '<li>1. High Priority</li>',
                                  '<li>1.1 Pick up prescriptions</li>',
                                  '<li>1.2 Take out the trash</li>',
                              '</ul>',
                          '</li>',
                          '<li>',
                              '<ul class="list">',
                                  '<li>2. Eventually</li>',
                                  '<li>2.1 Clean out the trunk of the car</li>',
                              '</ul>',
                          '</li>',
                          '<li>',
                              '<ul class="list">',
                                  '<li>3. Blocked</li>',
                                  '<li>3.1  Submit the paperwork after November 2nd</li>',
                              '</ul>',
                          '</li>',
                          '<li>',
                              '<div class="action">$ toodoo create list “Groceries”</div>',
                              '<div>Created a new list called “Groceries”</div>',
                          '</li>',
                          '<li>',
                              '<div class="action">$ toodoo create “milk” “Groceries”</div>',
                          '</li>',
                          '<li>',
                              '<div class="action">$ toodoo list</div>',
                              '<ul class="list">',
                                  '<li>1. High Priority</li>',
                                  '<li>1.1 Pick up prescriptions</li>',
                                  '<li>1.2 Take out the trash</li>',
                              '</ul>',
                          '</li>',
                          '<li>',
                              '<ul class="list">',
                                  '<li>2. Eventually</li>',
                                  '<li>2.1 Clean out the trunk of the car</li>',
                              '</ul>',
                          '</li>',
                          '<li>',
                              '<ul class="list">',
                                  '<li>3. Blocked</li>',
                                  '<li>3.1  Submit the paperwork after November 2nd</li>',
                              '</ul>',
                          '</li>',
                          '<li>',
                              '<ul class="list">',
                                  '<li>4. Groceries</li>',
                                  '<li>4.1 milk</li>',
                              '</ul>',
                          '</li>',
                      '</ol>',
                  '</div>',

                  '<p>Now you probably hit some interesting and uncommon scenarios. What happens if I create a new item without specifying the list? What should I display if a list is empty? Should I have some way to delete lists I created? What if they have items in them?</p>',
                  '<p>Upload to github!  Use <span class="code">edx-portfolio2b-username</span> as the repository name.</p>',

                  '<h3 class="hd hd-3" id="level3">Level 3: A completed items report</h3>',
                  '<p>You want to feel good about all of the great work you did this week. This command will give you a summary of all of the tasks you completed the last week.</p>',
                  '<p>Upload to github!  Use <span class="code">edx-portfolio3-username</span> as the repository name.</p>',

                  '<h3 class="hd hd-3" id="level4">Level 4: Tweet your completed items stats</h3>',
                  '<p>Have your application send a tweet from your account that says “I completed 10 items on my toodoo list this week!”</p>',
                  '<p>Upload to github!  Use <span class="code">edx-portfolio4-username</span> as the repository name.  Keep in mind that if you are using a twitter API key that you should NOT upload that to github!!!  Consider using a <a href="https://git-scm.com/docs/gitignore" target="_BLANK">gitignore</a> file.</p>',

                  '<h3 class="hd hd-3" id="level5">Level 5: Make a Graphical User Interface (GUI)</h3>',
                  '<p>Create a Graphical User Interface (a.k.a. a GUI) for your application. This can be a web page, a native desktop application, or a mobile app!</p>',
                  '<p>Upload to github!  Use <span class="code">edx-portfolio5-username</span> as the repository name.</p>',

                  '<h3 class="hd hd-3" id="level6">Level 6: Sync to the cloud</h3>',
                  '<p>When you make changes to your list from one device, they will be updated on all of the others including your command line application.</p>',
                  '<p>Upload to github!  Use <span class="code">edx-portfolio6-username</span> as the repository name.</p>',
              '</div>'
          ].join('');
        });
      }
    });
});
}}, {"value": "<style>.portfolio-wrapper {padding: 20px;}\n.portfolio-wrapper .code {\n  font-family: Consolas,Monaco,Lucida Console,Liberation Mono,'DejaVu Sans Mono','Bitstream Vera Sans Mono','Courier New';\n  font-weight: 600;\n}\n\n.portfolio-wrapper .code.block {\n  padding: 10px 20px;\n  margin-bottom: 20px;\n  background: #eee;\n  font-weight: normal;\n  box-shadow: inset 0 0 5px 0 #aaa;\n}\n\n.portfolio-wrapper .code.block .action {font-weight: bold;}\n.portfolio-wrapper .code.block .list {list-style: none; padding: 0;}\n.portfolio-wrapper .code.block .steps ol {padding-left: 25px;}\n.portfolio-wrapper .code.block .steps > li {margin: 0 0 10px;}\n\n.tooltip-inner {\n  max-width: 450px;\n  /* If max-width does not work, try using width instead */\n  width: 450px;\n}\n\n.upsell-tooltip {\n    position: relative;\n    display: block;\n    border-bottom: 1px dotted #065683;\n    color: #065683;\n    margin-left: 15px;\n    font-size: 12px;\n    margin-top: 6px;\n    padding-right:5px;\n    width: fit-content;\n}\n\n.upsell-tooltip .tooltip-text {\n    visibility: hidden;\n    width: 200px;\n    background-color: black;\n    color: #fff;\n    font-weight: 600;\n    text-align: center;\n    border-radius: 4px;\n    padding: 5px;\n\n    /* Position the tooltip */\n    position: absolute;\n    z-index: 1;\n    margin-left: 10px;\n    margin-top: -4px;\n}\n\n.upsell-tooltip .tooltip-text::before {\n  content: '';\n    width: 0;\n    height: 0;\n    position: absolute;\n    left: -12px;\n    border: 7px solid transparent;\n    border-right: 7px solid black;\n    top: 7px;\n}\n\n.upsell-tooltip:focus .tooltip-text,\n.upsell-tooltip:hover .tooltip-text {\n    visibility: visible;\n}\n\n@media only screen and (min-width: 630px) {\n  .upsell-tooltip {\n    display: inline-block;\n  }\n}\n\n@media only screen and (min-width: 865px) {\n  .upsell-tooltip .tooltip-text {\n    width: 400px;\n  }\n}\n\n.stats-nav-tab {\n\tmargin-top: 8px !important;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "8080E9E6-EDC1-43E4-B49F-6390845E4B42"}, {"value": "<div class=\"in-feature-upsell\" style=\"display: none; padding: 0 20px;\n\">\n  <header>\n    <h2 class='title' style=\"padding-top: 25px; padding-bottom: 10px;\">\n      Portfolio Builder\n    </h2>\n  </header>\n    <div class='enrollment-type-message-wrapper' style=\"\n    display: block;\n    border-left: 4px solid #1F5C78;\n    margin: 15px 0;\n    padding: 10px;\n    background: #F6F6F6;\n    \"><div class='enrollment-type-message' style=\"\n    font-weight: bold;\n\">Your enrollment: Audit track<span></span></div><span class='enrollment-type-message-note' style=\"\n    font-size: 13px;\n\">You are enrolled in the audit track for this course. The audit track does not include a certificate.</span></div>\n<div class='upgrade-message' style=\"\n    color: grey;\n    font-size: 14px;\n    max-width: 640px;\n\">Upgrade to access new content: a guide for building an online portfolio and creating your first project.</div><div class='upgrade-button-image' style=\"\n    margin-top: 20px;\n    margin-bottom: 25px;\n\"><a class=\"btn-brand upsell-upgrade\" style=\"\n    background: rgb(0, 129, 0) none repeat scroll 0% 0% / auto padding-box border-box;\n    border: 1px solid rgb(0, 129, 0);\n    font: normal normal 600 normal 16px / normal &quot;Open Sans&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif;\n    padding: 8px 20px;\n\">\n    </a><img src=\"https://courses.edx.org/static/images/edx-verified-mini-cert.png\" alt=\"\" style=\"\n    height: 43px;\n    margin-top: -3px;\n    margin-left: 15px;\n\"></div><div class='upsell-messages' style=\"\n    display: flex;\n      flex-wrap: wrap;\n    margin-left: -20px;\n\">\n\n\t<div style=\"\n    max-width: 400px;\n    margin: 10px 20px;\n\"><div style=\"\n    margin-bottom: 5px;\n\"><b>Use Your New Coding Skills</b></div><span style=\"\n    color: grey;\n    font-size: 14px;\n\">Want to practice what you've learned? We'll give you a project idea to create your own portfolio. Get creative!</span>\n    </div>\n\t<div style=\"\n    max-width: 400px;\n    margin: 10px 20px;\n\"><div style=\"\n    margin-bottom: 5px;\n\"><b>Build Your Portfolio</b></div><span style=\"\n    color: grey;\n    font-size: 14px;\n\">Apply your knowledge and show them you can code - this project is the perfect start to your portfolio.</span></div>\n\t<div style=\"\n    max-width: 400px;\n    margin: 10px 20px;\n\"><div style=\"\n    margin-bottom: 5px;\n\"><b>Share What You Can Do</b></div><span style=\"\n    color: grey;\n    font-size: 14px;\n\">Get tips on where to store your project and the best way to share it with employers.</span></div>\n</div>\n    </div>\n<div class='portfolio-instructions'></div>", "selector": "#course-container", "dependencies": [], "operator": "after", "type": "append", "id": "440C919C-A44D-47AB-B47C-2CA6A5FEAF2C"}]}, {"viewId": "10279640053", "changes": [{"dependencies": [], "type": "custom_code", "id": "FD469946-0444-4A48-BB38-0BC1A628BC6A", "value": function($){window.optimizely = window.optimizely || [];
var utils = window.optimizely.get('utils');


// When the modal upgrade is clicked take user to checkout page using link value stored in user-metadata
var handleUpgradeButtonClick = function() {
  utils.waitForElement(window.upgradeButton).then(function() {
    $(window.upgradeButton).click(function(event) {
      // Stop the default click handler on the upgrade button
      event.stopPropagation();

      window.location.href = JSON.parse($('#user-metadata').text()).upgrade_link;
    });
  });
};


utils.waitForElement(window.learnMoreLink).then(function (container) {
    window.handleModalExit();
    window.setModalEventHandlers('LEARNER-3515_track_selection_page_modal_upgrade');

    handleUpgradeButtonClick();
    window.replaceUpgradePriceMessage();

    $(window.learnMoreLink).click(function() {
      window.optimizely.push({ type: 'event', eventName: 'LEARNER-3515_track_selection_page_learn_more_click' });
      window.sendCarouselEvent(window.getCurrentSlideIndex());
      window.showModal();
    });
});
}}, {"value": "<style>/* Will need to update #upsell-modal selector to #portfolio-experiment-upsell-modal when it makes it to prod */\n\n#portfolio-experiment-upsell-modal .paragon__modal {\n  font-family: \"Open Sans\", \"Helvetica Neue\", Helvetica, Arial, sans-serif;\n  font-size: 1rem;\n  font-weight: 400;\n  line-height: 1.5;\n}\n\n#portfolio-experiment-upsell-modal .paragon__modal-title {\n  font-family: \"Open Sans\", \"Helvetica Neue\", Helvetica, Arial, sans-serif;\n  font-size: 1.5rem;\n  font-weight: 600;\n  line-height: 1.5;\n}\n\n#portfolio-experiment-upsell-modal .paragon__btn.paragon__btn-success {\n  font-family: \"Open Sans\", \"Helvetica Neue\", Helvetica, Arial, sans-serif;\n  font-size: 1rem;\n  font-weight: 800;\n  line-height: 1.5;\n  text-shadow: none;\n  letter-spacing: 0;\n}\n\n#portfolio-experiment-upsell-modal .slick-dots li button {\n  box-shadow: none;\n}\n\n#portfolio-experiment-upsell-modal .paragon__btn.paragon__btn-light {\n  box-shadow: none;\n  text-shadow: none;\n  background: white;\n}\n\n#portfolio-experiment-upsell-modal .slick-slide.carousel-item {\n  width: 448px;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "E166F180-A87B-43C2-9B0A-77EBB475123F"}, {"value": "<li><span class=\"new-feature\">NEW</span> <b>Portfolio Builder - My First Project:</b>\nAccess project ideas and steps to begin creating your portfolio. <a class=\"learn-more-link\">Learn More</a></li>", "selector": ".copy-inline:nth-of-type(1) > ul", "dependencies": [], "operator": "append", "type": "append", "id": "CFB05ED5-A3C8-42EB-86B6-99BF51A1D2D8"}]}, {"viewId": "10244784103", "changes": [{"dependencies": [], "type": "custom_code", "id": "ECB4C9FE-194F-40EB-8868-3FEBFFF6705B", "value": function($){var $ = jQuery;
var utils = window.optimizely.get('utils');

var upgradeSection = '.section-upgrade .hd-6';
var message = '<span class="new-feature">NEW</span><b class="message-copy-bold">Portfolio Builder</b><div class="insights-upsell">Verified Certificate purchasers receive a new guide for starting their portfolio and creating their first project.<br>Upgrade to get started!</div>';

var handleLinkClick = function() {
  window.optimizely.push({
    type: 'event',
    eventName: 'LEARNER-3515_course_home_page_learn_more_click',
  });
  window.sendCarouselEvent(window.getCurrentSlideIndex());
  window.showModal();
};

var handleUpgradeClick = function(event) {
  event.stopPropagation();

  var metadata = JSON.parse($('#user-metadata').text());
  window.location.href = metadata.upgrade_link;
};

utils.waitForElement(upgradeSection).then(function() {
  $(upgradeSection).replaceWith(message);
  $('.promo-learn-more').replaceWith('<a class="btn-link btn-small learn-more-link">Learn More</a>');

  window.handleModalExit();
  window.setModalEventHandlers('LEARNER-3515_course_home_page_modal_upgrade');
  window.replaceUpgradePriceMessage();

  utils.waitForElement(window.learnMoreLink).then(function() {
    $(window.learnMoreLink).click(handleLinkClick);
  });

  utils.waitForElement(window.upgradeButton).then(function() {
    $(window.upgradeButton).click(handleUpgradeClick);
  });
});
}}, {"value": "<style>.insights-upsell {\n  margin: 5px 0 10px 3px;\n  font-size: 14px;\n}\n.stats-nav-item .new-feature {\n\tmargin: 3px 10px 0 0 !important;\n}\n.course-home-sidebar-upgrade .new-feature {\n\tmargin: 3px 10px 0 5px !important;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "47B78E27-617E-438C-AC4F-735DFEB2750D"}]}, {"viewId": "10246741690", "changes": [{"dependencies": [], "type": "custom_code", "id": "9E4EE5C5-6555-439D-ABBC-77F3FBBB9FFB", "value": function($){var $ = jQuery;

// HTML Identifiers
var courseItem = '.course-item';

// Update this with full list of courses
// See https://docs.google.com/spreadsheets/d/1Xv3HyL5nTnv_oS5Q7ZTojY6AoYl-9lwzwWSFxmAEvcA/edit?ts=5a1c6867#gid=0 for full course list
var courseKeys = [
  'course-v1:adam+adam+adam',
  'course-v1:Microsoft+DEV236x+1T2018',
  'course-v1:Microsoft+DEV274x+1T2018',
  'course-v1:Microsoft+DEV276x+1T2018',
  'course-v1:HKUSTx+COMP102.1x+1T2018',
  'course-v1:HKUSTx+COMP102.2x+1T2018',
  'course-v1:UC3Mx+IT.1.1x+3T2017',
  'course-v1:UC3Mx+IT.1.2x+3T2017',
  'course-v1:UC3Mx+IT.1.3x+3T2017',
  'course-v1:IITBombayX+CS101.1x+1T2018',
];

window.optimizely = window.optimizely || [];

// memoize checkout urls for courses
var courseCheckoutURLs = {};

// add course id data attribute so that checkout url can be programmatically retrieved on click
var getUpsellMessage = function(courseId) {
  return '<span class="new-feature">NEW</span><b class="message-copy-bold">Portfolio Builder: My First Project</b><div class="insights-upsell">Verified Certificate purchasers receive a new guide for starting their portfolio and creating their first project. <br>Upgrade to get started!</div><a class="learn-more-link" data-course-id="' + courseId + '">Learn more about Portfolio Builder</a>   |   <a href="https://www.edx.org/verified-certificate" class="verified-info">Learn more about Verified Certificates</a>';
};

var replaceUpgradePriceMessage = function() {
  // Note, no price here
  $(window.upgradeButton).text('Upgrade');
};

var handleUpgradeButtonClick = function(checkoutURL) {
  $(window.upgradeButton).click(function(event) {
    // Stop the default click handler on the upgrade button
    event.stopPropagation();
    window.location.href = checkoutURL;
  });
};

var addUpsellMessaging = function() {
  $(courseItem).each(function(index, item){
    // checkoutURL should be undefined for non-upgradeable courses
    var checkoutURL = $(item).find($('.action.action-upgrade')).attr('href');
    
    // if the checkoutURL is defined (aka the course is upgradeable)
    // then get the course key and create upsell message
    if (checkoutURL) {
      var courseKey = $(item).find('.enter-course').data('course-key');
      if (courseKeys.indexOf(courseKey) > -1) {
        $(item).find('.message-copy').html(getUpsellMessage(courseKey));
      }
      courseCheckoutURLs[courseKey] = checkoutURL;
    }
  });
};

var addUpsells = function() {
  addUpsellMessaging();

  window.handleModalExit();
  window.setModalEventHandlers('LEARNER-3515_dashboard_page_modal_upgrade');

  replaceUpgradePriceMessage();

  $(window.learnMoreLink).click(function(event) {
    var link = event.target;
    var courseId = $(link).data('courseId');
    var checkoutURL = courseCheckoutURLs[courseId];
    handleUpgradeButtonClick(checkoutURL);

    window.optimizely.push({
      type: "event",
      eventName: "LEARNER-3515_dashboard_page_learn_more_click"
    });

    window.sendCarouselEvent(window.getCurrentSlideIndex());
    window.showModal();
  });
};


var numCoursesBefore = $(courseItem).length;
var intervalID = setInterval(function() {
  var numCoursesAfter = $(courseItem).length;
  if (numCoursesBefore === numCoursesAfter) {
    clearInterval(intervalID);
    addUpsells();
  } else {
    numCoursesBefore = numCoursesAfter;
  }
}, 100);
}}, {"value": "<style>#portfolio-experiment-upsell-modal .paragon__modal {\n  font-family: \"Open Sans\", \"Helvetica Neue\", Helvetica, Arial, sans-serif;\n  font-size: 1rem;\n  font-weight: 400;\n  line-height: 1.5;\n}\n\n#portfolio-experiment-upsell-modal .paragon__modal-title {\n  font-family: \"Open Sans\", \"Helvetica Neue\", Helvetica, Arial, sans-serif;\n  font-size: 1.5rem;\n  font-weight: 600;\n  line-height: 1.5;\n}\n\n#portfolio-experiment-upsell-modal .paragon__btn.paragon__btn-success {\n  font-family: \"Open Sans\", \"Helvetica Neue\", Helvetica, Arial, sans-serif;\n  font-size: 1rem;\n  font-weight: 800;\n  line-height: 1.5;\n  text-shadow: none;\n  letter-spacing: 0;\n}\n\n#portfolio-experiment-upsell-modal .slick-dots li button {\n  box-shadow: none;\n}\n\n#portfolio-experiment-upsell-modal .paragon__btn.paragon__btn-light {\n  box-shadow: none;\n  text-shadow: none;\n  background: white;\n}\n\n#portfolio-experiment-upsell-modal .slick-slide.carousel-item {\n  width: 448px;\n}\n\n#portfolio-experiment-upsell-modal .upsell-certificate {\n\tleft: 120px !important;\n}\n\n#portfolio-experiment-upsell-modal .slide-header {\n  font-family: \"Open Sans\", \"Helvetica Neue\", Helvetica, Arial, sans-serif;\n}\n\n.insights-upsell {\n\tmargin: 5px 0 10px 0;\n}\n\n#portfolio-experiment-upsell-modal .slick-slide.carousel-item {\n  min-width: none !important;\n  max-width: none !important;\n  padding: 0 !important;\n}\n\n#portfolio-experiment-upsell-modal .carousel-wrapper .slick-list {\n  margin-bottom: 50px !important;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "892E3734-32DE-445F-A273-B188FB0380EF"}]}, {"viewId": "10240812267", "changes": [{"dependencies": [], "type": "custom_code", "id": "946B707C-E07C-4032-9392-D618859B2D1C", "value": function($){var utils = window.optimizely.get('utils');
var getPortfolioProjectURL = function() {
  // format is courses/{courseKey}/course so we want to match only until the first / after courses/
  return window.location.href.match(/(https:\/\/courses\.edx\.org\/courses\/.+?(?=\/))/)[1] + '/xfeature/portfolio';
};

// Display tab for all learners.
utils.waitForElement('.navbar-nav').then(function(){
  var enrollment_mode = JSON.parse($('#user-metadata').text()).enrollment_mode,
      tabString;
  
  // Show locked icon for audit learners, unlocked icon for verified learners.
  if (enrollment_mode === "audit" || enrollment_mode === null) {
    tabString = '<span class="fa fa-lock" aria-hidden="true"></span> Portfolio';
  } else {
     tabString = '<span class="fa fa-unlock-alt" aria-hidden="true"></span> Portfolio';
  }
  $(".navbar-nav .nav-item:first").after('<li class="nav-item stats-nav-item"><a href="' + getPortfolioProjectURL() + '" class="nav-link">' + tabString + '</a><span class="new-feature">NEW</span></li>');
});

// Special case for the tab on wiki pages.
utils.waitForElement('.wrapper-course-material').then(function(){
  var enrollment_mode = JSON.parse($('#user-metadata').text()).enrollment_mode,
      tabString;
  
  utils.waitForElement('.tab').then(function() {
      if (enrollment_mode === "audit" || enrollment_mode === null) {
        tabString = '<span class="fa fa-lock" aria-hidden="true"></span> Portfolio';
      } else {
        tabString = '<span class="fa fa-unlock-alt" aria-hidden="true"></span> Portfolio';
      }
      $(".tab:first").after('<li class="tab stats-nav-tab"><a href="' + getPortfolioProjectURL() + '" class="nav-link">' + tabString + '</a><span class="new-feature">NEW</span></li>');
  });
});
}}, {"value": "<style>.new-feature {\n  font-size: 12px;\n  margin-left: -5px;\n  margin-top: 12px;\n  height: 18px;\n}\n\n.stats-nav-tab {\n\twidth: 120px !important;\n}\n.stats-nav-item {\n\twidth: 130px !important;\n\tmargin-top: 10px !important;\n}\n\n.stats-nav-tab .nav-link, .stats-nav-item .nav-link {\n\tdisplay: inline !important;\n}\n\n.stats-nav-tab .new-feature, .stats-nav-item .new-feature {\n  position: absolute;\n\tmargin-top: 3px;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "E70039A2-F3D0-4BBD-AF19-5B3FB7385B54"}]}], "name": "Portfolio Project upsell"}, {"id": "10458001307", "actions": [], "name": "No Changes"}], "audienceIds": ["and", "8430051876", "9874510616"], "changes": null, "id": "10195174428", "integrationSettings": null}], "id": "10197182743", "weightDistributions": null, "name": "LEARNER-3515: Growth: Portfolio Project upsell test", "groupId": null, "commitId": "10462422513", "decisionMetadata": null, "policy": "single_experiment", "changes": [{"dependencies": [], "type": "custom_code", "id": "68310C7A-C591-4D53-8C6D-B8CF09F156E3", "value": function($){var $ = jQuery;

window.learnMoreLink = '.learn-more-link';
window.modalId = '#portfolio-experiment-upsell-modal';
window.modalEscapeButton = '#portfolio-experiment-upsell-modal .paragon__btn.paragon__btn-light';
window.paragonModal = '#portfolio-experiment-upsell-modal .paragon__modal';
window.paragonOpenModalClass = 'paragon__modal paragon__modal-open paragon__modal-backdrop paragon__show';
window.upgradeButton = '#portfolio-experiment-upsell-modal .paragon__btn.paragon__btn-success';

window.replaceUpgradePriceMessage = function() {
  var metadata = JSON.parse($('#user-metadata').text());
  var newMessage = 'Upgrade (' + metadata.upgrade_price + ' USD)';
  $(upgradeButton).text(newMessage);
};

window.showModal = function() {
  $(modalId).css('display', 'inherit');

  $(paragonModal).attr('class', paragonOpenModalClass);

  // hack to make modal fit page properly
  // console.log("test1" + $("#portfolio-experiment-upsell-modal"));
  window.dispatchEvent(new Event('resize'));
  // console.log("test1" + $("#portfolio-experiment-upsell-modal"));
  $(modalEscapeButton).focus();
};

window.getCurrentSlideIndex = function() {
  return $('#portfolio-experiment-upsell-modal .slick-slide.slick-active.carousel-item')[0].dataset.index;
};

window.sendCarouselEvent = function(slideIndex) {
  window.optimizely.push({
    type: 'event',
    eventName: 'LEARNER-3515_viewed_modal_slide_' + slideIndex,
  });
};

window.updateUpgradeButton = function(callback) {
  $(upgradeButton).click(function(event) {
    // Stop the default click handler on the upgrade button
    event.stopPropagation();
    
    callback();
  });
};

window.setModalEventHandlers = function(upgradeEventName) {
  // Modal Upgrade
  $(upgradeButton).click(function() {
  	window.optimizely.push({
      type: 'event',
      eventName: upgradeEventName
    });
  });

  // Modal Previous or Next Buttons Clicked
  $('#portfolio-experiment-upsell-modal .carousel-arrow.next').click(function() {
    var currentSlideIndex = window.getCurrentSlideIndex();
    // the next viewed carousel slide will be after the current slide index
    sendCarouselEvent(+currentSlideIndex + 1);
  });

  $('#portfolio-experiment-upsell-modal .carousel-arrow.prev').click(function() {
    var currentSlideIndex = window.getCurrentSlideIndex();
    // the next viewed carousel slide will be before the current slide index
    sendCarouselEvent(+currentSlideIndex - 1);
  });
  
  $('#portfolio-experiment-upsell-modal .slick-dots li button').click(function(event) {
    sendCarouselEvent(+event.target.textContent - 1);
  });
};

window.fireModalOpenEvent = function() {
  window.optimizely = window.optimizely || [];
  window.optimizely.push({
    type: "event",
    eventName: "LEARNER-3515_track_selection_page_learn_more_click"
  });
};

window.handleModalExit = function() {
  // handle click and escape button press
  $(modalEscapeButton).click(function(){
    $(modalId).css('display', 'none');
  });

  $(document).keyup(function(e) {
    if (e.keyCode === 27) {
      $(modalId).css('display', 'none');
    }
  });
};
}}, {"value": "<style>/** \nThis CSS is used on the following pages:\n- Track selection page\n\nMake sure any changes work on all pages it is used.\n*/\n\n.new-feature {\n    background-color: #ccdde6;\n    color: #00507e;\n    margin-right: 8px;\n    font-weight: 500;\n    box-shadow: 0 -1px 0 2px #ccdde6;\n    border-radius: 1px;\n\t  float: left;\n  \tcursor: pointer;\n}\n\n.learn-more-link {\n    font-weight: 500 !important;\n  \tcursor: pointer !important;\n\t  color: #0075b4 !important;\n}\n\n.paragon__btn.paragon__btn-success{\n  cursor: pointer !important;\n}\n\n/* The existing margin-bottom attribute does not work for Firefox */\n#portfolio-experiment-upsell-modal .carousel-wrapper .slick-list {\n  margin-bottom: 50px !important;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "02F76009-40E9-496B-8ECE-1B78788C29F4"}]}, {"holdback": 0, "activation": {}, "integrationSettings": {"google_universal_analytics": {"universal_analytics_tracker": "", "universal_analytics_slot": "86"}}, "integrationStringVersion": 2, "viewIds": ["10318510742", "10339411686"], "experiments": [{"weightDistributions": [{"entityId": "10313172556", "endOfRange": 1000}, {"entityId": "10321262054", "endOfRange": 10000}], "audienceName": "EdX Preferred Language is English", "name": "GE Interviews", "bucketingStrategy": null, "variations": [{"id": "10313172556", "actions": [{"viewId": "10318510742", "changes": []}], "name": "Original"}, {"id": "10321262054", "actions": [{"viewId": "10318510742", "changes": [{"value": "<img src=\"https://prod-edx-mktg-edit.edx.org/sites/default/files/ge_monogram_primary_blue_rgb-1.png\" width=120px;>\n     \n     <p>Get an interview with GE! If you complete and pass the program in 2018, GE will guarantee you an interview in Boston for an internship or full-time role. Simply enroll in the program and email edX@ge.com when you've completed all the courses and passed the program or if you have any questions. Open to Massachusetts residents only.</p>", "selector": ".endorser", "dependencies": [], "operator": "after", "type": "append", "id": "528CE74F-5A98-4737-8B37-4D4E08EDDA84"}, {"selector": "blockquote > img", "dependencies": [], "attributes": {"style": "margin-top: 25px; margin-left:-35px"}, "type": "attribute", "id": "75CD75DA-576C-4F5B-9576-C545CD58D91F", "css": {}}, {"selector": "blockquote > p", "dependencies": [], "attributes": {"style": "margin-top: 20px"}, "type": "attribute", "id": "8C128627-B0AC-4EF5-84CA-54E9CD49CBF4", "css": {}}]}, {"viewId": "10339411686", "changes": [{"value": "<p>Get an interview with GE! If you complete and pass the program in 2018, GE will guarantee you an interview in Boston for an internship or full-time role. Simply enroll in the program and email edX@ge.com when you've completed all the courses and passed the program or if you have any questions. Open to Massachusetts residents only.</p>", "selector": ".endorsement", "dependencies": [], "operator": "after", "type": "append", "id": "A819EFE1-8905-4093-86BB-6B8789F71275"}]}], "name": "GE Interview"}], "audienceIds": ["or", "8430051876"], "changes": null, "id": "10308011595", "integrationSettings": null}], "id": "10313432355", "weightDistributions": null, "name": "GE Interviews", "groupId": null, "commitId": "10306019504", "decisionMetadata": null, "policy": "single_experiment", "changes": null}], "listTargetingKeys": [], "groups": [], "views": [{"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "https://www.edx.org/micromasters/analytics-essential-tools-methods", "match": "simple"}]], "name": "George Tech Program Page", "apiName": "george_tech_program_page", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "8261443030"}, {"category": "home", "staticConditions": ["and", ["or", {"type": "url", "value": "https://courses.edx.org/dashboard", "match": "substring"}]], "name": "Course Dashboard", "apiName": "course_dashboard_1", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "8300752164"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "edx.org/course_modes/choose/*", "match": "regex"}]], "name": "Track Selection Top Courses September Jae", "apiName": "track_selection_page", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "8306362187"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "edx.org/course$", "match": "regex"}, {"type": "url", "value": "edx.org/course[/]?\\?.*", "match": "regex"}], ["not", ["or", {"type": "url", "value": "webview.edx.org", "match": "regex"}]]], "name": "Search Results", "apiName": "1743970571_prod_search_results", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "8343266652"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "https://www.edx.org/micromasters/michiganx-user-experience-ux-research-and-design", "match": "simple"}]], "name": "Michigan MicroMasters Program", "apiName": "1743970571_michigan_micromasters_program", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "8393862311"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "https://courses.edx.org/dashboard?utm_source=PayPal&utm_campaign=donation-track-success", "match": "exact"}]], "name": "Course Dashboard (from successful donation)", "apiName": "1743970571_course_dashboard_from_successful_donation", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "8396141742"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "https://www.edx.org/course/digital-transformation-strategy-bux-qd501x", "match": "simple"}, {"type": "url", "value": "https://www.edx.org/course/six-sigma-define-measure-tumx-qpls1x", "match": "simple"}, {"type": "url", "value": "https://www.edx.org/course/introduction-marketing-tools-set-edinburghx-mktg101x", "match": "simple"}, {"type": "url", "value": "https://www.edx.org/course/introduction-marketing-ubcx-marketing1x", "match": "simple"}, {"type": "url", "value": "https://www.edx.org/course/analytics-edge-mitx-15-071x-3", "match": "simple"}, {"type": "url", "value": "https://www.edx.org/course/entrepreneurial-mindset-babsonx-bpet-etax-0", "match": "simple"}, {"type": "url", "value": "https://www.edx.org/course/introduction-computing-using-python-gtx-cs1301x", "match": "simple"}, {"type": "url", "value": "https://www.edx.org/course/analytics-python-columbiax-bamm-101x", "match": "simple"}, {"type": "url", "value": "https://www.edx.org/course/introduction-python-data-science-microsoft-dat208x-5", "match": "simple"}, {"type": "url", "value": "https://www.edx.org/course/using-python-research-harvardx-ph526x", "match": "simple"}, {"type": "url", "value": "https://www.edx.org/course/querying-transact-sql-microsoft-dat201x-6", "match": "simple"}, {"type": "url", "value": "https://www.edx.org/course/data-analysis-take-it-max-delftx-ex101x-1", "match": "simple"}, {"type": "url", "value": "https://www.edx.org/course/introduction-data-analytics-managers-michiganx-ds120x", "match": "simple"}, {"type": "url", "value": "https://www.edx.org/course/introduction-computer-science-mitx-6-00-1x-10", "match": "simple"}]], "name": "Course Recommendations", "apiName": "1743970571_course_recommendations", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "8402854151"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "//courses.edx.org\\/courses\\/(.*)\\/(.*)", "match": "regex"}], ["not", ["or", {"type": "url", "value": "course-v1:MichiganX+teachout.1x+1T2017", "match": "substring"}, {"type": "url", "value": "course-v1:MichiganX+teachout.2x+1T2017", "match": "substring"}, {"type": "url", "value": "course-v1:MichiganX+teachout.3x+1T2017", "match": "substring"}, {"type": "url", "value": "course-v1:MichiganX+teachout.4x+1T2017", "match": "substring"}]]], "activationType": "polling", "name": "Courseware", "apiName": "1706490390_courseware_homeinfo", "tags": [], "undoOnDeactivation": false, "activationCode": function pollingFn() {
  return document.head !== null;
}, "deactivationEnabled": false, "id": "8415635799"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "edx.org/course_modes/choose/*", "match": "regex"}]], "name": "Track Selection Page - Coupon Test", "apiName": "1743970571_track_selection_page__coupon_test", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "8419664830"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "https://www.edx.org/micromasters/data-science", "match": "simple"}, {"type": "url", "value": "https://www.edx.org/micromasters/michiganx-user-experience-ux-research-and-design", "match": "simple"}, {"type": "url", "value": "https://www.edx.org/micromasters/big-data", "match": "simple"}, {"type": "url", "value": "https://www.edx.org/micromasters/pennx-robotics", "match": "simple"}]], "name": "Micromaster Pages", "apiName": "1743970571_micromaster_pages", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "8424194183"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "https://courses.edx.org/course_modes/choose/course-v1:MITx+6.00.1x+2T2017/", "match": "simple"}, {"type": "url", "value": "https://courses.edx.org/course_modes/choose/course-v1:HarvardX+CS50+X/", "match": "simple"}, {"type": "url", "value": "https://courses.edx.org/course_modes/choose/course-v1:W3Cx+HTML5.0x+1T2017/", "match": "simple"}, {"type": "url", "value": "https://courses.edx.org/course_modes/choose/course-v1:MITx+Launch.x+2T2017/", "match": "simple"}, {"type": "url", "value": "https://courses.edx.org/course_modes/choose/course-v1:UCSanDiegoX+DSE200x+2T2017/", "match": "simple"}, {"type": "url", "value": "https://courses.edx.org/course_modes/choose/course-v1:MITx+15.071x+2T2017/", "match": "simple"}, {"type": "url", "value": "https://courses.edx.org/course_modes/choose/course-v1:HarvardX+ER22.1x+2T2017/", "match": "simple"}, {"type": "url", "value": "https://courses.edx.org/course_modes/choose/course-v1:BerkeleyX+ColWri2.2x+1T2017/", "match": "simple"}, {"type": "url", "value": "https://courses.edx.org/course_modes/choose/course-v1:UTAustinX+UT.7.11x+2T2017/", "match": "simple"}, {"type": "url", "value": "https://courses.edx.org/course_modes/choose/course-v1:HKUSTx+COMP102.1x+2T2017/", "match": "simple"}]], "name": "Track Selection to Course Home Pages", "apiName": "1743970571_track_selection_to_course_home_pages", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "8428000742"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "//courses.edx.org\\/courses\\/(.*)\\/(?:course)\\/?", "match": "regex"}], ["not", ["or", {"type": "url", "value": "courses/course-v1:HarvardX+", "match": "substring"}, {"type": "url", "value": "courses/course-v1:Harvard+", "match": "substring"}, {"type": "url", "value": "courses/course-v1:HarvardKennedySchool+", "match": "substring"}, {"type": "url", "value": "courses/course-v1:HarvardXPLUS+", "match": "substring"}, {"type": "url", "value": "courses/course-v1:HSPH+", "match": "substring"}, {"type": "url", "value": "courses/course-v1:VJx+", "match": "substring"}, {"type": "url", "value": "courses/HarvardX/", "match": "substring"}, {"type": "url", "value": "courses/Harvard/", "match": "substring"}, {"type": "url", "value": "courses/HarvardKennedySchool/", "match": "substring"}, {"type": "url", "value": "courses/HarvardXPLUS/", "match": "substring"}, {"type": "url", "value": "courses/HSPH/", "match": "substring"}, {"type": "url", "value": "courses/VJx/", "match": "substring"}, {"type": "url", "value": "courses/course-v1:MITx+", "match": "substring"}, {"type": "url", "value": "courses/course-v1:MITProfessionalX+", "match": "substring"}, {"type": "url", "value": "courses/MITx/", "match": "substring"}, {"type": "url", "value": "courses/MITProfessionalX/", "match": "substring"}, {"type": "url", "value": "courses/course-v1:DelftX+GEO101x+2T2017/", "match": "substring"}]]], "activationType": "polling", "name": "Courseware Outline", "apiName": "1706490390_courseware_homeinfo_1", "tags": [], "undoOnDeactivation": false, "activationCode": function pollingFn() {
  return document.head !== null;
}, "deactivationEnabled": false, "id": "8436781475"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "edx.org/course/[\\w+].*", "match": "regex"}], ["not", ["or", {"type": "url", "value": "https://www.edx.org/course/legal-risk-management-strategies-bux-compliancex", "match": "simple"}, {"type": "url", "value": "https://www.edx.org/course/yield-curve-analysis-new-york-institute-finance-yca2015-1x", "match": "simple"}, {"type": "url", "value": "https://www.edx.org/course/problem-solving-critical-thinking-skills-fullbridgex-career3x", "match": "simple"}, {"type": "url", "value": "https://www.edx.org/course/business-data-analysis-skills-fullbridgex-career4x", "match": "simple"}, {"type": "url", "value": "https://www.edx.org/course/electronic-trading-financial-markets-new-york-institute-finance-etfm2016x", "match": "simple"}, {"type": "url", "value": "https://www.edx.org/course/ma-professional-certificate-examination-new-york-institute-finance-ma1-6x", "match": "simple"}, {"type": "url", "value": "https://www.edx.org/course/self-assessment-developing-strengths-fullbridgex-career1x", "match": "simple"}, {"type": "url", "value": "https://www.edx.org/course/communication-skills-teamwork-fullbridgex-career2x", "match": "simple"}, {"type": "url", "value": "https://www.edx.org/course/ma-structuring-deal-new-york-institute-finance-ma1-3x", "match": "simple"}, {"type": "url", "value": "https://www.edx.org/course/ma-free-cash-flow-fcf-modeling-new-york-institute-finance-ma1-4x", "match": "simple"}, {"type": "url", "value": "https://www.edx.org/course/accounting-principles-ma-new-york-institute-finance-ma1-5x", "match": "simple"}, {"type": "url", "value": "https://www.edx.org/course/risk-management-professional-certificate-new-york-institute-finance-rmpc1-6x-0", "match": "simple"}, {"type": "url", "value": "https://www.edx.org/course/ma-concepts-theories-new-york-institute-finance-ma1-1x", "match": "simple"}, {"type": "url", "value": "https://www.edx.org/course/risk-management-tools-practices-new-york-institute-finance-rmpc1-3x-0", "match": "simple"}, {"type": "url", "value": "https://www.edx.org/course/ma-concepts-theories-advanced-topics-new-york-institute-finance-ma1-2x", "match": "simple"}, {"type": "url", "value": "https://www.edx.org/course/risk-management-tools-practices-new-york-institute-finance-rmpc1-3x-0", "match": "simple"}, {"type": "url", "value": "https://www.edx.org/course/stress-testing-risk-regulation-part-1-new-york-institute-finance-rmpc1-4x-0", "match": "simple"}, {"type": "url", "value": "https://www.edx.org/course/stress-testing-risk-regulation-part-2-new-york-institute-finance-rmpc1-5x-0", "match": "simple"}, {"type": "url", "value": "https://www.edx.org/course/project-finance-public-private-new-york-institute-finance-pfppp1-pc7x", "match": "simple"}, {"type": "url", "value": "https://www.edx.org/course/introduction-risk-management-new-york-institute-finance-rmpc1-1x-0", "match": "simple"}, {"type": "url", "value": "https://www.edx.org/course/measuring-risk-equity-fixed-income-new-york-institute-finance-rmpc1-2x-0", "match": "simple"}, {"type": "url", "value": "https://www.edx.org/course/deals-project-finance-case-studies-new-york-institute-finance-pfppp1-pc4x", "match": "simple"}, {"type": "url", "value": "https://www.edx.org/course/documentation-project-finance-new-york-institute-finance-pfppp1-pc5x", "match": "simple"}, {"type": "url", "value": "https://www.edx.org/course/risks-project-finance-case-studies-new-york-institute-finance-pfppp1-pc6x", "match": "simple"}, {"type": "url", "value": "https://www.edx.org/course/project-finance-public-private-new-york-institute-finance-pfppp1-pc1x", "match": "simple"}, {"type": "url", "value": "https://www.edx.org/course/deal-structures-project-finance-new-york-institute-finance-pfppp1-pc2x", "match": "simple"}, {"type": "url", "value": "https://www.edx.org/course/project-finance-process-new-york-institute-finance-pfppp1-pc3x", "match": "simple"}, {"type": "url", "value": "https://www.edx.org/course/project-finance-process-new-york-institute-finance-pfppp1-pc3x", "match": "simple"}, {"type": "url", "value": "https://www.edx.org/course/fundamentals-digital-marketing-social-wharton-digitalmarketing1-1x", "match": "simple"}, {"type": "url", "value": "https://www.edx.org/course/selling-ideas-how-influence-others-get-wharton-sellingideas101x-2", "match": "simple"}, {"type": "url", "value": "https://www.edx.org/course/business-strategy-wharton-competitive-wharton-strategyx-2", "match": "simple"}, {"type": "url", "value": "https://www.edx.org/course/customer-protection-rule-15c3-3-new-york-institute-finance-cprx", "match": "simple"}, {"type": "url", "value": "https://www.edx.org/course/marketing-analytics-data-tools-wharton-marketinganalytics101x-2", "match": "simple"}, {"type": "url", "value": "https://www.edx.org/course/managing-value-customer-relationships-wharton-customervaluex-1", "match": "simple"}, {"type": "url", "value": "https://www.edx.org/course/microsoft-sharepoint-2016-authentication-microsoft-cld211-2x-1", "match": "simple"}, {"type": "url", "value": "https://www.edx.org/course/microsoft-sharepoint-2016-productivity-microsoft-cld211-4x-1", "match": "simple"}, {"type": "url", "value": "https://www.edx.org/course/microsoft-sharepoint-2016-search-content-microsoft-cld211-5x-1", "match": "simple"}, {"type": "url", "value": "https://www.edx.org/course/mortgage-backed-securities-mbs-new-york-institute-finance-mbs1-pcexamx", "match": "simple"}, {"type": "url", "value": "https://www.edx.org/course/mortgage-backed-securities-mbs-part-ii-new-york-institute-finance-mbs2-pc2x", "match": "simple"}, {"type": "url", "value": "https://www.edx.org/course/mortgage-backed-securities", "match": "regex"}, {"type": "url", "value": "webview.edx.org", "match": "regex"}, {"type": "url", "value": "edx.org/course/subject", "match": "regex"}]]], "name": "Course Details Not Professional or Webview", "apiName": "1743970571_course_details_not_professional_or_webview", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "8448761539"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "edx.org/course_modes/choose/*", "match": "regex"}, {"type": "url", "value": "edx.org/course/[\\w+].*", "match": "regex"}], ["not", ["or", {"type": "url", "value": "edx.org/course/subject", "match": "regex"}]]], "name": "Track Selection or Course Details", "apiName": "1743970571_track_selection_or_course_details", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "8459430762"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "/course_modes/choose/", "match": "substring"}]], "name": "Track Selection Page (4)", "apiName": "track_selection_page_6", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "8459810415"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "edx.org/course/[\\w+]", "match": "regex"}], ["not", ["or", {"type": "url", "value": "edx.org/course/subject", "match": "regex"}]]], "name": "All Course Details Pages", "apiName": "1706490390_all_course_details_pages", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "8462065569"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "edx.org/register", "match": "regex"}]], "name": "Registration Page", "apiName": "1743970571_registration_page", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "8485256782"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "//courses.edx.org\\/courses\\/(.*)\\/(?:course)\\/", "match": "regex"}], ["not", ["or", {"type": "url", "value": "courses.edx.org/courses/course-v1(:|%3A)IIMBx(\\+|%2B)AC103x(\\+|%2B)2T2017/course", "match": "regex"}, {"type": "url", "value": "courses.edx.org/courses/course-v1(:|%3A)AdelaideX(\\+|%2B)Project101x(\\+|%2B)1T2017/course", "match": "regex"}, {"type": "url", "value": "courses.edx.org/courses/course-v1(:|%3A)DelftX(\\+|%2B)LfE101x(\\+|%2B)2T2017/course", "match": "regex"}, {"type": "url", "value": "courses.edx.org/courses/course-v1(:|%3A)ColumbiaX(\\+|%2B)DS101X(\\+|%2B)1T2017/course", "match": "regex"}, {"type": "url", "value": "courses.edx.org/courses/course-v1(:|%3A)PennX(\\+|%2B)SD1x(\\+|%2B)2T2017/course", "match": "regex"}, {"type": "url", "value": "courses.edx.org/courses/course-v1(:|%3A)PennX(\\+|%2B)SD2x(\\+|%2B)2T2017/course", "match": "regex"}, {"type": "url", "value": "courses.edx.org/courses/course-v1(:|%3A)HarvardX(\\+|%2B)PH525.1x(\\+|%2B)2T2017/course", "match": "regex"}, {"type": "url", "value": "courses.edx.org/courses/course-v1(:|%3A)MichiganX(\\+|%2B)UX501x(\\+|%2B)3T2016/course", "match": "regex"}, {"type": "url", "value": "courses.edx.org/courses/course-v1(:|%3A)UBCx(\\+|%2B)Marketing1x(\\+|%2B)3T2015/course", "match": "regex"}, {"type": "url", "value": "courses.edx.org/courses/course-v1(:|%3A)DelftX(\\+|%2B)CTB3365DWx(\\+|%2B)2T2017/course", "match": "regex"}]]], "name": "RET: Course Outline Page (Verification Deadlines)", "apiName": "1743970571_ret_course_outline_page_verification_deadlines", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "8501915674"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "/course_modes/choose/.*", "match": "regex"}]], "name": "Track Selection Page (5)", "apiName": "track_selection_page_1_2", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "8502760554"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "//courses.edx.org\\/courses\\/(.*)\\/(?:info)\\/?", "match": "regex"}], ["not", ["or", {"type": "url", "value": "courses.edx.org/courses/course-v1(:|%3A)IIMBx(\\+|%2B)AC103x(\\+|%2B)2T2017/info", "match": "regex"}, {"type": "url", "value": "courses.edx.org/courses/course-v1(:|%3A)AdelaideX(\\+|%2B)Project101x(\\+|%2B)1T2017/info", "match": "regex"}, {"type": "url", "value": "courses.edx.org/courses/course-v1(:|%3A)DelftX(\\+|%2B)LfE101x(\\+|%2B)2T2017/info", "match": "regex"}, {"type": "url", "value": "courses.edx.org/courses/course-v1(:|%3A)ColumbiaX(\\+|%2B)DS101X(\\+|%2B)1T2017/info", "match": "regex"}, {"type": "url", "value": "courses.edx.org/courses/course-v1(:|%3A)PennX(\\+|%2B)SD2x(\\+|%2B)2T2017/info", "match": "regex"}, {"type": "url", "value": "courses.edx.org/courses/course-v1(:|%3A)PennX(\\+|%2B)SD1x(\\+|%2B)2T2017/info", "match": "regex"}, {"type": "url", "value": "courses.edx.org/courses/course-v1(:|%3A)HarvardX(\\+|%2B)PH525.1x(\\+|%2B)2T2017/info", "match": "regex"}, {"type": "url", "value": "courses.edx.org/courses/course-v1(:|%3A)MichiganX(\\+|%2B)UX501x(\\+|%2B)3T2016/info", "match": "regex"}, {"type": "url", "value": "courses.edx.org/courses/course-v1(:|%3A)UBCx(\\+|%2B)Marketing1x(\\+|%2B)3T2015/info", "match": "regex"}, {"type": "url", "value": "courses.edx.org/courses/course-v1(:|%3A)DelftX(\\+|%2B)CTB3365DWx(\\+|%2B)2T2017/info", "match": "regex"}]]], "name": "RET: Course Info Page (Verification Deadlines)", "apiName": "1743970571_ret_course_info_page_verification_deadlines", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "8503525961"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "courses.edx.org/courses/course-v1(:|%3A)IIMBx(\\+|%2B)AC103x(\\+|%2B)2T2017/info", "match": "regex"}, {"type": "url", "value": "courses.edx.org/courses/course-v1(:|%3A)AdelaideX(\\+|%2B)Project101x(\\+|%2B)1T2017/info", "match": "regex"}, {"type": "url", "value": "courses.edx.org/courses/course-v1(:|%3A)DelftX(\\+|%2B)LfE101x(\\+|%2B)2T2017/info", "match": "regex"}, {"type": "url", "value": "courses.edx.org/courses/course-v1(:|%3A)ColumbiaX(\\+|%2B)DS101X(\\+|%2B)1T2017/info", "match": "regex"}, {"type": "url", "value": "courses.edx.org/courses/course-v1(:|%3A)PennX(\\+|%2B)SD2x(\\+|%2B)2T2017/info", "match": "regex"}, {"type": "url", "value": "courses.edx.org/courses/course-v1(:|%3A)PennX(\\+|%2B)SD1x(\\+|%2B)2T2017/info", "match": "regex"}, {"type": "url", "value": "courses.edx.org/courses/course-v1(:|%3A)HarvardX(\\+|%2B)PH525.1x(\\+|%2B)2T2017/info", "match": "regex"}, {"type": "url", "value": "courses.edx.org/courses/course-v1(:|%3A)MichiganX(\\+|%2B)UX501x(\\+|%2B)3T2016/info", "match": "regex"}, {"type": "url", "value": "courses.edx.org/courses/course-v1(:|%3A)UBCx(\\+|%2B)Marketing1x(\\+|%2B)3T2015/info", "match": "regex"}]], "name": "RET: Course Info Page (Pacing Deadlines)", "apiName": "1706490390_course_info_page", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "8504600442"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "https://www.edx.org/explore", "match": "simple"}]], "name": "Explore", "apiName": "1743970571_explore", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "8505380606"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "stage.*edx.org", "match": "regex"}]], "name": "All Stage Pages", "apiName": "1706490390_all_stage_pages", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "8506410625"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "https://www.edx.org*", "match": "regex"}]], "name": "All marketing site pages", "apiName": "1743970571_all_marketing_site_pages", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "8507530878"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "courses.edx.org/courses/course-v1(:|%3A)IIMBx(\\+|%2B)AC103x(\\+|%2B)2T2017/course/", "match": "regex"}, {"type": "url", "value": "courses.edx.org/courses/course-v1(:|%3A)AdelaideX(\\+|%2B)Project101x(\\+|%2B)1T2017/course/", "match": "regex"}, {"type": "url", "value": "courses.edx.org/courses/course-v1(:|%3A)DelftX(\\+|%2B)LfE101x(\\+|%2B)2T2017/course/", "match": "regex"}, {"type": "url", "value": "courses.edx.org/courses/course-v1(:|%3A)ColumbiaX(\\+|%2B)DS101X(\\+|%2B)1T2017/course/", "match": "regex"}, {"type": "url", "value": "courses.edx.org/courses/course-v1(:|%3A)PennX(\\+|%2B)SD1x(\\+|%2B)2T2017/course/", "match": "regex"}, {"type": "url", "value": "courses.edx.org/courses/course-v1(:|%3A)PennX(\\+|%2B)SD2x(\\+|%2B)2T2017/course/", "match": "regex"}, {"type": "url", "value": "courses.edx.org/courses/course-v1(:|%3A)HarvardX(\\+|%2B)PH525.1x(\\+|%2B)2T2017/course/", "match": "regex"}, {"type": "url", "value": "courses.edx.org/courses/course-v1(:|%3A)MichiganX(\\+|%2B)UX501x(\\+|%2B)3T2016/course/", "match": "regex"}, {"type": "url", "value": "courses.edx.org/courses/course-v1(:|%3A)UBCx(\\+|%2B)Marketing1x(\\+|%2B)3T2015/course/", "match": "regex"}]], "name": "RET: Course Outline Page (Pacing Deadlines)", "apiName": "1706490390_course_outline", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "8510530673"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "courses.edx.org/verify_student/upgrade/", "match": "regex"}, {"type": "url", "value": "ecommerce.edx.org/basket/", "match": "regex"}]], "name": "Verified Upgrade Email Pages", "apiName": "1743970571_verified_upgrade_email_pages", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "8520320786"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "https://courses.edx.org/courses/course-v1:MITx+Launch.x+2T2017/course/reviews", "match": "exact"}, {"type": "url", "value": "https://courses.edx.org/courses/course-v1:UQx+IELTSx+2T2017/course/reviews", "match": "exact"}, {"type": "url", "value": "https://courses.edx.org/courses/course-v1:DelftX+TPM1x+1T2017/course/reviews", "match": "exact"}, {"type": "url", "value": "https://courses.edx.org/courses/course-v1:HarvardX+CS50+X/course/reviews", "match": "exact"}, {"type": "url", "value": "https://courses.edx.org/courses/course-v1:UPValenciaX+BSP101x+1T2017/course/reviews", "match": "exact"}, {"type": "url", "value": "https://courses.edx.org/courses/course-v1:W3Cx+HTML5.0x+1T2017/course/reviews", "match": "exact"}]], "name": "In Course Reviews v1 Test", "apiName": "1743970571_in_course_reviews_v1_test", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "8540021030"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "https://courses.edx.org/courses/course-v1:MITx+Launch.x+2T2017/course", "match": "exact"}, {"type": "url", "value": "https://courses.edx.org/courses/course-v1:UQx+IELTSx+2T2017/course", "match": "exact"}, {"type": "url", "value": "https://courses.edx.org/courses/course-v1:DelftX+TPM1x+1T2017/course", "match": "exact"}, {"type": "url", "value": "https://courses.edx.org/courses/course-v1:HarvardX+CS50+X/course", "match": "exact"}, {"type": "url", "value": "https://courses.edx.org/courses/course-v1:UPValenciaX+BSP101x+1T2017/course", "match": "exact"}, {"type": "url", "value": "https://courses.edx.org/courses/course-v1:W3Cx+HTML5.0x+1T2017/course", "match": "exact"}, {"type": "url", "value": "https://courses.edx.org/courses/course-v1:ETSx+TOEFLx+3T2017/course", "match": "exact"}, {"type": "url", "value": "https://courses.edx.org/courses/course-v1:HarvardX+SPU27x+2T2017/course", "match": "exact"}, {"type": "url", "value": "https://courses.edx.org/courses/course-v1:Microsoft+DEV236x+1T2017/course", "match": "exact"}, {"type": "url", "value": "https://courses.edx.org/courses/course-v1:Microsoft+DAT208x+3T2017/course", "match": "exact"}, {"type": "url", "value": "https://courses.edx.org/courses/course-v1:Microsoft+DAT101x+3T2017/course", "match": "exact"}, {"type": "url", "value": "https://courses.edx.org/courses/course-v1:Microsoft+DAT207x+3T2017/course", "match": "exact"}, {"type": "url", "value": "https://courses.edx.org/courses/course-v1:edX+DemoX.1+2T2017/course", "match": "exact"}, {"type": "url", "value": "https://courses.edx.org/courses/course-v1:UCSanDiegoX+DSE200x+2T2017/course", "match": "exact"}, {"type": "url", "value": "https://courses.edx.org/courses/course-v1:ASUx+ENG101x+2177A/course", "match": "exact"}, {"type": "url", "value": "https://courses.edx.org/courses/course-v1:Microsoft+DAT203.1x+3T2017/course", "match": "exact"}, {"type": "url", "value": "https://courses.edx.org/courses/course-v1:LinuxFoundationX+LFS101x+1T2017/course", "match": "exact"}, {"type": "url", "value": "https://courses.edx.org/courses/course-v1:HarvardX+SW47x+2T2017/course", "match": "exact"}, {"type": "url", "value": "https://courses.edx.org/courses/course-v1:CatalystX+ILX2+2T2017/course", "match": "exact"}, {"type": "url", "value": "https://courses.edx.org/courses/course-v1:MITx+14.01x+2T2017/course", "match": "exact"}, {"type": "url", "value": "https://courses.edx.org/courses/course-v1:Microsoft+DAT204x+3T2017/course", "match": "exact"}, {"type": "url", "value": "https://courses.edx.org/courses/course-v1:HarvardX+GSD1x+1T2017/course", "match": "exact"}, {"type": "url", "value": "https://courses.edx.org/courses/course-v1:Microsoft+DAT201x+3T2017/course", "match": "exact"}, {"type": "url", "value": "https://courses.edx.org/courses/course-v1:Catalystx+IL5x+2T2017/course", "match": "exact"}, {"type": "url", "value": "https://courses.edx.org/courses/course-v1:Microsoft+DEV210x+3T2017/course", "match": "exact"}, {"type": "url", "value": "https://courses.edx.org/courses/course-v1:UPValenciaX+XLS201x+3T2016/course", "match": "exact"}, {"type": "url", "value": "https://courses.edx.org/courses/course-v1:HarvardX+GSE2x+2T2017/course", "match": "exact"}, {"type": "url", "value": "https://courses.edx.org/courses/course-v1:HKUSTx+COMP102.1x+3T2017/course", "match": "exact"}, {"type": "url", "value": "https://courses.edx.org/courses/course-v1:PennX+ROBO1x+1T2017/course", "match": "exact"}, {"type": "url", "value": "https://courses.edx.org/courses/course-v1:Microsoft+DEV274x+2T2017/course", "match": "exact"}, {"type": "url", "value": "https://courses.edx.org/courses/course-v1:UPValenciaX+xls101x+2T2017/course", "match": "exact"}, {"type": "url", "value": "https://courses.edx.org/courses/course-v1:UBCx+Marketing1x+3T2015/course", "match": "exact"}, {"type": "url", "value": "https://courses.edx.org/courses/course-v1:Microsoft+DEV211.1x+2T2017/course", "match": "exact"}]], "name": "[LEARNER-1539,2348] Course Home (Reviews Test)", "apiName": "1743970571_learner1539_course_home_reviews_test", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "8546340646"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "/course/reviews", "match": "regex"}]], "name": "In Course Reviews Page", "apiName": "1743970571_in_course_reviews_page", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "8547200759"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "//courses.edx.org\\/courses\\/(.*)\\/(?:course)\\/", "match": "regex"}]], "name": "All Course Home Pages (courses.edx.org/course-id/course)", "apiName": "1743970571_all_course_home_pages_coursesedxorgcourseidcourse", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "8550242114"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "courses.edx.org/dashboard", "match": "regex"}]], "name": "Dashboard", "apiName": "1743970571_dashboard", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "8562284423"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "courses.edx.org\\/courses\\/(.*)\\/courseware\\/(.*)", "match": "regex"}]], "name": "Entered Course", "apiName": "1743970571_entered_course", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "8570646963"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "edx.org/account/settings", "match": "regex"}]], "name": "Account Settings", "apiName": "1743970571_account_settings", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "8605893189"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "https://www.edx.org", "match": "simple"}]], "name": "Homepage", "apiName": "1743970571_homepage", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "8636165544"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "edx.org/basket/", "match": "regex"}]], "name": "Checkout Page", "apiName": "1743970571_checkout_page", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "8693450564"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "https://courses.edx.org/.*discussion/forum.*", "match": "regex"}]], "name": "All Discussion Forum Threads", "apiName": "1743970571_forums", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "8778063834"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "https:\\/\\/courses\\.edx\\.org\\/courses\\/(course-v1:UTAustinX\\+UT\\.5\\.05x\\+1T2018)\\/courseware*", "match": "regex"}]], "activationType": "polling", "name": "Inline Discussions ABC Test Courses", "apiName": "1743970571_studiox_inline_discussion", "tags": [], "undoOnDeactivation": false, "activationCode": function pollingFn() {
    return document.querySelectorAll(".xblock-student_view-vertical").length > 0;
  }, "deactivationEnabled": false, "id": "8784327061"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "https://courses.edx.org/course_modes/choose/course-v1:UWashingtonX+CYB001x+1T2017/", "match": "exact"}]], "name": "Physical Certs: Course Home", "apiName": "1743970571_physical_certs_course_home", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "8784388274"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "/course_modes/choose/.*", "match": "regex"}]], "name": "Track Selection Page", "apiName": "1743970571_track_selection_page", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "8787863389"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "//courses.edx.org\\/courses\\/(.*)\\/(?:course)\\/", "match": "regex"}]], "name": "New Course Outline", "apiName": "1743970571_new_course_outline", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "8854490003"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "edx.org/checkout/receipt/", "match": "regex"}]], "name": "Receipt Page", "apiName": "1743970571_receipt_page", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "8894110449"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "http://localhost:8080/course/[\\w+]", "match": "simple"}]], "name": "Local Course Details Pages", "apiName": "1743970571_local_course_details_pages", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "9107663548"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "stage.edx.org/course/[\\w+]", "match": "regex"}]], "name": "Stage Course Details", "apiName": "1743970571_stage_course_details", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "9185721480"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "www.edx.org/donate", "match": "regex"}]], "name": "Donation Page", "apiName": "1743970571_donation_page", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "9259832742"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "www.edx.org", "match": "regex"}], ["not", ["or", {"type": "url", "value": "www.edx.org/donate", "match": "simple"}, {"type": "url", "value": "www.edx.org/user", "match": "simple"}, {"type": "url", "value": "www.edx.org/admin", "match": "simple"}]]], "name": "All Pages except Donate", "apiName": "1743970571_all_pages_except_donate", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "9261612342"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "www.edx.org", "match": "substring"}], ["not", ["or", {"type": "url", "value": "www.edx.org", "match": "simple"}, {"type": "url", "value": "www.edx.org/course", "match": "simple"}]]], "name": "All Marketing with Search in Header", "apiName": "1743970571_all_marketing_with_search_in_header", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "9263799386"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "https:\\/\\/courses\\.edx\\.org\\/courses\\/(course-v1:HarvardX\\+PH231x\\+3T2017|course-v1:ColumbiaX\\+BAMM.104x\\+3T2017|course-v1:UAMx\\+PEnActx\\+1T2017|course-v1:DelftX\\+TP101x\\+3T_2017|course-v1:HarvardX\\+AmPoX.1\\+3T2017|course-v1:RITx\\+SKILLS101x\\+3T2017|course-v1:DelftX\\+Spatial101x\\+3T2017|course-v1:IsraelX\\+KAB1010x\\+3T2017|course-v1:IsraelX\\+Virus101x\\+3T2017|course-v1:UQx\\+TOURISMx\\+3T2017|course-v1:WageningenX\\+AB101x\\+3T2017a|course-v1:HarvardX\\+PH125.1x\\+3T2017)\\/courseware*", "match": "regex"}]], "activationType": "polling", "name": "Inline Discussions Auto-open ONLY test courses", "apiName": "1743970571_inline_discussions_autoopen_only_test_courses", "tags": [], "undoOnDeactivation": false, "activationCode": function pollingFn() {
    return document.querySelectorAll(".xblock-student_view-vertical").length > 0;
  }, "deactivationEnabled": false, "id": "9628131266"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "https://www.edx.org/professional-certificate/microsoft-introduction-to-code-objects-and-algorithms", "match": "exact"}, {"type": "url", "value": "https://www.edx.org/professional-certificate/microsoft-introduction-to-code-solutions", "match": "exact"}, {"type": "url", "value": "https://www.edx.org/professional-certificate/microsoft-introduction-to-computer-science", "match": "exact"}]], "name": "Microsoft Program Bundle messaging", "apiName": "1743970571_microsoft_program_bundle_messaging", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "9856086750"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "https://courses.edx.org/dashboard", "match": "simple"}]], "activationType": "polling", "name": "[LEARNER-3377] Dashboard Page", "apiName": "1743970571_learner3377_dashboard_page", "tags": [], "undoOnDeactivation": false, "activationCode": function pollingFn() {
  substrings = [
    'course-v1:adam+adam+adam',
    'course-v1:BerkeleyX+ColWri2.1x+3T2017_2',
    'course-v1:HarvardX+PH125.1x+3T2017',
    'course-v1:Microsoft+DAT205x+1T2018',
    'course-v1:Microsoft+DAT206x+1T2018',
    'course-v1:Microsoft+DAT207x+1T2018',
    'course-v1:Microsoft+DAT208x+1T2018',
    'course-v1:Microsoft+DEV283x+2T2017',
    'course-v1:UQx+TOURISMx+3T2017',
    'course-v1:UTHealthSPHx+IMAGINE99x+3T2017',
    'course-v1:AdelaideX+Project101x+1T2017',
    'course-v1:Catalystx+IL5x+1T2018',
    'course-v1:ETSx+TOEFLx+1T2018',
    'course-v1:LinuxFoundationX+LFS101x+1T2017',
    'course-v1:LinuxFoundationX+LFS171x+3T2017',
    'course-v1:UBCx+COMM220x+3T2017',
    'course-v1:UQx+IELTSx+1T2018',
    'course-v1:NYIF+CM1.x+3T2017',
    'course-v1:CurtinX+IOT1x+1T2018',
    'course-v1:HarvardX+PH526x+1T2018',
    'course-v1:Harvardx+HLS2X+1T2018',
    'course-v1:Microsoft+CLD251x+1T2018',
    'course-v1:Microsoft+DAT204x+1T2018',
    'course-v1:Microsoft+DAT222x+1T2018',
    'course-v1:Microsoft+DAT256x+1T2018',
    'course-v1:NewcastleX+SWL101x+1T2018',
    'course-v1:RITx+SKILLS101x+1T2018',
    'course-v1:UPValenciaX+BSP101x+1T2017',
    'course-v1:UTArlingtonX+CSE1309x+1T2018'
  ];
  activate = false;
  $('.course-item').each(function(i, e){
    var str = $(e).find('.enter-course').data('course-key');
    if (substrings.indexOf(str) > -1) {
      activate = true;
    }
  });
  return activate;
}, "deactivationEnabled": false, "id": "9857878336"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "courses.edx.org/course_modes/choose/", "match": "substring"}]], "activationType": "callback", "name": "[LEARNER-3377] Track Selection Page", "apiName": "1743970571_learner3377_track_selection_page", "tags": [], "undoOnDeactivation": false, "activationCode": function callbackFn(activate, options) {
  var courseKeys = [
    'course-v1:adam+adam+adam',
    'course-v1:BerkeleyX+ColWri2.1x+3T2017_2',
    'course-v1:HarvardX+PH125.1x+3T2017',
    'course-v1:Microsoft+DAT205x+1T2018',
    'course-v1:Microsoft+DAT206x+1T2018',
    'course-v1:Microsoft+DAT207x+1T2018',
    'course-v1:Microsoft+DAT208x+1T2018',
    'course-v1:Microsoft+DEV283x+2T2017',
    'course-v1:UQx+TOURISMx+3T2017',
    'course-v1:UTHealthSPHx+IMAGINE99x+3T2017',
    'course-v1:AdelaideX+Project101x+1T2017',
    'course-v1:Catalystx+IL5x+1T2018',
    'course-v1:ETSx+TOEFLx+1T2018',
    'course-v1:LinuxFoundationX+LFS101x+1T2017',
    'course-v1:LinuxFoundationX+LFS171x+3T2017',
    'course-v1:UBCx+COMM220x+3T2017',
    'course-v1:UQx+IELTSx+1T2018',
    'course-v1:NYIF+CM1.x+3T2017',
    'course-v1:CurtinX+IOT1x+1T2018',
    'course-v1:HarvardX+PH526x+1T2018',
    'course-v1:Harvardx+HLS2X+1T2018',
    'course-v1:Microsoft+CLD251x+1T2018',
    'course-v1:Microsoft+DAT204x+1T2018',
    'course-v1:Microsoft+DAT222x+1T2018',
    'course-v1:Microsoft+DAT256x+1T2018',
    'course-v1:NewcastleX+SWL101x+1T2018',
    'course-v1:RITx+SKILLS101x+1T2018',
    'course-v1:UPValenciaX+BSP101x+1T2017',
    'course-v1:UTArlingtonX+CSE1309x+1T2018'
  ];
  for (var index in courseKeys) {
    if (decodeURIComponent(window.location.href).indexOf(courseKeys[index]) > 0) {
      activate();
      return;
    }
  }
}, "deactivationEnabled": false, "id": "9862639519"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "//courses.edx.org/courses/(.*)/course/(.*)", "match": "regex"}]], "activationType": "callback", "name": "[LEARNER-3377] Course Home Page", "apiName": "1743970571_learner3377_course_home_page", "tags": [], "undoOnDeactivation": false, "activationCode": function callbackFn(activate, options) {
  var courseKeys = [
    'course-v1:adam+adam+adam',
    'course-v1:BerkeleyX+ColWri2.1x+3T2017_2',
    'course-v1:HarvardX+PH125.1x+3T2017',
    'course-v1:Microsoft+DAT205x+1T2018',
    'course-v1:Microsoft+DAT206x+1T2018',
    'course-v1:Microsoft+DAT207x+1T2018',
    'course-v1:Microsoft+DAT208x+1T2018',
    'course-v1:Microsoft+DEV283x+2T2017',
    'course-v1:UQx+TOURISMx+3T2017',
    'course-v1:UTHealthSPHx+IMAGINE99x+3T2017',
    'course-v1:AdelaideX+Project101x+1T2017',
    'course-v1:Catalystx+IL5x+1T2018',
    'course-v1:ETSx+TOEFLx+1T2018',
    'course-v1:LinuxFoundationX+LFS101x+1T2017',
    'course-v1:LinuxFoundationX+LFS171x+3T2017',
    'course-v1:UBCx+COMM220x+3T2017',
    'course-v1:UQx+IELTSx+1T2018',
    'course-v1:NYIF+CM1.x+3T2017',
    'course-v1:CurtinX+IOT1x+1T2018',
    'course-v1:HarvardX+PH526x+1T2018',
    'course-v1:Harvardx+HLS2X+1T2018',
    'course-v1:Microsoft+CLD251x+1T2018',
    'course-v1:Microsoft+DAT204x+1T2018',
    'course-v1:Microsoft+DAT222x+1T2018',
    'course-v1:Microsoft+DAT256x+1T2018',
    'course-v1:NewcastleX+SWL101x+1T2018',
    'course-v1:RITx+SKILLS101x+1T2018',
    'course-v1:UPValenciaX+BSP101x+1T2017',
    'course-v1:UTArlingtonX+CSE1309x+1T2018'
  ];
  for (var index in courseKeys) {
    if (decodeURIComponent(window.location.href).indexOf(courseKeys[index]) > 0) {
      activate();
      return;
    }
  }
}, "deactivationEnabled": false, "id": "9974274234"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "//courses.edx.org/courses/(.*)/learner_analytics/(.*)", "match": "regex"}]], "activationType": "callback", "name": "[LEARNER-3377] Learner Analytics Page", "apiName": "1743970571_learner3377_learner_analytics_page", "tags": [], "undoOnDeactivation": false, "activationCode": function callbackFn(activate, options) {
  var courseKeys = [
    'course-v1:adam+adam+adam',
    'course-v1:BerkeleyX+ColWri2.1x+3T2017_2',
    'course-v1:HarvardX+PH125.1x+3T2017',
    'course-v1:Microsoft+DAT205x+1T2018',
    'course-v1:Microsoft+DAT206x+1T2018',
    'course-v1:Microsoft+DAT207x+1T2018',
    'course-v1:Microsoft+DAT208x+1T2018',
    'course-v1:Microsoft+DEV283x+2T2017',
    'course-v1:UQx+TOURISMx+3T2017',
    'course-v1:UTHealthSPHx+IMAGINE99x+3T2017',
    'course-v1:AdelaideX+Project101x+1T2017',
    'course-v1:Catalystx+IL5x+1T2018',
    'course-v1:ETSx+TOEFLx+1T2018',
    'course-v1:LinuxFoundationX+LFS101x+1T2017',
    'course-v1:LinuxFoundationX+LFS171x+3T2017',
    'course-v1:UBCx+COMM220x+3T2017',
    'course-v1:UQx+IELTSx+1T2018',
    'course-v1:NYIF+CM1.x+3T2017',
    'course-v1:CurtinX+IOT1x+1T2018',
    'course-v1:HarvardX+PH526x+1T2018',
    'course-v1:Harvardx+HLS2X+1T2018',
    'course-v1:Microsoft+CLD251x+1T2018',
    'course-v1:Microsoft+DAT204x+1T2018',
    'course-v1:Microsoft+DAT222x+1T2018',
    'course-v1:Microsoft+DAT256x+1T2018',
    'course-v1:NewcastleX+SWL101x+1T2018',
    'course-v1:RITx+SKILLS101x+1T2018',
    'course-v1:UPValenciaX+BSP101x+1T2017',
    'course-v1:UTArlingtonX+CSE1309x+1T2018'
  ];
  for (var index in courseKeys) {
    if (decodeURIComponent(window.location.href).indexOf(courseKeys[index]) > 0) {
      activate();
      return;
    }
  }
}, "deactivationEnabled": false, "id": "9994033171"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "edx.org/basket/", "match": "regex"}]], "activationType": "polling", "name": "Bundle Checkout Page", "apiName": "1743970571_bundle_checkout_page", "tags": [], "undoOnDeactivation": false, "activationCode": function pollingFn() {
    return document.querySelectorAll(".product.row").length > 1;
  }, "deactivationEnabled": false, "id": "10168992614"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "edx.org?bust-that-cache", "match": "simple"}]], "name": "Homepage (cache-busted)", "apiName": "1743970571_homepage_cachebusted", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "10172257026"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "//courses.edx.org\\/courses\\/(.*)\\/(.*)", "match": "regex"}]], "activationType": "callback", "name": "[LEARNER-3377] Courseware", "apiName": "1743970571_learner3377_courseware", "tags": [], "undoOnDeactivation": false, "activationCode": function callbackFn(activate, options) {
  var courseKeys = [
    'course-v1:adam+adam+adam',
    'course-v1:BerkeleyX+ColWri2.1x+3T2017_2',
    'course-v1:HarvardX+PH125.1x+3T2017',
    'course-v1:Microsoft+DAT205x+1T2018',
    'course-v1:Microsoft+DAT206x+1T2018',
    'course-v1:Microsoft+DAT207x+1T2018',
    'course-v1:Microsoft+DAT208x+1T2018',
    'course-v1:Microsoft+DEV283x+2T2017',
    'course-v1:UQx+TOURISMx+3T2017',
    'course-v1:UTHealthSPHx+IMAGINE99x+3T2017',
    'course-v1:AdelaideX+Project101x+1T2017',
    'course-v1:Catalystx+IL5x+1T2018',
    'course-v1:ETSx+TOEFLx+1T2018',
    'course-v1:LinuxFoundationX+LFS101x+1T2017',
    'course-v1:LinuxFoundationX+LFS171x+3T2017',
    'course-v1:UBCx+COMM220x+3T2017',
    'course-v1:UQx+IELTSx+1T2018',
    'course-v1:NYIF+CM1.x+3T2017',
    'course-v1:CurtinX+IOT1x+1T2018',
    'course-v1:HarvardX+PH526x+1T2018',
    'course-v1:Harvardx+HLS2X+1T2018',
    'course-v1:Microsoft+CLD251x+1T2018',
    'course-v1:Microsoft+DAT204x+1T2018',
    'course-v1:Microsoft+DAT222x+1T2018',
    'course-v1:Microsoft+DAT256x+1T2018',
    'course-v1:NewcastleX+SWL101x+1T2018',
    'course-v1:RITx+SKILLS101x+1T2018',
    'course-v1:UPValenciaX+BSP101x+1T2017',
    'course-v1:UTArlingtonX+CSE1309x+1T2018'
  ];
  for (var index in courseKeys) {
    if (decodeURIComponent(window.location.href).indexOf(courseKeys[index]) > 0) {
      activate();
      return;
    }
  }
}, "deactivationEnabled": false, "id": "10187053196"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "//courses.edx.org/courses/(.*)/course/(.*)", "match": "regex"}]], "activationType": "callback", "name": "[LEARNER-3514] Course Home Page", "apiName": "1743970571_learner3514_course_home_page", "tags": [], "undoOnDeactivation": false, "activationCode": function callbackFn(activate, options) {
  var courseKeys = [
    'course-v1:UBCx+COMM420x+3T2017',
    'course-v1:ColumbiaX+CORPFIN1x+1T2018',
  ];
  for (var index in courseKeys) {
    if (decodeURIComponent(window.location.href).indexOf(courseKeys[index]) > 0) {
      activate();
      return;
    }
  }
}, "deactivationEnabled": false, "id": "10188118405"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "//courses.edx.org\\/courses\\/(.*)\\/(.*)", "match": "regex"}]], "activationType": "callback", "name": "[LEARNER-3514] Courseware", "apiName": "1743970571_learner3514_courseware", "tags": [], "undoOnDeactivation": false, "activationCode": function callbackFn(activate, options) {
  var courseKeys = [
    'course-v1:UBCx+COMM420x+3T2017',
    'course-v1:ColumbiaX+CORPFIN1x+1T2018',
  ];
  for (var index in courseKeys) {
    if (decodeURIComponent(window.location.href).indexOf(courseKeys[index]) > 0) {
      activate();
      return;
    }
  }
}, "deactivationEnabled": false, "id": "10202188388"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "https://courses.edx.org/courses/(.*)/xfeature/portfolio/", "match": "regex"}]], "name": "[LEARNER-3515] Portfolio Page", "apiName": "1743970571_learner3515_portfolio_page", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "10238425886"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "//courses.edx.org\\/courses\\/(.*)\\/(.*)", "match": "regex"}]], "activationType": "callback", "name": "[LEARNER-3515] Courseware", "apiName": "1743970571_learner3515_courseware", "tags": [], "undoOnDeactivation": false, "activationCode": function callbackFn(activate, options) {
  var courseKeys = [
    'course-v1:adam+adam+adam',
    'course-v1:Microsoft+DEV236x+1T2018',
    'course-v1:Microsoft+DEV274x+1T2018',
    'course-v1:Microsoft+DEV276x+1T2018',
    'course-v1:HKUSTx+COMP102.1x+1T2018',
    'course-v1:HKUSTx+COMP102.2x+1T2018',
    'course-v1:UC3Mx+IT.1.1x+3T2017',
    'course-v1:UC3Mx+IT.1.2x+3T2017',
    'course-v1:UC3Mx+IT.1.3x+3T2017',
    'course-v1:IITBombayX+CS101.1x+1T2018',
  ];
  for (var index in courseKeys) {
    if (decodeURIComponent(window.location.href).indexOf(courseKeys[index]) > 0) {
      activate();
      return;
    }
  }
}, "deactivationEnabled": false, "id": "10240812267"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "courses.edx.org/course_modes/choose/", "match": "regex"}]], "activationType": "callback", "name": "[LEARNER-3514] Track Selection Page", "apiName": "1743970571_learner3514_track_selection_page", "tags": [], "undoOnDeactivation": false, "activationCode": function callbackFn(activate, options) {
  var courseKeys = [
    'course-v1:UBCx+COMM420x+3T2017',
    'course-v1:ColumbiaX+CORPFIN1x+1T2018'
  ];
  for (var index in courseKeys) {
    if (decodeURIComponent(window.location.href).indexOf(courseKeys[index]) > 0) {
      activate();
      return;
    }
  }
}, "deactivationEnabled": false, "id": "10242602152"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "//courses.edx.org/courses/(.*)/course/(.*)", "match": "regex"}]], "activationType": "callback", "name": "[LEARNER-3515] Course Home Page", "apiName": "1743970571_learner3515_course_home_page", "tags": [], "undoOnDeactivation": false, "activationCode": function callbackFn(activate, options) {
  var courseKeys = [
    'course-v1:adam+adam+adam',
    'course-v1:Microsoft+DEV236x+1T2018',
    'course-v1:Microsoft+DEV274x+1T2018',
    'course-v1:Microsoft+DEV276x+1T2018',
    'course-v1:HKUSTx+COMP102.1x+1T2018',
    'course-v1:HKUSTx+COMP102.2x+1T2018',
    'course-v1:UC3Mx+IT.1.1x+3T2017',
    'course-v1:UC3Mx+IT.1.2x+3T2017',
    'course-v1:UC3Mx+IT.1.3x+3T2017',
    'course-v1:IITBombayX+CS101.1x+1T2018',
  ];
  for (var index in courseKeys) {
    if (decodeURIComponent(window.location.href).indexOf(courseKeys[index]) > 0) {
      activate();
      return;
    }
  }
}, "deactivationEnabled": false, "id": "10244784103"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "https://courses.edx.org/dashboard", "match": "simple"}]], "activationType": "polling", "name": "[LEARNER-3515] Dashboard Page", "apiName": "1743970571_learner3515_dashboard_page", "tags": [], "undoOnDeactivation": false, "activationCode": function pollingFn() {
  deactivate_substrings = [
    'course-v1:adam+adam+adam',
    'course-v1:BerkeleyX+ColWri2.1x+3T2017_2',
    'course-v1:HarvardX+PH125.1x+3T2017',
    'course-v1:Microsoft+DAT205x+1T2018',
    'course-v1:Microsoft+DAT206x+1T2018',
    'course-v1:Microsoft+DAT207x+1T2018',
    'course-v1:Microsoft+DAT208x+1T2018',
    'course-v1:Microsoft+DEV283x+2T2017',
    'course-v1:UQx+TOURISMx+3T2017',
    'course-v1:UTHealthSPHx+IMAGINE99x+3T2017',
    'course-v1:AdelaideX+Project101x+1T2017',
    'course-v1:Catalystx+IL5x+1T2018',
    'course-v1:ETSx+TOEFLx+1T2018',
    'course-v1:LinuxFoundationX+LFS101x+1T2017',
    'course-v1:LinuxFoundationX+LFS171x+3T2017',
    'course-v1:UBCx+COMM220x+3T2017',
    'course-v1:UQx+IELTSx+1T2018',
    'course-v1:NYIF+CM1.x+3T2017',
    'course-v1:CurtinX+IOT1x+1T2018',
    'course-v1:HarvardX+PH526x+1T2018',
    'course-v1:Harvardx+HLS2X+1T2018',
    'course-v1:Microsoft+CLD251x+1T2018',
    'course-v1:Microsoft+DAT204x+1T2018',
    'course-v1:Microsoft+DAT222x+1T2018',
    'course-v1:Microsoft+DAT256x+1T2018',
    'course-v1:NewcastleX+SWL101x+1T2018',
    'course-v1:RITx+SKILLS101x+1T2018',
    'course-v1:UPValenciaX+BSP101x+1T2017',
    'course-v1:UTArlingtonX+CSE1309x+1T2018'
  ];
  substrings = [
    'course-v1:adam+adam+adam',
    'course-v1:Microsoft+DEV236x+1T2018',
    'course-v1:Microsoft+DEV274x+1T2018',
    'course-v1:Microsoft+DEV276x+1T2018',
    'course-v1:HKUSTx+COMP102.1x+1T2018',
    'course-v1:HKUSTx+COMP102.2x+1T2018',
    'course-v1:UC3Mx+IT.1.1x+3T2017',
    'course-v1:UC3Mx+IT.1.2x+3T2017',
    'course-v1:UC3Mx+IT.1.3x+3T2017',
    'course-v1:IITBombayX+CS101.1x+1T2018',
  ];
  activate = false;
  $('.course-item').each(function(i, e){
    var str = $(e).find('.enter-course').data('course-key');
    if (deactivate_substrings.indexOf(str) > -1) {
      activate = false;
      return false;
    }
    if (substrings.indexOf(str) > -1) {
      activate = true;
    }
  });
  return activate;
}, "deactivationEnabled": false, "id": "10246741690"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "https://courses.edx.org/dashboard", "match": "simple"}]], "activationType": "polling", "name": "[LEARNER-3514] Dashboard Page", "apiName": "1743970571_learner3514_dashboard_page", "tags": [], "undoOnDeactivation": false, "activationCode": function pollingFn() {
  deactivate_substrings = [
    'course-v1:adam+adam+adam',
    'course-v1:BerkeleyX+ColWri2.1x+3T2017_2',
    'course-v1:HarvardX+PH125.1x+3T2017',
    'course-v1:Microsoft+DAT205x+1T2018',
    'course-v1:Microsoft+DAT206x+1T2018',
    'course-v1:Microsoft+DAT207x+1T2018',
    'course-v1:Microsoft+DAT208x+1T2018',
    'course-v1:Microsoft+DEV283x+2T2017',
    'course-v1:UQx+TOURISMx+3T2017',
    'course-v1:UTHealthSPHx+IMAGINE99x+3T2017',
    'course-v1:AdelaideX+Project101x+1T2017',
    'course-v1:Catalystx+IL5x+1T2018',
    'course-v1:ETSx+TOEFLx+1T2018',
    'course-v1:LinuxFoundationX+LFS101x+1T2017',
    'course-v1:LinuxFoundationX+LFS171x+3T2017',
    'course-v1:UBCx+COMM220x+3T2017',
    'course-v1:UQx+IELTSx+1T2018',
    'course-v1:NYIF+CM1.x+3T2017',
    'course-v1:CurtinX+IOT1x+1T2018',
    'course-v1:HarvardX+PH526x+1T2018',
    'course-v1:Harvardx+HLS2X+1T2018',
    'course-v1:Microsoft+CLD251x+1T2018',
    'course-v1:Microsoft+DAT204x+1T2018',
    'course-v1:Microsoft+DAT222x+1T2018',
    'course-v1:Microsoft+DAT256x+1T2018',
    'course-v1:NewcastleX+SWL101x+1T2018',
    'course-v1:RITx+SKILLS101x+1T2018',
    'course-v1:UPValenciaX+BSP101x+1T2017',
    'course-v1:UTArlingtonX+CSE1309x+1T2018',
    'course-v1:Microsoft+DEV236x+1T2018',
    'course-v1:Microsoft+DEV274x+1T2018',
    'course-v1:Microsoft+DEV276x+1T2018',
    'course-v1:HKUSTx+COMP102.1x+1T2018',
    'course-v1:HKUSTx+COMP102.2x+1T2018',
    'course-v1:UC3Mx+IT.1.1x+3T2017',
    'course-v1:UC3Mx+IT.1.2x+3T2017',
    'course-v1:UC3Mx+IT.1.3x+3T2017',
    'course-v1:IITBombayX+CS101.1x+1T2018',
  ];
  substrings = [
    'course-v1:UBCx+COMM420x+3T2017',
    'course-v1:ColumbiaX+CORPFIN1x+1T2018'
  ];
  activate = false;
  $('.course-item').each(function(i, e){
    var str = $(e).find('.enter-course').data('course-key');
    if (deactivate_substrings.indexOf(str) > -1) {
      activate = false;
      return false;
    }
    if (substrings.indexOf(str) > -1) {
      activate = true;
    }
  });
  return activate;
}, "deactivationEnabled": false, "id": "10257400230"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "courses.edx.org/course_modes/choose/", "match": "regex"}]], "activationType": "callback", "name": "[LEARNER-3515] Track Selection Page", "apiName": "1743970571_learner3515_track_selection_page", "tags": [], "undoOnDeactivation": false, "activationCode": function callbackFn(activate, options) {
  var courseKeys = [
    'course-v1:adam+adam+adam',
    'course-v1:Microsoft+DEV236x+1T2018',
    'course-v1:Microsoft+DEV274x+1T2018',
    'course-v1:Microsoft+DEV276x+1T2018',
    'course-v1:HKUSTx+COMP102.1x+1T2018',
    'course-v1:HKUSTx+COMP102.2x+1T2018',
    'course-v1:UC3Mx+IT.1.1x+3T2017',
    'course-v1:UC3Mx+IT.1.2x+3T2017',
    'course-v1:UC3Mx+IT.1.3x+3T2017',
    'course-v1:IITBombayX+CS101.1x+1T2018',
  ];
  for (var index in courseKeys) {
    if (decodeURIComponent(window.location.href).indexOf(courseKeys[index]) > 0) {
      activate();
      return;
    }
  }
}, "deactivationEnabled": false, "id": "10279640053"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "https://courses.edx.org/courses/course-v1:ColumbiaX+CORPFIN1x+1T2018/discussion/forum/", "match": "simple"}, {"type": "url", "value": "https://courses.edx.org/courses/course-v1:UBCx+COMM420x+3T2017/discussion/forum/", "match": "simple"}]], "name": "LEARNER-3514 Discussions ", "apiName": "1743970571_learner3514_discussions_", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "10309704977"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "https://courses.edx.org/courses/course-v1:ColumbiaX+CORPFIN1x+1T2018/discussion/forum/verifiedsupport/threads/5a8710719379400a080010ad", "match": "simple"}, {"type": "url", "value": "https://courses.edx.org/courses/course-v1:UBCx+COMM420x+3T2017/discussion/forum/busmktg1x_verifiedsupport/threads/5a87129c24451a09eb00112e", "match": "simple"}]], "name": "LEARNER-3514 Thread", "apiName": "1743970571_learner3514_thread", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "10311317979"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "https://courses.edx.org/courses/course-v1:ColumbiaX+CORPFIN1x+1T2018/discussion/forum/", "match": "simple"}, {"type": "url", "value": "https://courses.edx.org/courses/course-v1:UBCx+COMM420x+3T2017/discussion/forum/", "match": "simple"}]], "name": "LEARNER-3514 Discussions", "apiName": "1743970571_learner3514_discussions", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "10317513270"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "https://www.edx.org/micromasters/mitx-supply-chain-management", "match": "simple"}, {"type": "url", "value": "https://www.edx.org/micromasters/cloud-computing", "match": "simple"}, {"type": "url", "value": "https://www.edx.org/micromasters/ritx-cybersecurity", "match": "simple"}]], "name": "MicroMasters Pages - GE Interviews", "apiName": "1743970571_micromasters_pages__ge_interviews", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "10318510742"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "https://www.edx.org/micromasters/columbiax-artificial-intelligence", "match": "simple"}]], "name": "GE Interviews - Columbia AI Page", "apiName": "1743970571_ge_interviews__columbia_ai_page", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "10339411686"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "courses.edx.org/dashboard", "match": "simple"}]], "activationType": "polling", "name": "Bundles Dashboard", "apiName": "1743970571_bundles_dashboard", "tags": [], "undoOnDeactivation": false, "activationCode": function pollingFn() {
    return $('.listing-courses').data('programs');
  }, "deactivationEnabled": false, "id": "10358260116"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "//courses.edx.org\\/courses\\/(.*)\\/courseware\\/(.*)\\/(.*)\\/(.*)", "match": "regex"}]], "name": "Course unit page", "apiName": "1743970571_course_unit_page", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "10374489322"}], "projectId": "1743970571", "namespace": "1743970571", "listTargetingCookies": [], "dimensions": [{"segmentId": "3742021360", "id": "3757290752", "apiName": "dashboardonations", "name": "Dashboard Donations"}], "audiences": [{"conditions": ["and", ["or", ["or", {"value": "en", "type": "cookies", "name": "prod-edx-language-preference", "match": "exact"}], ["not", ["or", {"value": null, "type": "cookies", "name": "prod-edx-language-preference", "match": "exists"}]]]], "id": "8430051876", "name": "EdX Preferred Language is English"}, {"conditions": ["and", ["or", ["or", {"value": "$(\"html\").html().indexOf(\"discussion-module\") !== -1;", "type": "code", "name": null, "match": null}]], ["or", ["or", {"value": "desktop", "type": "device", "name": null, "match": null}]]], "id": "9115224323", "name": "Valid for Inline Discussions Experiment"}, {"conditions": ["and", ["or", ["not", ["or", {"value": "true", "type": "cookies", "name": "experiments_is_enterprise", "match": "exact"}]]]], "id": "9874510616", "name": "Not Enterprise"}], "integrationSettings": [], "anonymizeIP": false, "visitorAttributes": [], "accountId": "1706490390", "events": [{"category": "other", "name": "Search Card Click", "eventType": "click", "viewId": "8343266652", "apiName": "1743970571_search_card_click", "id": "8339114144", "eventFilter": {"filterType": "target_selector", "selector": ".discovery-card"}}, {"category": "other", "name": "Search Facet Click", "eventType": "click", "viewId": "8343266652", "apiName": "1743970571_search_facet_click", "id": "8350338201", "eventFilter": {"filterType": "target_selector", "selector": ".facet-option"}}, {"category": "other", "name": "Donation Button Click", "eventType": "custom", "viewId": null, "apiName": "donation_button_click", "id": "8405531377", "eventFilter": null}, {"category": "convert", "name": "Order Completed", "eventType": "custom", "viewId": null, "apiName": "Completed Purchase", "id": "8417016427", "eventFilter": null}, {"category": "add_to_cart", "name": "Upgrade Banner Button Clicked", "eventType": "custom", "viewId": null, "apiName": "upgrade_banner", "id": "8417658000", "eventFilter": null}, {"category": "other", "name": "Toggle Hero", "eventType": "custom", "viewId": null, "apiName": "toggle_hero", "id": "8422590800", "eventFilter": null}, {"category": "other", "name": "Resume Course Click", "eventType": "click", "viewId": "8415635799", "apiName": "1743970571_resume_course_click", "id": "8428101482", "eventFilter": {"filterType": "target_selector", "selector": ".action-resume-course"}}, {"category": "other", "name": "Upgrade Button Click", "eventType": "click", "viewId": "8419664830", "apiName": "1743970571_upgrade_button_click", "id": "8431532335", "eventFilter": {"filterType": "target_selector", "selector": ".list-actions input[name=\"verified_mode\"]"}}, {"category": "purchase", "name": "Track Revenue", "eventType": "custom", "viewId": null, "apiName": "trackRevenue", "id": "8432432414", "eventFilter": null}, {"category": "other", "name": "Donation Button Click", "eventType": "click", "viewId": "8306362187", "apiName": "1743970571_donation_button_click", "id": "8456773586", "eventFilter": {"filterType": "target_selector", "selector": ".v2 .register-choice-donate .donation-link"}}, {"category": "other", "name": "Clicked Upgrade Button", "eventType": "click", "viewId": "8306362187", "apiName": "1743970571_clicked_upgrade_button", "id": "8459531380", "eventFilter": {"filterType": "target_selector", "selector": ".list-actions input[name=\"verified_mode\"]"}}, {"category": "other", "name": "Clicked Continue to Course", "eventType": "click", "viewId": "8306362187", "apiName": "1743970571_clicked_continue_to_course_1_2", "id": "8460990334", "eventFilter": {"filterType": "target_selector", "selector": ".list-actions input[name=\"audit_mode\"]"}}, {"category": "other", "name": "Enroll Button Click", "eventType": "click", "viewId": "8462065569", "apiName": "1743970571_enroll_button_click_1", "id": "8468307826", "eventFilter": {"filterType": "target_selector", "selector": ".js-enroll-btn"}}, {"category": "other", "name": "Search Results Card Click", "eventType": "click", "viewId": "8343266652", "apiName": "1743970571_search_results_card_click", "id": "8503925888", "eventFilter": {"filterType": "target_selector", "selector": ".js-card-list .discovery-card"}}, {"category": "other", "name": "Upgrade Button Click (custom)", "eventType": "custom", "viewId": null, "apiName": "upgrade_button_click", "id": "8505715612", "eventFilter": null}, {"category": "other", "name": "Continue To Course Click (custom)", "eventType": "custom", "viewId": null, "apiName": "continue_to_course_click", "id": "8506846007", "eventFilter": null}, {"category": "other", "name": "Search Featured Card Click", "eventType": "click", "viewId": "8343266652", "apiName": "1743970571_search_featured_card_click", "id": "8509348685", "eventFilter": {"filterType": "target_selector", "selector": ".js-featured-results .discovery-card"}}, {"category": "other", "name": "[LEARNER-1539, 2348] Clicked Reviews Tool Link", "eventType": "click", "viewId": "8546340646", "apiName": "1743970571_clicked_reviews_tool_link", "id": "8541771510", "eventFilter": {"filterType": "target_selector", "selector": "[data-analytics-id=\"edx.reviews\"]"}}, {"category": "other", "name": "Write a Review", "eventType": "click", "viewId": "8540021030", "apiName": "1743970571_write_a_review", "id": "8542720980", "eventFilter": {"filterType": "target_selector", "selector": ".btn"}}, {"category": "other", "name": "Clicked Updates Tool", "eventType": "click", "viewId": "8550242114", "apiName": "1743970571_clicked_updates_tool", "id": "8545011973", "eventFilter": {"filterType": "target_selector", "selector": "a[data-analytics-id=\"edx.updates\"]"}}, {"category": "other", "name": "Clicked Start / Resume Course", "eventType": "click", "viewId": "8550242114", "apiName": "1743970571_start__resume_course", "id": "8545470270", "eventFilter": {"filterType": "target_selector", "selector": "a.action-resume-course"}}, {"category": "other", "name": "[LEARNER-1539,2348] Clicked Updates Tool Link", "eventType": "click", "viewId": "8546340646", "apiName": "1743970571_click_updates_tool_link", "id": "8546721715", "eventFilter": {"filterType": "target_selector", "selector": "[data-analytics-id=\"edx.updates\"]"}}, {"category": "other", "name": "Clicked Bookmarks Tool", "eventType": "click", "viewId": "8550242114", "apiName": "1743970571_clicked_bookmarks", "id": "8547901074", "eventFilter": {"filterType": "target_selector", "selector": "a[data-analytics-id=\"edx.bookmarks\"]"}}, {"category": "other", "name": "Clicked on Outline Subsection Link", "eventType": "click", "viewId": "8550242114", "apiName": "1743970571_clicked_on_outline_subsection_link", "id": "8548421037", "eventFilter": {"filterType": "target_selector", "selector": "a.outline-item"}}, {"category": "other", "name": "[LEARNER-1539,2348] Clicked Subsection in Outline", "eventType": "click", "viewId": "8546340646", "apiName": "1743970571_clicked_subsection_in_outline", "id": "8548671769", "eventFilter": {"filterType": "target_selector", "selector": "a.outline-item"}}, {"category": "other", "name": "[LEARNER-1539, 2348] Clicked Start / Resume Course", "eventType": "click", "viewId": "8546340646", "apiName": "1743970571_clicked_start__resume_course", "id": "8549720935", "eventFilter": {"filterType": "target_selector", "selector": ".action-resume-course"}}, {"category": "other", "name": "Clicked Reviews Tool", "eventType": "click", "viewId": "8550242114", "apiName": "1743970571_clicked_reviews_", "id": "8550501290", "eventFilter": {"filterType": "target_selector", "selector": "a[data-analytics-id=\"edx.reviews\"]"}}, {"category": "other", "name": "Skip Track Experiment Upgrade Click", "eventType": "custom", "viewId": null, "apiName": "skip_track_upgrade_click", "id": "8562755662", "eventFilter": null}, {"category": "other", "name": "Skip Track Experiment Donation Click", "eventType": "custom", "viewId": null, "apiName": "skip_track_donation_click", "id": "8564096148", "eventFilter": null}, {"category": "other", "name": "Embedded Wayfinder Clicks", "eventType": "click", "viewId": "8462065569", "apiName": "1743970571_embedded_wayfinder_clicks", "id": "8566150807", "eventFilter": {"filterType": "target_selector", "selector": ".explorator-page button, explorator-page a"}}, {"category": "other", "name": "Skip Track Experiment Donation Click v2", "eventType": "custom", "viewId": null, "apiName": "skip_track_donation_clickv2", "id": "8570072346", "eventFilter": null}, {"category": "other", "name": "Microsoft Registration Click", "eventType": "click", "viewId": "8485256782", "apiName": "1743970571_microsoft_registration_click", "id": "8598744869", "eventFilter": {"filterType": "target_selector", "selector": ".button-oa2-azuread-oauth2"}}, {"category": "other", "name": "Optional Level of Education Select", "eventType": "custom", "viewId": null, "apiName": "optional_level_of_education_select", "id": "8598972364", "eventFilter": null}, {"category": "other", "name": "Google Registration Click", "eventType": "click", "viewId": "8485256782", "apiName": "1743970571_google_registration_click", "id": "8601482611", "eventFilter": {"filterType": "target_selector", "selector": ".button-oa2-google-oauth2"}}, {"category": "other", "name": "Optional Gender Select", "eventType": "custom", "viewId": null, "apiName": "optional_gender_select", "id": "8605163359", "eventFilter": null}, {"category": "other", "name": "Facebook Registration Click", "eventType": "click", "viewId": "8485256782", "apiName": "1743970571_facebook_registration_click", "id": "8607251842", "eventFilter": {"filterType": "target_selector", "selector": ".button-oa2-facebook"}}, {"category": "other", "name": "Optional Year of Birth Select", "eventType": "custom", "viewId": null, "apiName": "optional_year_of_birth_select", "id": "8608012125", "eventFilter": null}, {"category": "other", "name": "Login Or Register Click", "eventType": "click", "viewId": "8485256782", "apiName": "1743970571_create_account_click", "id": "8609362120", "eventFilter": {"filterType": "target_selector", "selector": ".action"}}, {"category": "other", "name": "Place Order Clicks", "eventType": "click", "viewId": "8693450564", "apiName": "1743970571_place_order_clicks", "id": "8696400337", "eventFilter": {"filterType": "target_selector", "selector": "#payment-button"}}, {"category": "other", "name": "Clicked Paypal", "eventType": "click", "viewId": "8693450564", "apiName": "1743970571_clicked_paypal", "id": "8728670363", "eventFilter": {"filterType": "target_selector", "selector": ".payment-processor-paypal"}}, {"category": "other", "name": "Apply Coupon", "eventType": "click", "viewId": "8693450564", "apiName": "1743970571_apply_coupon", "id": "8728840294", "eventFilter": {"filterType": "target_selector", "selector": "#apply-voucher-button"}}, {"category": "other", "name": "Any Discussion Event", "eventType": "custom", "viewId": null, "apiName": "discussion_any_event", "id": "8782025831", "eventFilter": null}, {"category": "other", "name": "Hackathon Motivational Fee Decilne Signup", "eventType": "custom", "viewId": null, "apiName": "hackathon-motivational-fee-decline-signup", "id": "8782405529", "eventFilter": null}, {"category": "other", "name": "Hackathon Motivational Fee Signup2", "eventType": "custom", "viewId": null, "apiName": "hackathon-motivational-fee-signup2", "id": "8782836127", "eventFilter": null}, {"category": "other", "name": "Hackathon Motivational Fee Signup", "eventType": "custom", "viewId": null, "apiName": "hackathon-motivational-fee-signup", "id": "8782908660", "eventFilter": null}, {"category": "other", "name": "Discussion Username Click", "eventType": "custom", "viewId": null, "apiName": "discussion_username_event", "id": "8783617139", "eventFilter": null}, {"category": "other", "name": "Discussion Add Response", "eventType": "custom", "viewId": null, "apiName": "discussion_add_response_event", "id": "8783775764", "eventFilter": null}, {"category": "other", "name": "Header Register link click", "eventType": "click", "viewId": "8636165544", "apiName": "1743970571_header_register_link_click", "id": "8784072362", "eventFilter": {"filterType": "target_selector", "selector": ".js-user-cta .btn-blue"}}, {"category": "other", "name": "Discussion Search Button Click", "eventType": "custom", "viewId": null, "apiName": "discussion_search_button_event", "id": "8785313481", "eventFilter": null}, {"category": "other", "name": "Home register cta join link click", "eventType": "click", "viewId": "8636165544", "apiName": "1743970571_home_register_cta_join_link_click", "id": "8785861684", "eventFilter": {"filterType": "target_selector", "selector": ".home-cta-pop-up-cta"}}, {"category": "other", "name": "Discussion User Profile Click", "eventType": "custom", "viewId": null, "apiName": "discussion_user_profile_event", "id": "8786797800", "eventFilter": null}, {"category": "other", "name": "Clicked Discovery Header Link", "eventType": "click", "viewId": "8562284423", "apiName": "1743970571_clicked_discovery_header_link", "id": "8788456748", "eventFilter": {"filterType": "target_selector", "selector": ".tab-nav-link.discovery-link"}}, {"category": "other", "name": "Discussion New Post", "eventType": "custom", "viewId": null, "apiName": "discussion_new_post_event", "id": "8790268643", "eventFilter": null}, {"category": "other", "name": "Discussion Add Comment", "eventType": "custom", "viewId": null, "apiName": "discussion_comment_event", "id": "8803444796", "eventFilter": null}, {"category": "other", "name": "Clicked Find New Courses Button", "eventType": "click", "viewId": "8562284423", "apiName": "1743970571_clicked_find_new_courses_button", "id": "8838242258", "eventFilter": {"filterType": "target_selector", "selector": ".course-advertise .ad-link a"}}, {"category": "other", "name": "Saved Feature Interest", "eventType": "custom", "viewId": null, "apiName": "social_saved_feature_interest", "id": "8851480295", "eventFilter": null}, {"category": "other", "name": "Clicked Feature interest", "eventType": "click", "viewId": "8300752164", "apiName": "social_clicked_feature_interest", "id": "8857300006", "eventFilter": {"filterType": "target_selector", "selector": ".experiment-social-button"}}, {"category": "other", "name": "Clicked Hero Upgrade Button", "eventType": "click", "viewId": "8550242114", "apiName": "1743970571_clicked_upgrade_button_1", "id": "8890061894", "eventFilter": {"filterType": "target_selector", "selector": "a.btn-upgrade"}}, {"category": "other", "name": "Payment Error", "eventType": "custom", "viewId": null, "apiName": "payment_error", "id": "8902240264", "eventFilter": null}, {"category": "other", "name": "Year Error", "eventType": "custom", "viewId": null, "apiName": "card-expiry-year_error", "id": "8922080667", "eventFilter": null}, {"category": "other", "name": "First Name Error", "eventType": "custom", "viewId": null, "apiName": "div_id_first_name_error", "id": "8926010790", "eventFilter": null}, {"category": "other", "name": "State Error", "eventType": "custom", "viewId": null, "apiName": "div_id_state_error", "id": "8926630236", "eventFilter": null}, {"category": "other", "name": "Postal Code Error", "eventType": "custom", "viewId": null, "apiName": "div_id_postal_code_error", "id": "8926660400", "eventFilter": null}, {"category": "other", "name": "City Error", "eventType": "custom", "viewId": null, "apiName": "div_id_city_error", "id": "8929870216", "eventFilter": null}, {"category": "other", "name": "Card Number Error", "eventType": "custom", "viewId": null, "apiName": "card-number_error", "id": "8930750408", "eventFilter": null}, {"category": "other", "name": "Address Error", "eventType": "custom", "viewId": null, "apiName": "div_id_address_line1_error", "id": "8931320561", "eventFilter": null}, {"category": "other", "name": "Country Error", "eventType": "custom", "viewId": null, "apiName": "div_id_country_error", "id": "8931480183", "eventFilter": null}, {"category": "other", "name": "Card Error", "eventType": "custom", "viewId": null, "apiName": "card-cvn_error", "id": "8932680249", "eventFilter": null}, {"category": "other", "name": "Last Name Error", "eventType": "custom", "viewId": null, "apiName": "div_id_last_name_error", "id": "8932700294", "eventFilter": null}, {"category": "other", "name": "Validation Error", "eventType": "custom", "viewId": null, "apiName": "validation_error", "id": "8933340180", "eventFilter": null}, {"category": "other", "name": "Month Error", "eventType": "custom", "viewId": null, "apiName": "card-expiry-month_error", "id": "8936370296", "eventFilter": null}, {"category": "other", "name": "Toggle Form", "eventType": "click", "viewId": "8485256782", "apiName": "1743970571_toggle_form", "id": "9010110913", "eventFilter": {"filterType": "target_selector", "selector": ".form-toggle"}}, {"category": "other", "name": "Dashboard Upgrade Button Click", "eventType": "click", "viewId": "8562284423", "apiName": "1743970571_dashboard_upgrade_button_click", "id": "9013853030", "eventFilter": {"filterType": "target_selector", "selector": ".action-upgrade"}}, {"category": "other", "name": "Track Selection Page Upgrade Click", "eventType": "click", "viewId": "8787863389", "apiName": "1743970571_track_selection_page_upgrade_click", "id": "9015404526", "eventFilter": {"filterType": "target_selector", "selector": ".list-actions input[name=\"verified_mode\"]"}}, {"category": "other", "name": "Login Click", "eventType": "click", "viewId": "8485256782", "apiName": "1743970571_login_click", "id": "9016563053", "eventFilter": {"filterType": "target_selector", "selector": ".js-login"}}, {"category": "other", "name": "Clicked Upgrade Button in Sock", "eventType": "click", "viewId": "8550242114", "apiName": "1743970571_clicked_upgrade_button_in_sock", "id": "9026690807", "eventFilter": {"filterType": "target_selector", "selector": ".verification-sock .action-upgrade-certificate"}}, {"category": "other", "name": "Register Click", "eventType": "click", "viewId": "8485256782", "apiName": "1743970571_register_click", "id": "9030081164", "eventFilter": {"filterType": "target_selector", "selector": ".js-register"}}, {"category": "other", "name": "Discussion Thread View", "eventType": "custom", "viewId": null, "apiName": "discussion_thread_view", "id": "9111823954", "eventFilter": null}, {"category": "other", "name": "NoSimilarCoursesLink", "eventType": "custom", "viewId": null, "apiName": "nolink", "id": "9174055607", "eventFilter": null}, {"category": "other", "name": "HasSimilarCoursesCards", "eventType": "custom", "viewId": null, "apiName": "hascards", "id": "9176714444", "eventFilter": null}, {"category": "other", "name": "'See More' button displayed", "eventType": "custom", "viewId": null, "apiName": "see_more_button_displayed", "id": "9181551296", "eventFilter": null}, {"category": "other", "name": "SimilarCourseCardClick", "eventType": "custom", "viewId": null, "apiName": "cardclick", "id": "9184384966", "eventFilter": null}, {"category": "other", "name": "HasSimilarCoursesLink", "eventType": "custom", "viewId": null, "apiName": "haslink", "id": "9185354824", "eventFilter": null}, {"category": "other", "name": "NoSimilarCourseCards", "eventType": "custom", "viewId": null, "apiName": "nocards", "id": "9188274442", "eventFilter": null}, {"category": "other", "name": "SimilarCourseLinkClick", "eventType": "custom", "viewId": null, "apiName": "linkclick", "id": "9225290101", "eventFilter": null}, {"category": "other", "name": "Simplified Homepage: Featured Card Click", "eventType": "click", "viewId": "8636165544", "apiName": "1743970571_simplified_homepage_featured_card_click", "id": "9264368588", "eventFilter": {"filterType": "target_selector", "selector": ".expanded-card a"}}, {"category": "other", "name": "No Thanks Button", "eventType": "custom", "viewId": null, "apiName": "no_thanks_button", "id": "9265834188", "eventFilter": null}, {"category": "other", "name": "LEARNER-3259-HasReviews", "eventType": "custom", "viewId": null, "apiName": "LEARNER-3259-has-reviews", "id": "9410916249", "eventFilter": null}, {"category": "other", "name": "LEARNER-2709 New Search Button Toggled", "eventType": "click", "viewId": "9263799386", "apiName": "1743970571_learner2709_new_search_button", "id": "9425991397", "eventFilter": {"filterType": "target_selector", "selector": ".new-search-button"}}, {"category": "other", "name": "LEARNER-3259-ReviewStarClicks", "eventType": "custom", "viewId": null, "apiName": "LEARNER-3259-review-star-clicks", "id": "9503560426", "eventFilter": null}, {"category": "other", "name": "Add Donation Click", "eventType": "custom", "viewId": null, "apiName": "add_donation_click", "id": "9659790643", "eventFilter": null}, {"category": "other", "name": "Place Order Click With Donation", "eventType": "custom", "viewId": null, "apiName": "place_order_click_with_donation", "id": "9673130451", "eventFilter": null}, {"category": "other", "name": "Takeover Button Click", "eventType": "custom", "viewId": null, "apiName": "takeover_button_click", "id": "9937790714", "eventFilter": null}, {"category": "other", "name": "LEARNER-3377 Dashboard Upgrade Button Click", "eventType": "click", "viewId": "9857878336", "apiName": "1743970571_learner3377_dashboard_upgrade_button_click", "id": "9952317737", "eventFilter": {"filterType": "target_selector", "selector": ".action-upgrade"}}, {"category": "other", "name": "LEARNER-3377 Track Selection Upgrade Button Click", "eventType": "click", "viewId": "9862639519", "apiName": "1743970571_learner3377_track_selection_upgrade_button_click", "id": "9998645817", "eventFilter": {"filterType": "target_selector", "selector": "input[name=\"verified_mode\"]"}}, {"category": "other", "name": "LEARNER-3377 Course Home Page Learn More Click", "eventType": "custom", "viewId": null, "apiName": "LEARNER-3377_course_home_page_learn_more_click", "id": "10011856028", "eventFilter": null}, {"category": "other", "name": "LEARNER-3377 Track Selection Modal Upgrade Click", "eventType": "click", "viewId": "9862639519", "apiName": "1743970571_learner3377_track_selection_modal_upgrade_click", "id": "10035863769", "eventFilter": {"filterType": "target_selector", "selector": ".Button__btn.Button__btn-success"}}, {"category": "other", "name": "LEARNER-3377 Course Home Upgrade Button Click", "eventType": "click", "viewId": "9974274234", "apiName": "1743970571_course_home_upgrade_button_click", "id": "10039342975", "eventFilter": {"filterType": "target_selector", "selector": ".btn-brand.btn-upgrade"}}, {"category": "other", "name": "LEARNER-3377 Course Home Modal Upgrade Click", "eventType": "click", "viewId": "9974274234", "apiName": "1743970571_learner3377_course_home_modal_upgrade_click", "id": "10052033032", "eventFilter": {"filterType": "target_selector", "selector": ".Button__btn.Button__btn-success"}}, {"category": "other", "name": "LEARNER-3377 Track Selection Page Learn More Click", "eventType": "custom", "viewId": null, "apiName": "LEARNER-3377_track_selection_page_learn_more_click", "id": "10056534422", "eventFilter": null}, {"category": "other", "name": "LEARNER-3377 Dashboard Page Modal Upgrade Click", "eventType": "click", "viewId": "9857878336", "apiName": "1743970571_learner3377_dashboard_page_modal_upgrade_click", "id": "10073781948", "eventFilter": {"filterType": "target_selector", "selector": ".Button__btn.Button__btn-success"}}, {"category": "other", "name": "LEARNER-3377 Dashboard Page Learn More Click", "eventType": "custom", "viewId": null, "apiName": "LEARNER-3377_dashboard_page_learn_more_click", "id": "10089570280", "eventFilter": null}, {"category": "other", "name": "Bundle Place Order Click", "eventType": "click", "viewId": "10168992614", "apiName": "1743970571_bundle_place_order_click", "id": "10160306233", "eventFilter": {"filterType": "target_selector", "selector": "#payment-button"}}, {"category": "other", "name": "Dashboard Complete Bundle Button Click", "eventType": "custom", "viewId": null, "apiName": "dashboard_complete_bundle_click", "id": "10172071863", "eventFilter": null}, {"category": "other", "name": "LEARNER-3377 Track Selection Page Modal Upgrade", "eventType": "custom", "viewId": null, "apiName": "LEARNER-3377_track_selection_page_modal_upgrade", "id": "10190753494", "eventFilter": null}, {"category": "other", "name": "LEARNER-3514 Course Home Page Modal Upgrade", "eventType": "custom", "viewId": null, "apiName": "LEARNER-3514_course_home_page_modal_upgrade", "id": "10192647392", "eventFilter": null}, {"category": "other", "name": "LEARNER-3515 Viewed Modal Slide 2", "eventType": "custom", "viewId": null, "apiName": "LEARNER-3515_viewed_modal_slide_2", "id": "10192688669", "eventFilter": null}, {"category": "other", "name": "Feeling Lucky Click Hackathon (Jae)", "eventType": "custom", "viewId": null, "apiName": "feeling-lucky-click", "id": "10192755883", "eventFilter": null}, {"category": "other", "name": "LEARNER-3514 Course Home Page Learn More Click", "eventType": "custom", "viewId": null, "apiName": "LEARNER-3514_course_home_page_learn_more_click", "id": "10193057588", "eventFilter": null}, {"category": "other", "name": "LEARNER-3377 Viewed Modal Slide 3", "eventType": "custom", "viewId": null, "apiName": "LEARNER-3377_viewed_modal_slide_3", "id": "10193601537", "eventFilter": null}, {"category": "other", "name": "LEARNER-3377 Dashboard Page Modal Upgrade", "eventType": "custom", "viewId": null, "apiName": "LEARNER-3377_dashboard_page_modal_upgrade", "id": "10194635560", "eventFilter": null}, {"category": "other", "name": "LEARNER-3377 Viewed Modal Slide 0", "eventType": "custom", "viewId": null, "apiName": "LEARNER-3377_viewed_modal_slide_0", "id": "10196161318", "eventFilter": null}, {"category": "other", "name": "LEARNER-3514 Track Selection Upgrade Button Click", "eventType": "click", "viewId": "10242602152", "apiName": "1743970571_learner3377_track_selection_upgrade_button_click_1", "id": "10197199667", "eventFilter": {"filterType": "target_selector", "selector": "input[name=\"verified_mode\"]"}}, {"category": "other", "name": "LEARNER-3377 In-Feature Page Upgrade", "eventType": "custom", "viewId": null, "apiName": "LEARNER-3377_in_feature_page_upgrade", "id": "10197423365", "eventFilter": null}, {"category": "other", "name": "LEARNER-3514 Track Selection Page Learn More Click", "eventType": "custom", "viewId": null, "apiName": "LEARNER-3514_track_selection_page_learn_more_click", "id": "10199577910", "eventFilter": null}, {"category": "other", "name": "LEARNER-3377 Viewed Modal Slide 2", "eventType": "custom", "viewId": null, "apiName": "LEARNER-3377_viewed_modal_slide_2", "id": "10201180508", "eventFilter": null}, {"category": "other", "name": "LEARNER-3377 Course Home Page Modal Upgrade", "eventType": "custom", "viewId": null, "apiName": "LEARNER-3377_course_home_page_modal_upgrade", "id": "10201203097", "eventFilter": null}, {"category": "other", "name": "LEARNER-3377 Viewed Modal Slide 1", "eventType": "custom", "viewId": null, "apiName": "LEARNER-3377_viewed_modal_slide_1", "id": "10209340159", "eventFilter": null}, {"category": "other", "name": "LEARNER-3514 Track Selection Page Modal Upgrade", "eventType": "custom", "viewId": null, "apiName": "LEARNER-3514_track_selection_page_modal_upgrade", "id": "10229963743", "eventFilter": null}, {"category": "other", "name": "LEARNER-3514 Dashboard Page Modal Upgrade", "eventType": "custom", "viewId": null, "apiName": "LEARNER-3514_dashboard_page_modal_upgrade", "id": "10235325311", "eventFilter": null}, {"category": "other", "name": "LEARNER-3515 Course Home Page Modal Upgrade", "eventType": "custom", "viewId": null, "apiName": "LEARNER-3515_course_home_page_modal_upgrade", "id": "10240272504", "eventFilter": null}, {"category": "other", "name": "LEARNER-3515 Viewed Modal Slide 0", "eventType": "custom", "viewId": null, "apiName": "LEARNER-3515_viewed_modal_slide_0", "id": "10240272510", "eventFilter": null}, {"category": "other", "name": "LEARNER-3515 Dashboard Page Learn More Click", "eventType": "custom", "viewId": null, "apiName": "LEARNER-3515_dashboard_page_learn_more_click", "id": "10240802831", "eventFilter": null}, {"category": "other", "name": "LEARNER-3514 In-Feature Page Upgrade", "eventType": "custom", "viewId": null, "apiName": "LEARNER-3514_in_feature_page_upgrade", "id": "10241741265", "eventFilter": null}, {"category": "other", "name": "LEARNER-3515 Track Selection Page Modal Upgrade", "eventType": "custom", "viewId": null, "apiName": "LEARNER-3515_track_selection_page_modal_upgrade", "id": "10243031208", "eventFilter": null}, {"category": "other", "name": "LEARNER-3515 Viewed Modal Slide 3", "eventType": "custom", "viewId": null, "apiName": "LEARNER-3515_viewed_modal_slide_3", "id": "10246242693", "eventFilter": null}, {"category": "other", "name": "LEARNER-3514 Dashboard Upgrade Button Click", "eventType": "click", "viewId": "10257400230", "apiName": "1743970571_learner3514_dashboard_upgrade_button_click", "id": "10247392256", "eventFilter": {"filterType": "target_selector", "selector": ".action-upgrade"}}, {"category": "other", "name": "LEARNER-3514 Course Home Upgrade Button Click", "eventType": "click", "viewId": "10188118405", "apiName": "1743970571_learner3377_course_home_upgrade_button_click", "id": "10247590775", "eventFilter": {"filterType": "target_selector", "selector": ".btn-brand.btn-upgrade"}}, {"category": "other", "name": "LEARNER-3514 Dashboard Page Learn More Click", "eventType": "custom", "viewId": null, "apiName": "LEARNER-3514_dashboard_page_learn_more_click", "id": "10252251399", "eventFilter": null}, {"category": "other", "name": "LEARNER-3515 Viewed Modal Slide 1", "eventType": "custom", "viewId": null, "apiName": "LEARNER-3515_viewed_modal_slide_1", "id": "10253191324", "eventFilter": null}, {"category": "other", "name": "LEARNER-3515 Dashboard Page Modal Upgrade", "eventType": "custom", "viewId": null, "apiName": "LEARNER-3515_dashboard_page_modal_upgrade", "id": "10258131540", "eventFilter": null}, {"category": "other", "name": "LEARNER-3515 Track Selection Page Learn More Click", "eventType": "custom", "viewId": null, "apiName": "LEARNER-3515_track_selection_page_learn_more_click", "id": "10258180953", "eventFilter": null}, {"category": "other", "name": "LEARNER-3515 Course Home Page Learn More Click", "eventType": "custom", "viewId": null, "apiName": "LEARNER-3515_course_home_page_learn_more_click", "id": "10275770501", "eventFilter": null}, {"category": "other", "name": "LEARNER-3515 In-Feature Page Upgrade", "eventType": "custom", "viewId": null, "apiName": "LEARNER-3515_in_feature_page_upgrade", "id": "10281150225", "eventFilter": null}, {"category": "other", "name": "LEARNER-3515 Track Selection Upgrade Button Click", "eventType": "click", "viewId": "10279640053", "apiName": "1743970571_learner3515_track_selection_upgrade_button_click", "id": "10308672754", "eventFilter": {"filterType": "target_selector", "selector": "input[name=\"verified_mode\"]"}}, {"category": "other", "name": "Discussions Upsell Click", "eventType": "custom", "viewId": null, "apiName": "discussions_upsell_click", "id": "10311642113", "eventFilter": null}, {"category": "other", "name": "LEARNER-3515 Course Home Upgrade Button Click", "eventType": "click", "viewId": "10244784103", "apiName": "1743970571_learner3515_course_home_upgrade_button_click", "id": "10317233104", "eventFilter": {"filterType": "target_selector", "selector": ".btn-brand.btn-upgrade"}}, {"category": "other", "name": "LEARNER-3515 Dashboard Upgrade Button Click", "eventType": "click", "viewId": "10246741690", "apiName": "1743970571_learner3515_dashboard_upgrade_button_click", "id": "10338340151", "eventFilter": {"filterType": "target_selector", "selector": ".action-upgrade"}}], "revision": "4734"},g=n(128);if(d.populateDirectiveData(),s.clientHasAlreadyInitialized())return void a.warn("Main / Disabling because Optimizely has already initialized on this page load. Are there multiple snippets on the page?");if(s.shouldBailForDesktopApp())return void a.log("Main / Disabling because of desktop app.");if(s.conflictInObservingChanges())return void a.log("Main / Disabling: Observe Changes Indefinitely is on, but browser does not support it.");if(s.shouldLoadInnie())l.registerFunction("getProjectId",(function(){return p.projectId})),f.addScriptAsync("https://app.optimizely.com/js/innie.js"),a.log("Main / Disabling in favor of the editor client.");else if(s.shouldLoadPreview()){var h;h=s.isSlave()?window.optimizely:window.optimizely=window.optimizely||[],h.push({type:"load",data:p}),a.log("Main / Disabling in favor of the preview client."),n(143).setupPreviewGlobal(),n(143).pushToPreviewGlobal({type:"pushPreviewData",name:"liveCommitData",data:p}),s.isSlave()||(l.registerFunction("getProjectId",(function(){return p.projectId})),f.addScriptSync("https://cdn-assets-prod.s3.amazonaws.com/js/preview2/1743970571.js"))}else if(s.shouldBootstrapDataForPreview()){l.registerFunction("initializeOptimizelyPreview",e);var v=s.isSlave()?PROJECT_ID_FOR_SLAVE_PREVIEW:l.getFunction("getProjectId")();c=t(s.getProjectToken(),v,s.getPreviewLayerIds()),f.addScriptSync(c),n(143).setupPreviewGlobal(),f.addScriptAsync("/dist/js/preview_ui.js")}else s.shouldBootstrapDataForEditor()?(l.registerFunction("initializeOptimizelyPreview",e),f.addScriptAsync(window.optimizely_editor_data_endpoint)):s.shouldInitialize()&&(e(p),i.queuePayload());r.timeEnd("block")}try{i()}catch(e){try{n(142).handleError(e)}catch(e){console.log(e)}}}),(function(e,t,n){function i(e){var t=R.getPromise("RUM_FIRST_BEACON");return t?t.then(e):h.makeAsyncRequest("RUM_FIRST_BEACON",e)}function r(e){return p.isEmpty(e)?S.resolve():i((function(){return A.request({url:k,method:"POST",data:e}).then((function(e){return h.resolveRequest("RUM_FIRST_BEACON",e),e}))["catch"]((function(e){throw I.error("POST to client-rum failed:",e),h.rejectRequest("RUM_FIRST_BEACON",e),e}))}))}function a(){var e=E.getCurrentScript();if(e)return e.src}function o(){var e={id:N.getRumId(),v:F,account:O.getAccountId(),project:O.getSnippetId()||O.getProjectId(),snippet:O.getSnippetId(),revision:O.getRevision(),clientVersion:"0.91.0",hasSlave:!1,wxhr:!0};try{e["numBehaviorEvents"]=v.getEvents().length}catch(e){I.debug("Unable to get behavior events for RUM:",e)}p.extend(e,s(),l()),m.dispatch(w.SET_RUM_DATA,{data:e})}function s(){var e=T.getGlobal("performance");if(e){var t,n=N.getScriptSrc();try{if(n){I.debug("Using derived script src: ",n);var i=e.getEntriesByName(n);i.length>0&&(t=i[0])}if(!t){var r=/\/\/[^.]+\.optimizely\.(com|test)\/(js|api\/client)\/[\d]+\.js/gi;I.debug("Scanning resource timing entries with regex");var a=e.getEntriesByType("resource");t=p.find(a,(function(e){return r.test(e.name)}))}if(t)return p.mapValues(b.ResourceTimingAttributes,(function(e,n){return Math.round(1e3*(t[n]||0))/1e3}))}catch(e){return}}}function u(){try{return!E.querySelector("body")}catch(e){return null}}function c(){try{T.getGlobal("requestAnimationFrame")((function(){var e=N.getRumData().timebase;m.dispatch(w.SET_RUM_DATA,{data:{render:_.now()-(e||0)}})}))}catch(e){return}}function l(){return C.getDurationsFor(p.values(b.RUMPerformanceTimingAttributes))}function d(){var e={numKeys:y.allKeys().length,sizeKeys:y.allKeys().toString().length,sizeValues:y.allValues().toString().length},t=T.getGlobal("performance"),n=t?t.timing:{},i=C.getMarks()||{},a=N.getApiData(),o=N.getDOMObservationData(),s=V.get("state").getActiveExperimentIds(),u={apiCalls:a,DOMObservationData:o,paintTimings:f(),activeExperimentIds:s,numPages:L.getNumberOfPages()},c=T.getGlobal("Prototype");c&&!p.isUndefined(c.Version)&&(u.prototypeJS=c.Version);var l=!1;l=!0;var d=P.getFrames();d.length&&(u.xdFramesLoaded=d.length);var g={id:N.getRumId(),v:F,project:O.getSnippetId()||O.getProjectId(),lsMetrics:e,navigationTimings:n,userTimings:i,xd:l,apis:p.keys(a),extras:u};r(g)}function f(){var e=T.getGlobal("performance");if(e)try{var t=e.getEntriesByType("paint");if(p.isEmpty(t))return;return p.reduce(t,(function(e,t){return e[t.name]=Math.round(t.startTime),e}),{})}catch(e){return}}var p=n(2),g=n(5),h=n(6),v=n(68),_=n(21),E=n(77),m=n(9),y=n(78).LocalStorage,I=n(20),S=n(12).Promise,T=n(36),A=n(86),w=n(7),b=n(22),D=n(16),R=D.get("stores/async_request"),O=D.get("stores/global"),N=D.get("stores/rum"),C=D.get("stores/performance"),P=D.get("stores/xdomain"),L=D.get("stores/view_data"),V=n(88),k="https://rum.optimizely.com/rum",x=3e3,F="1.0",M=.003;t.initialize=function(){var e=g.generate().replace(/-/g,""),t=Math.random()<M;t&&(m.dispatch(w.SET_RUM_DATA,{id:e,RumHost:k,inRumSample:t,src:a(),data:{id:e,sync:u(),timebase:_.now(),sampleRate:M}}),c())},t.queuePayload=function(){return N.getSampleRum()?(E.isLoaded()?setTimeout(d,x):T.addEventListener("load",d),new S(function(e,t){setTimeout((function(){o();var n=N.getRumData();n=p.pickBy(n,(function(e){return!p.isUndefined(e)})),r(n).then(e,t)}),x)}).catch((function(e){I.warn("RUM / Error sending data:",e)}))):S.resolve()}}),(function(e,t,n){e.exports=n(3)._.noConflict()}),(function(e,t,n){(function(e,n){(function(){function i(e,t){return e.set(t[0],t[1]),e}function r(e,t){return e.add(t),e}function a(e,t){return u(De(e),pn)}function o(e,t){return!!e.length&&f(e,t,0)>-1}function s(e,t,n){for(var i=-1,r=e.length;++i<r;)if(n(t,e[i]))return!0;return!1}function u(e,t){for(var n=-1,i=t.length,r=e.length;++n<i;)e[r+n]=t[n];return e}function c(e,t,n){for(var i=-1,r=e.length;++i<r;){var a=e[i],o=t(a);if(null!=o&&(s===An?o===o:n(o,s)))var s=o,u=a}return u}function l(e,t,n,i){var r;return n(e,(function(e,n,a){if(t(e,n,a))return r=i?n:e,!1})),r}function d(e,t,n){for(var i=e.length,r=n?i:-1;n?r--:++r<i;)if(t(e[r],r,e))return r;return-1}function f(e,t,n){if(t!==t)return y(e,n);for(var i=n-1,r=e.length;++i<r;)if(e[i]===t)return i;return-1}function p(e,t,n,i,r){return r(e,(function(e,r,a){n=i?(i=!1,e):t(n,e,r,a)})),n}function g(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}function h(e){return function(t){return e(t)}}function v(e,t){return me(t,(function(t){return e[t]}))}function _(e){return e&&e.Object===Object?e:null}function E(e,t){if(e!==t){var n=null===e,i=e===An,r=e===e,a=null===t,o=t===An,s=t===t;if(e>t&&!a||!r||n&&!o&&s||i&&s)return 1;if(e<t&&!n||!s||a&&!i&&r||o&&r)return-1}return 0}function m(e){return gi[e]}function y(e,t,n){for(var i=e.length,r=t+(n?0:-1);n?r--:++r<i;){var a=e[r];if(a!==a)return r}return-1}function I(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function S(e,t){return e="number"==typeof e||di.test(e)?+e:-1,t=null==t?Vn:t,e>-1&&e%1==0&&e<t}function T(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}function A(e){var t=-1,n=Array(e.size);return e.forEach((function(e,i){n[++t]=[i,e]})),n}function w(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}function b(e){if(jt(e)&&!dr(e)){if(e instanceof D)return e;if(Di.call(e,"__wrapped__"))return tt(e)}return new D(e)}function D(e,t){this.e=e,this.t=[],this.i=!!t}function R(){}function O(e,t){return C(e,t)&&delete e[t]}function N(e,t){if(Wi){var n=e[t];return n===Rn?An:n}return Di.call(e,t)?e[t]:An}function C(e,t){return Wi?e[t]!==An:Di.call(e,t)}function P(e,t,n){e[t]=Wi&&n===An?Rn:n}function L(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function V(){this.a={hash:new R,map:Ki?new Ki:[],string:new R}}function k(e){var t=this.a;return Ze(e)?O("string"==typeof e?t.string:t.hash,e):Ki?t.map["delete"](e):X(t.map,e)}function x(e){var t=this.a;return Ze(e)?N("string"==typeof e?t.string:t.hash,e):Ki?t.map.get(e):W(t.map,e)}function F(e){var t=this.a;return Ze(e)?C("string"==typeof e?t.string:t.hash,e):Ki?t.map.has(e):Q(t.map,e)}function M(e,t){var n=this.a;return Ze(e)?P("string"==typeof e?n.string:n.hash,e,t):Ki?n.map.set(e,t):J(n.map,e,t),this}function U(e){var t=-1,n=e?e.length:0;for(this.a=new L;++t<n;)this.push(e[t])}function G(e,t){var n=e.a;if(Ze(t)){var i=n.a,r="string"==typeof t?i.string:i.hash;return r[t]===Rn}return n.has(t)}function B(e){var t=this.a;if(Ze(e)){var n=t.a,i="string"==typeof e?n.string:n.hash;i[e]=Rn}else t.set(e,Rn)}function z(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function j(){this.a={array:[],map:null}}function H(e){var t=this.a,n=t.array;return n?X(n,e):t.map["delete"](e)}function Y(e){var t=this.a,n=t.array;return n?W(n,e):t.map.get(e)}function K(e){var t=this.a,n=t.array;return n?Q(n,e):t.map.has(e)}function q(e,t){var n=this.a,i=n.array;i&&(i.length<bn-1?J(i,e,t):(n.array=null,n.map=new L(i)));var r=n.map;return r&&r.set(e,t),this}function X(e,t){var n=$(e,t);if(n<0)return!1;var i=e.length-1;return n==i?e.pop():zi.call(e,n,1),!0}function W(e,t){var n=$(e,t);return n<0?An:e[n][1]}function Q(e,t){return $(e,t)>-1}function $(e,t){for(var n=e.length;n--;)if(Nt(e[n][0],t))return n;return-1}function J(e,t,n){var i=$(e,t);i<0?e.push([t,n]):e[i][1]=n}function Z(e,t,n,i){return e===An||Nt(e,wi[n])&&!Di.call(i,n)?t:e}function ee(e,t,n){(n===An||Nt(e[t],n))&&("number"!=typeof t||n!==An||t in e)||(e[t]=n)}function te(e,t,n){var i=e[t];Di.call(e,t)&&Nt(i,n)&&(n!==An||t in e)||(e[t]=n)}function ne(e,t){return e&&ir(t,sn(t),e)}function ie(e){return"function"==typeof e?e:vn}function re(e,t,n,i,r,a,o){var s;if(i&&(s=a?i(e,r,a,o):i(e)),s!==An)return s;if(!zt(e))return e;var u=dr(e);if(u){if(s=We(e),!t)return De(e,s)}else{var c=Xe(e),l=c==Gn||c==Bn;if(fr(e))return Ne(e,t);if(c==Hn||c==kn||l&&!a){if(I(e))return a?e:{};if(s=Qe(l?{}:e),!t)return s=ne(s,e),n?Me(e,s):s}else{if(!pi[c])return a?e:{};s=$e(e,c,t)}}o||(o=new z);var d=o.get(e);return d?d:(o.set(e,s),(u?tr:fe)(e,(function(r,a){te(s,a,re(r,t,n,i,a,e,o))})),n&&!u?Me(e,s):s)}function ae(e){return zt(e)?Gi(e):{}}function oe(e,t,n){if("function"!=typeof e)throw new TypeError(Dn);return setTimeout((function(){e.apply(An,n)}),t)}function se(e,t,n,i){var r=-1,a=o,u=!0,c=e.length,l=[],d=t.length;if(!c)return l;n&&(t=me(t,h(n))),i?(a=s,u=!1):t.length>=bn&&(a=G,u=!1,t=new U(t));e:for(;++r<c;){var f=e[r],p=n?n(f):f;if(u&&p===p){for(var g=d;g--;)if(t[g]===p)continue e;l.push(f)}else a(t,p,i)||l.push(f)}return l}function ue(e,t){var n=!0;return tr(e,(function(e,i,r){return n=!!t(e,i,r)})),n}function ce(e,t){var n=[];return tr(e,(function(e,i,r){t(e,i,r)&&n.push(e)})),n}function le(e,t,n,i){i||(i=[]);for(var r=-1,a=e.length;++r<a;){var o=e[r];t>0&&Vt(o)&&(n||dr(o)||Pt(o))?t>1?le(o,t-1,n,i):u(i,o):n||(i[i.length]=o)}return i}function de(e,t){return null==e?e:nr(e,t,un)}function fe(e,t){return e&&nr(e,t,sn)}function pe(e,t){return ce(t,(function(t){return Gt(e[t])}))}function ge(e,t,n,i,r){return e===t||(null==e||null==t||!zt(e)&&!jt(t)?e!==e&&t!==t:he(e,t,ge,n,i,r))}function he(e,t,n,i,r,a){var o=dr(e),s=dr(t),u=xn,c=xn;o||(u=Ni.call(e),u=u==kn?Hn:u),s||(c=Ni.call(t),c=c==kn?Hn:c);var l=u==Hn&&!I(e),d=c==Hn&&!I(t),f=u==c;a||(a=[]);var p=vt(a,(function(t){return t[0]===e}));if(p&&p[1])return p[1]==t;if(a.push([e,t]),f&&!l){var g=o||$t(e)?He(e,t,n,i,r,a):Ye(e,t,u,n,i,r,a);return a.pop(),g}if(!(r&Pn)){var h=l&&Di.call(e,"__wrapped__"),v=d&&Di.call(t,"__wrapped__");if(h||v){var g=n(h?e.value():e,v?t.value():t,i,r,a);return a.pop(),g}}if(!f)return!1;var g=Ke(e,t,n,i,r,a);return a.pop(),g}function ve(e){var t=typeof e;return"function"==t?e:null==e?vn:("object"==t?ye:we)(e)}function _e(e){return Hi(Object(e))}function Ee(e){e=null==e?e:Object(e);var t=[];for(var n in e)t.push(n);return t}function me(e,t){var n=-1,i=Lt(e)?Array(e.length):[];return tr(e,(function(e,r,a){i[++n]=t(e,r,a)})),i}function ye(e){var t=sn(e);return function(n){var i=t.length;if(null==n)return!i;for(n=Object(n);i--;){var r=t[i];if(!(r in n&&ge(e[r],n[r],An,Cn|Pn)))return!1}return!0}}function Ie(e,t,n,i,r){if(e!==t){var a=dr(t)||$t(t)?An:un(t);tr(a||t,(function(o,s){if(a&&(s=o,o=t[s]),zt(o))r||(r=new z),Se(e,t,s,n,Ie,i,r);else{var u=i?i(e[s],o,s+"",e,t,r):An;u===An&&(u=o),ee(e,s,u)}}))}}function Se(e,t,n,i,r,a,o){var s=e[n],u=t[n],c=o.get(u);if(c)return void ee(e,n,c);var l=a?a(s,u,n+"",e,t,o):An,d=l===An;d&&(l=u,dr(u)||$t(u)?dr(s)?l=s:Vt(s)?l=De(s):(d=!1,l=re(u,!a)):Xt(u)||Pt(u)?Pt(s)?l=tn(s):!zt(s)||i&&Gt(s)?(d=!1,l=re(u,!a)):l=s:d=!1),o.set(u,l),d&&r(l,u,i,a,o),o["delete"](u),ee(e,n,l)}function Te(e,t){return e=Object(e),yt(t,(function(t,n){return n in e&&(t[n]=e[n]),t}),{})}function Ae(e,t){var n={};return de(e,(function(e,i){t(e,i)&&(n[i]=e)})),n}function we(e){return function(t){return null==t?An:t[e]}}function be(e,t,n){var i=-1,r=e.length;t<0&&(t=-t>r?0:r+t),n=n>r?r:n,n<0&&(n+=r),r=t>n?0:n-t>>>0,t>>>=0;for(var a=Array(r);++i<r;)a[i]=e[i+t];return a}function De(e){return be(e,0,e.length)}function Re(e,t){var n;return tr(e,(function(e,i,r){return n=t(e,i,r),!n})),!!n}function Oe(e,t){var n=e;return yt(t,(function(e,t){return t.func.apply(t.thisArg,u([e],t.args))}),n)}function Ne(e,t){if(t)return e.slice();var n=new e.constructor(e.length);return e.copy(n),n}function Ce(e){var t=new e.constructor(e.byteLength);return new xi(t).set(new xi(e)),t}function Pe(e){return yt(A(e),i,new e.constructor)}function Le(e){var t=new e.constructor(e.source,ci.exec(e));return t.lastIndex=e.lastIndex,t}function Ve(e){return yt(w(e),r,new e.constructor)}function ke(e){return er?Object(er.call(e)):{}}function xe(e,t){var n=t?Ce(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function Fe(e,t,n,i){n||(n={});for(var r=-1,a=t.length;++r<a;){var o=t[r],s=i?i(n[o],e[o],o,n,e):e[o];te(n,o,s)}return n}function Me(e,t){return ir(e,ar(e),t)}function Ue(e){return Dt((function(t,n){var i=-1,r=n.length,a=r>1?n[r-1]:An;for(a="function"==typeof a?(r--,a):An,t=Object(t);++i<r;){var o=n[i];o&&e(t,o,i,a)}return t}))}function Ge(e,t){return function(n,i){if(null==n)return n;if(!Lt(n))return e(n,i);for(var r=n.length,a=t?r:-1,o=Object(n);(t?a--:++a<r)&&i(o[a],a,o)!==!1;);return n}}function Be(e){return function(t,n,i){for(var r=-1,a=Object(t),o=i(t),s=o.length;s--;){var u=o[e?s:++r];if(n(a[u],u,a)===!1)break}return t}}function ze(e){return function(){var t=arguments,n=ae(e.prototype),i=e.apply(n,t);return zt(i)?i:n}}function je(e,t,n,i){function r(){for(var t=-1,s=arguments.length,u=-1,c=i.length,l=Array(c+s),d=this&&this!==Ti&&this instanceof r?o:e;++u<c;)l[u]=i[u];for(;s--;)l[u++]=arguments[++t];return d.apply(a?n:this,l)}if("function"!=typeof e)throw new TypeError(Dn);var a=t&On,o=ze(e);return r}function He(e,t,n,i,r,a){var o=-1,s=r&Pn,u=r&Cn,c=e.length,l=t.length;if(c!=l&&!(s&&l>c))return!1;for(var d=!0;++o<c;){var f,p=e[o],g=t[o];if(f!==An){if(f)continue;d=!1;break}if(u){if(!Re(t,(function(e){return p===e||n(p,e,i,r,a)}))){d=!1;break}}else if(p!==g&&!n(p,g,i,r,a)){d=!1;break}}return d}function Ye(e,t,n,i,r,a,o){switch(n){case Fn:case Mn:return+e==+t;case Un:return e.name==t.name&&e.message==t.message;case jn:return e!=+e?t!=+t:e==+t;case Yn:case qn:return e==t+""}return!1}function Ke(e,t,n,i,r,a){var o=r&Pn,s=sn(e),u=s.length,c=sn(t),l=c.length;if(u!=l&&!o)return!1;for(var d=u;d--;){var f=s[d];if(!(o?f in t:Di.call(t,f)))return!1}for(var p=!0,g=o;++d<u;){f=s[d];var h,v=e[f],_=t[f];if(!(h===An?v===_||n(v,_,i,r,a):h)){p=!1;break}g||(g="constructor"==f)}if(p&&!g){var E=e.constructor,m=t.constructor;E!=m&&"constructor"in e&&"constructor"in t&&!("function"==typeof E&&E instanceof E&&"function"==typeof m&&m instanceof m)&&(p=!1)}return p}function qe(e,t){var n=e[t];return Yt(n)?n:An}function Xe(e){return Ni.call(e)}function We(e){var t=e.length,n=e.constructor(t);return t&&"string"==typeof e[0]&&Di.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function Qe(e){return"function"!=typeof e.constructor||et(e)?{}:ae(Mi(e))}function $e(e,t,n){var i=e.constructor;switch(t){case Qn:return Ce(e);case Fn:case Mn:return new i(+e);case $n:case Jn:case Zn:case ei:case ti:case ni:case ii:case ri:case ai:return xe(e,n);case zn:return Pe(e);case jn:case qn:return new i(e);case Yn:return Le(e);case Kn:return Ve(e);case Xn:return ke(e)}}function Je(e){var t=e?e.length:An;return Bt(t)&&(dr(e)||Qt(e)||Pt(e))?g(t,String):null}function Ze(e){var t=typeof e;return"number"==t||"boolean"==t||"string"==t&&"__proto__"!=e||null==e}function et(e){var t=e&&e.constructor,n="function"==typeof t&&t.prototype||wi;return e===n}function tt(e){var t=new D(e.e,e.i);return t.t=De(e.t),t}function nt(e){return ce(e,Boolean)}function it(e,t){return e&&e.length?d(e,ve(t,3)):-1}function rt(e){var t=e?e.length:0;return t?le(e,1):[]}function at(e){var t=e?e.length:0;return t?le(e,Ln):[]}function ot(e){return e?e[0]:An}function st(e,t,n){var i=e?e.length:0;n="number"==typeof n?n<0?Yi(i+n,0):n:0;for(var r=(n||0)-1,a=t===t;++r<i;){var o=e[r];if(a?o===t:o!==o)return r}return-1}function ut(e){var t=e?e.length:0;return t?e[t-1]:An}function ct(e,t,n){var i=e?e.length:0;return t=null==t?0:+t,n=n===An?i:+n,i?be(e,t,n):[]}function lt(e){var t=b(e);return t.i=!0,t}function dt(e,t){return t(e),e}function ft(e,t){return t(e)}function pt(){return Oe(this.e,this.t)}function gt(e,t,n){return t=n?An:t,ue(e,ve(t))}function ht(e,t){return ce(e,ve(t))}function vt(e,t){return l(e,ve(t),tr)}function _t(e,t){return tr(e,ie(t))}function Et(e,t,n,i){e=Lt(e)?e:pn(e),n=n&&!i?pr(n):0;var r=e.length;return n<0&&(n=Yi(r+n,0)),Qt(e)?n<=r&&e.indexOf(t,n)>-1:!!r&&f(e,t,n)>-1}function mt(e,t){return me(e,ve(t))}function yt(e,t,n){return p(e,ve(t),n,arguments.length<3,tr)}function It(e){return null==e?0:(e=Lt(e)?e:sn(e),e.length)}function St(e,t,n){return t=n?An:t,Re(e,ve(t))}function Tt(e,t){var n=0;return t=ve(t),me(me(e,(function(e,i,r){return{value:e,index:n++,criteria:t(e,i,r)}})).sort((function(e,t){return E(e.criteria,t.criteria)||e.index-t.index})),we("value"))}function At(e,t){var n;if("function"!=typeof t)throw new TypeError(Dn);return e=pr(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=An),n}}function wt(e){if("function"!=typeof e)throw new TypeError(Dn);return function(){return!e.apply(this,arguments)}}function bt(e){return At(2,e)}function Dt(e,t){if("function"!=typeof e)throw new TypeError(Dn);return t=Yi(t===An?e.length-1:pr(t),0),function(){for(var n=arguments,i=-1,r=Yi(n.length-t,0),a=Array(r);++i<r;)a[i]=n[t+i];var o=Array(t+1);for(i=-1;++i<t;)o[i]=n[i];return o[t]=a,e.apply(this,o)}}function Rt(e){return zt(e)?dr(e)?De(e):ir(e,sn(e)):e}function Ot(e){return re(e,!0,!0)}function Nt(e,t){return e===t||e!==e&&t!==t}function Ct(e,t){return e>t}function Pt(e){return Vt(e)&&Di.call(e,"callee")&&(!Bi.call(e,"callee")||Ni.call(e)==kn)}function Lt(e){return null!=e&&Bt(rr(e))&&!Gt(e)}function Vt(e){return jt(e)&&Lt(e)}function kt(e){return e===!0||e===!1||jt(e)&&Ni.call(e)==Fn}function xt(e){return jt(e)&&Ni.call(e)==Mn}function Ft(e){if(Lt(e)&&(dr(e)||Qt(e)||Gt(e.splice)||Pt(e)))return!e.length;for(var t in e)if(Di.call(e,t))return!1;return!0}function Mt(e,t){return ge(e,t)}function Ut(e){return"number"==typeof e&&ji(e)}function Gt(e){var t=zt(e)?Ni.call(e):"";return t==Gn||t==Bn}function Bt(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=Vn}function zt(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function jt(e){return!!e&&"object"==typeof e}function Ht(e){return qt(e)&&e!=+e}function Yt(e){return null!=e&&(Gt(e)?Pi.test(bi.call(e)):jt(e)&&(I(e)?Pi:li).test(e))}function Kt(e){return null===e}function qt(e){return"number"==typeof e||jt(e)&&Ni.call(e)==jn}function Xt(e){if(!jt(e)||Ni.call(e)!=Hn||I(e))return!1;var t=Mi(e);if(null===t)return!0;var n=t.constructor;return"function"==typeof n&&n instanceof n&&bi.call(n)==Oi}function Wt(e){return zt(e)&&Ni.call(e)==Yn}function Qt(e){return"string"==typeof e||!dr(e)&&jt(e)&&Ni.call(e)==qn}function $t(e){return jt(e)&&Bt(e.length)&&!!fi[Ni.call(e)]}function Jt(e){return e===An}function Zt(e,t){return e<t}function en(e){return Lt(e)?e.length?De(e):[]:pn(e)}function tn(e){return ir(e,un(e))}function nn(e){return"string"==typeof e?e:null==e?"":e+""}function rn(e,t){var n=ae(e);return t?hr(n,t):n}function an(e,t){return e&&fe(e,ie(t))}function on(e,t){return null!=e&&Di.call(e,t)}function sn(e){var t=et(e);if(!t&&!Lt(e))return _e(e);var n=Je(e),i=!!n,r=n||[],a=r.length;for(var o in e)!Di.call(e,o)||i&&("length"==o||S(o,a))||t&&"constructor"==o||r.push(o);return r}function un(e){for(var t=-1,n=et(e),i=Ee(e),r=i.length,a=Je(e),o=!!a,s=a||[],u=s.length;++t<r;){var c=i[t];o&&("length"==c||S(c,u))||"constructor"==c&&(n||!Di.call(e,c))||s.push(c)}return s}function cn(e,t){var n={};return t=ve(t,3),fe(e,(function(e,i,r){n[i]=t(e,i,r)})),n}function ln(e,t){return t=ve(t),Ae(e,(function(e,n){return!t(e,n)}))}function dn(e,t){return null==e?{}:Ae(e,ve(t))}function fn(e,t,n){var i=null==e?An:e[t];return i===An&&(i=n),Gt(i)?i.call(e):i}function pn(e){return e?v(e,sn(e)):[]}function gn(e){return e=nn(e),e&&si.test(e)?e.replace(oi,m):e}function hn(e){return function(){return e}}function vn(e){return e}function _n(e){return ye(hr({},e))}function En(e,t,n){var i=sn(t),r=pe(t,i);null!=n||zt(t)&&(r.length||!i.length)||(n=t,t=e,e=this,r=pe(t,sn(t)));var a=!(zt(n)&&"chain"in n)||n.chain,o=Gt(e);return tr(r,(function(n){var i=t[n];e[n]=i,o&&(e.prototype[n]=function(){var t=this.i;if(a||t){var n=e(this.e),r=n.t=De(this.t);return r.push({func:i,args:arguments,thisArg:e}),n.i=t,n}return i.apply(e,u([this.value()],arguments))})})),e}function mn(){return Ti._===this&&(Ti._=Ci),this}function yn(){}function In(e){var t=++Ri;return nn(e)+t}function Sn(e){return e&&e.length?c(e,vn,Ct):An}function Tn(e){return e&&e.length?c(e,vn,Zt):An}var An,wn="4.6.1",bn=200,Dn="Expected a function",Rn="__lodash_hash_undefined__",On=1,Nn=32,Cn=1,Pn=2,Ln=1/0,Vn=9007199254740991,kn="[object Arguments]",xn="[object Array]",Fn="[object Boolean]",Mn="[object Date]",Un="[object Error]",Gn="[object Function]",Bn="[object GeneratorFunction]",zn="[object Map]",jn="[object Number]",Hn="[object Object]",Yn="[object RegExp]",Kn="[object Set]",qn="[object String]",Xn="[object Symbol]",Wn="[object WeakMap]",Qn="[object ArrayBuffer]",$n="[object Float32Array]",Jn="[object Float64Array]",Zn="[object Int8Array]",ei="[object Int16Array]",ti="[object Int32Array]",ni="[object Uint8Array]",ii="[object Uint8ClampedArray]",ri="[object Uint16Array]",ai="[object Uint32Array]",oi=/[&<>"'`]/g,si=RegExp(oi.source),ui=/[\\^$.*+?()[\]{}|]/g,ci=/\w*$/,li=/^\[object .+?Constructor\]$/,di=/^(?:0|[1-9]\d*)$/,fi={};fi[$n]=fi[Jn]=fi[Zn]=fi[ei]=fi[ti]=fi[ni]=fi[ii]=fi[ri]=fi[ai]=!0,fi[kn]=fi[xn]=fi[Qn]=fi[Fn]=fi[Mn]=fi[Un]=fi[Gn]=fi[zn]=fi[jn]=fi[Hn]=fi[Yn]=fi[Kn]=fi[qn]=fi[Wn]=!1;var pi={};pi[kn]=pi[xn]=pi[Qn]=pi[Fn]=pi[Mn]=pi[$n]=pi[Jn]=pi[Zn]=pi[ei]=pi[ti]=pi[zn]=pi[jn]=pi[Hn]=pi[Yn]=pi[Kn]=pi[qn]=pi[Xn]=pi[ni]=pi[ii]=pi[ri]=pi[ai]=!0,pi[Un]=pi[Gn]=pi[Wn]=!1;var gi={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},hi={"function":!0,object:!0},vi=hi[typeof t]&&t&&!t.nodeType?t:An,_i=hi[typeof e]&&e&&!e.nodeType?e:An,Ei=_i&&_i.exports===vi?vi:An,mi=_(vi&&_i&&"object"==typeof n&&n),yi=_(hi[typeof self]&&self),Ii=_(hi[typeof window]&&window),Si=_(hi[typeof this]&&this),Ti=mi||Ii!==(Si&&Si.window)&&Ii||yi||Si||Function("return this")(),Ai=Array.prototype,wi=Object.prototype,bi=Function.prototype.toString,Di=wi.hasOwnProperty,Ri=0,Oi=bi.call(Object),Ni=wi.toString,Ci=Ti._,Pi=RegExp("^"+bi.call(Di).replace(ui,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Li=Ei?Ti.Buffer:An,Vi=Ti.Reflect,ki=Ti.Symbol,xi=Ti.Uint8Array,Fi=Vi?Vi.enumerate:An,Mi=Object.getPrototypeOf,Ui=Object.getOwnPropertySymbols,Gi=Object.create,Bi=wi.propertyIsEnumerable,zi=Ai.splice,ji=Ti.isFinite,Hi=Object.keys,Yi=Math.max,Ki=qe(Ti,"Map"),qi=qe(Ti,"Set"),Xi=qe(Ti,"WeakMap"),Wi=qe(Object,"create"),Qi=Ki?bi.call(Ki):"",$i=qi?bi.call(qi):"",Ji=Xi?bi.call(Xi):"",Zi=ki?ki.prototype:An,er=Zi?Zi.valueOf:An,tr=Ge(fe),nr=Be();Fi&&!Bi.call({valueOf:1},"valueOf")&&(Ee=function(e){return T(Fi(e))});var ir=Fe,rr=we("length"),ar=Ui||function(){return[]};(Ki&&Xe(new Ki)!=zn||qi&&Xe(new qi)!=Kn||Xi&&Xe(new Xi)!=Wn)&&(Xe=function(e){var t=Ni.call(e),n=t==Hn?e.constructor:null,i="function"==typeof n?bi.call(n):"";if(i)switch(i){case Qi:return zn;case $i:return Kn;case Ji:return Wn}return t});var or=Dt((function(e,t){return dr(e)||(e=null==e?[]:[Object(e)]),t=le(t,1),a(e,t)})),sr=Dt((function(e,t,n){return je(e,On|Nn,t,n)})),ur=Dt((function(e,t){return oe(e,1,t)})),cr=Dt((function(e,t,n){return oe(e,gr(t)||0,n)})),lr=Dt((function(e,t){return je(e,Nn,An,t)})),dr=Array.isArray,fr=Li?function(e){return e instanceof Li}:hn(!1),pr=Number,gr=Number,hr=Ue((function(e,t){ir(t,sn(t),e)})),vr=Ue((function(e,t){ir(t,un(t),e)})),_r=Ue((function(e,t,n,i){Fe(t,un(t),e,i)})),Er=Dt((function(e){return e.push(An,Z),_r.apply(An,e)})),mr=Ue((function(e,t,n){Ie(e,t,n)})),yr=Dt((function(e,t){return null==e?{}:(t=me(le(t,1),String),Te(e,se(un(e),t)))})),Ir=Dt((function(e,t){return null==e?{}:Te(e,le(t,1))})),Sr=ve;D.prototype=ae(b.prototype),D.prototype.constructor=D,R.prototype=Wi?Wi(null):wi,L.prototype.clear=V,L.prototype["delete"]=k,L.prototype.get=x,L.prototype.has=F,L.prototype.set=M,U.prototype.push=B,z.prototype.clear=j,z.prototype["delete"]=H,z.prototype.get=Y,z.prototype.has=K,z.prototype.set=q,b.assign=hr,b.assignIn=vr,b.before=At,b.bind=sr,b.chain=lt,b.compact=nt,b.concat=or,b.create=rn,b.defaults=Er,b.defer=ur,b.delay=cr,b.filter=ht,b.flatten=rt,b.flattenDeep=at,b.iteratee=Sr,b.keys=sn,b.map=mt,b.mapValues=cn,b.matches=_n,b.merge=mr,b.mixin=En,b.negate=wt,b.omit=yr,b.omitBy=ln,b.once=bt,b.partial=lr,b.pick=Ir,b.pickBy=dn,b.slice=ct,b.sortBy=Tt,b.tap=dt,b.thru=ft,b.toArray=en,b.values=pn,b.extend=vr,En(b,b),b.clone=Rt,b.cloneDeep=Ot,b.escape=gn,b.every=gt,b.find=vt,b.findIndex=it,b.forEach=_t,b.forOwn=an,b.has=on,b.head=ot,b.identity=vn,b.includes=Et,b.indexOf=st,b.isArguments=Pt,b.isArray=dr,b.isBoolean=kt,b.isDate=xt,b.isEmpty=Ft,b.isEqual=Mt,b.isFinite=Ut,b.isFunction=Gt,b.isNaN=Ht,b.isNull=Kt,b.isNumber=qt,b.isObject=zt,b.isRegExp=Wt,b.isString=Qt,b.isUndefined=Jt,b.last=ut,b.max=Sn,b.min=Tn,b.noConflict=mn,b.noop=yn,b.reduce=yt,b.result=fn,b.size=It,b.some=St,b.uniqueId=In,b.each=_t,b.first=ot,En(b,(function(){var e={};return fe(b,(function(t,n){Di.call(b.prototype,n)||(e[n]=t)})),e})(),{chain:!1}),b.VERSION=wn,tr(["pop","join","replace","reverse","split","push","shift","sort","splice","unshift"],(function(e){var t=(/^(?:replace|split)$/.test(e)?String.prototype:Ai)[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",i=/^(?:pop|join|replace|shift)$/.test(e);b.prototype[e]=function(){var e=arguments;return i&&!this.i?t.apply(this.value(),e):this[n]((function(n){return t.apply(n,e)}))}})),b.prototype.toJSON=b.prototype.valueOf=b.prototype.value=pt,(Ii||yi||{})._=b,vi&&_i&&(Ei&&((_i.exports=b)._=b),vi._=b)}).call(this)}).call(t,n(4)(e),(function(){return this})())}),(function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}}),(function(e,t){t.generate=function e(t){return t?(t^16*Math.random()>>t/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,e)}}),(function(e,t,n){var i=n(7),r=n(9),a=n(12).Promise,o=n(16),s=o.get("stores/async_request");t.makeAsyncRequest=function(e,t){var n=s.getPromise(e);if(n)return n;var o,u,c=new a(function(e,t){o=e,u=t});return r.dispatch(i.REGISTER_ASYNC_DEFERRED,{source:e,promise:c,resolver:o,rejecter:u}),t&&t(),c},t.resolveRequest=function(e,t){r.dispatch(i.RESOLVE_DEFERRED,{source:e,resolveWith:t})},t.rejectRequest=function(e,t){r.dispatch(i.REJECT_DEFERRED,{source:e,rejectWith:t})}}),(function(e,t,n){var i=n(8);e.exports=i({LOG:null,SET_LOGLEVEL:null,INITIALIZE_STATE:null,SET_DOMCONTENTLOADED:null,ACTIVATE:null,UPDATE_BEHAVIOR_STORE:null,DATA_LOADED:null,LOAD_PERSISTED_LAYER_STATES:null,RECORD_GLOBAL_DECISION:null,RECORD_LAYER_DECISION:null,ENSURE_ORIGINAL_PUSHSTATE:null,ENSURE_ORIGINAL_REPLACESTATE:null,SET_VISITOR_ATTRIBUTES:null,SET_VISITOR_ATTRIBUTE_PENDING:null,LOAD_EXISTING_VISITOR_PROFILE:null,SET_VISITOR_EVENTS:null,SET_FOREIGN_VISITOR_EVENTS:null,SET_FOREIGN_VISITOR_EVENT_QUEUE:null,SET_VISITOR_ID:null,REFRESH_SESSION:null,LOAD_SESSION_STATE:null,UPDATE_VARIATION_ID_MAP:null,MERGE_VARIATION_ID_MAP:null,UPDATE_PREFERRED_LAYER_MAP:null,MERGE_PREFERRED_LAYER_MAP:null,RECORD_LAYER_DECISION_EVENT_ID:null,TRACK_VIEW_ACTIVATED_EVENT:null,REGISTER_ASYNC_DEFERRED:null,RESOLVE_DEFERRED:null,REJECT_DEFERRED:null,REGISTER_PLUGIN:null,ADD_CLEANUP_FN:null,CLEAR_CLEANUP_FN:null,ACTION_EXECUTED:null,REGISTER_ACTION:null,SET_VIEW_ACTIVE_STATE:null,UPDATE_PARSED_VIEW_METADATA:null,UPDATE_USER_SUPPLIED_METADATA:null,REGISTER_VIEWS:null,SET_GLOBAL_TAGS:null,SET_VIEW_BATCHING:null,ATTACH_EVENT_STREAM_PUBLISHERS:null,DETACH_EVENT_STREAM_PUBLISHERS:null,LOAD_DIRECTIVE:null,SET_COOKIE_AGE:null,SET_COOKIE_DOMAIN:null,XDOMAIN_SET_DEFAULT_FRAME:null,XDOMAIN_ADD_FRAME:null,XDOMAIN_SET_MESSAGE:null,XDOMAIN_ADD_SUBSCRIBER:null,XDOMAIN_SET_CANONICAL_ORIGINS:null,XDOMAIN_SET_DISABLED:null,ADD_EMITTER_HANDLER:null,REMOVE_EMITTER_HANDLER:null,SET_INTEGRATION_SETTINGS:null,ADD_CHANGE:null,SET_CHANGE_APPLIER:null,REMOVE_ACTION_STATE:null,ANNOUNCE_PENDING_REDIRECT:null,LOAD_REDIRECT_DATA:null,REGISTER_TRACKED_REDIRECT_DATA:null,SET_PENDING_EVENT:null,REMOVE_PENDING_EVENT:null,LOAD_PENDING_EVENTS:null,SANDBOXED_FUNCTIONS_ADDED:null,SET_RUM_DATA:null,RECORD_API_USAGE:null,RECORD_DOM_OBSERVATION_OCCURENCE:null,SET_PERFORMANCE_MARKS_DATA:null,FINALIZE_BATCH_SNAPSHOT:null,REGISTER_PREVIOUS_BATCH:null,REGISTER_TRACKER_VISITOR:null,REGISTER_TRACKER_EVENT:null,REGISTER_TRACKER_DECISION:null,RESET_TRACKER_EVENTS:null,RESET_TRACKER_PREVIOUS_BATCHES:null,RESET_TRACKER_STORE:null,SET_TRACKER_POLLING:null,SET_TRACKER_BATCHING:null,SET_TRACKER_SEND_EVENTS:null,SET_TRACKER_PERSISTABLE_STATE:null,SET_TRACKER_DIRTY:null,UPDATE_TRACKER_VISITOR_ATTRIBUTES:null,SET_UA_DATA:null})}),(function(e,t){"use strict";var n=function(e){var t,n={};if(!(e instanceof Object)||Array.isArray(e))throw new Error("keyMirror(...): Argument must be an object.");for(t in e)e.hasOwnProperty(t)&&(n[t]=t);return n};e.exports=n}),(function(e,t,n){var i=n(10);e.exports=i.create()}),(function(e,t,n){function i(e){e=e||{},this.u={},this.l={},this.d=0,this.f=[],this.g=[]}function r(e,t){return function(){var n=e.indexOf(t);n!==-1&&e.splice(n,1)}}var a=n(2),o=n(11);i.prototype.registerStores=function(e){a.forOwn(e,a.bind((function(e,t){this.u[t]=new o(t,this,e)}),this))},i.prototype.getStore=function(e){return this.u[e]},i.prototype.dispatch=function(e,t){this.dispatchId++,a.each(this.f,a.bind((function(n){n.call(this,e,t)}),this)),a.forOwn(this.u,(function(n){n.h(e,t)})),a.each(this.g,a.bind((function(n){n.call(this,e,t)}),this)),a.forOwn(this.u,a.bind((function(e,t){e.hasChanges()&&this.l[t]&&(e.resetChange(),a.each(this.l[t],(function(t){t(e)})))}),this))},i.prototype.reset=function(){
this.l={},a.forOwn(this.u,(function(e,t){e.I()}))},i.prototype.getState=function(){var e={};return a.forOwn(this.u,(function(t,n){e[n]=t.S()})),e},i.prototype.onPreAction=function(e){var t=this.f;return t.push(e),r(t,e)},i.prototype.onPostAction=function(e){var t=this.g;return t.push(e),r(t,e)},i.prototype.T=function(e,t){this.l[e]||(this.l[e]=[]),this.l[e].push(t);var n=this.l[e];return r(n,t)},e.exports={create:function(e){return new i(e)}}}),(function(e,t,n){function i(e,t,n){this.A=e,this.w=t,this.b=0,this.D=!1,this.R={},r.extend(this,n),this.O={},this.initialize&&this.initialize()}var r=n(2);i.prototype.h=function(e,t){var n=this.R[e];n&&"function"==typeof n&&n.call(this,t,e)},i.prototype.S=function(){return r.cloneDeep(this.O)},i.prototype.on=function(e,t){this.R[e]=r.bind(t,this)},i.prototype.observe=function(e){return this.w.T(this.A,e)},i.prototype.emitChange=function(){this.D=!0,this.b++},i.prototype.hasChanges=function(){return this.D},i.prototype.resetChange=function(){this.D=!1},i.prototype.getStateId=function(){return this.b},i.prototype.I=function(){this.reset&&"function"==typeof this.reset&&this.reset(),this.initialize()},e.exports=i}),(function(e,t,n){e.exports=n(13)}),(function(e,t,n){(function(t,i){/*!
	 * @overview es6-promise - a tiny implementation of Promises/A+.
	 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
	 * @license   Licensed under MIT license
	 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
	 * @version   4.1.0
	 */
!(function(t,n){e.exports=n()})(this,(function(){"use strict";function e(e){return"function"==typeof e||"object"==typeof e&&null!==e}function r(e){return"function"==typeof e}function a(e){W=e}function o(e){Q=e}function s(){return function(){return t.nextTick(f)}}function u(){return"undefined"!=typeof X?function(){X(f)}:d()}function c(){var e=0,t=new Z(f),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}function l(){var e=new MessageChannel;return e.port1.onmessage=f,function(){return e.port2.postMessage(0)}}function d(){var e=setTimeout;return function(){return e(f,1)}}function f(){for(var e=0;e<q;e+=2){var t=ne[e],n=ne[e+1];t(n),ne[e]=void 0,ne[e+1]=void 0}q=0}function p(){try{var e=n(15);return X=e.runOnLoop||e.runOnContext,u()}catch(e){return d()}}function g(e,t){var n=arguments,i=this,r=new this.constructor(v);void 0===r[re]&&k(r);var a=i._state;return a?!(function(){var e=n[a-1];Q((function(){return P(a,r,e,i._result)}))})():R(i,r,e,t),r}function h(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var n=new t(v);return A(n,e),n}function v(){}function _(){return new TypeError("You cannot resolve a promise with itself")}function E(){return new TypeError("A promises callback cannot return that same promise.")}function m(e){try{return e.then}catch(e){return ue.error=e,ue}}function y(e,t,n,i){try{e.call(t,n,i)}catch(e){return e}}function I(e,t,n){Q((function(e){var i=!1,r=y(n,t,(function(n){i||(i=!0,t!==n?A(e,n):b(e,n))}),(function(t){i||(i=!0,D(e,t))}),"Settle: "+(e._label||" unknown promise"));!i&&r&&(i=!0,D(e,r))}),e)}function S(e,t){t._state===oe?b(e,t._result):t._state===se?D(e,t._result):R(t,void 0,(function(t){return A(e,t)}),(function(t){return D(e,t)}))}function T(e,t,n){t.constructor===e.constructor&&n===g&&t.constructor.resolve===h?S(e,t):n===ue?(D(e,ue.error),ue.error=null):void 0===n?b(e,t):r(n)?I(e,t,n):b(e,t)}function A(t,n){t===n?D(t,_()):e(n)?T(t,n,m(n)):b(t,n)}function w(e){e._onerror&&e._onerror(e._result),O(e)}function b(e,t){e._state===ae&&(e._result=t,e._state=oe,0!==e._subscribers.length&&Q(O,e))}function D(e,t){e._state===ae&&(e._state=se,e._result=t,Q(w,e))}function R(e,t,n,i){var r=e._subscribers,a=r.length;e._onerror=null,r[a]=t,r[a+oe]=n,r[a+se]=i,0===a&&e._state&&Q(O,e)}function O(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var i=void 0,r=void 0,a=e._result,o=0;o<t.length;o+=3)i=t[o],r=t[o+n],i?P(n,i,r,a):r(a);e._subscribers.length=0}}function N(){this.error=null}function C(e,t){try{return e(t)}catch(e){return ce.error=e,ce}}function P(e,t,n,i){var a=r(n),o=void 0,s=void 0,u=void 0,c=void 0;if(a){if(o=C(n,i),o===ce?(c=!0,s=o.error,o.error=null):u=!0,t===o)return void D(t,E())}else o=i,u=!0;t._state!==ae||(a&&u?A(t,o):c?D(t,s):e===oe?b(t,o):e===se&&D(t,o))}function L(e,t){try{t((function(t){A(e,t)}),(function(t){D(e,t)}))}catch(t){D(e,t)}}function V(){return le++}function k(e){e[re]=le++,e._state=void 0,e._result=void 0,e._subscribers=[]}function x(e,t){this._instanceConstructor=e,this.promise=new e(v),this.promise[re]||k(this.promise),K(t)?(this._input=t,this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?b(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&b(this.promise,this._result))):D(this.promise,F())}function F(){return new Error("Array Methods must be provided an Array")}function M(e){return new x(this,e).promise}function U(e){var t=this;return new t(K(e)?function(n,i){for(var r=e.length,a=0;a<r;a++)t.resolve(e[a]).then(n,i)}:function(e,t){return t(new TypeError("You must pass an array to race."))})}function G(e){var t=this,n=new t(v);return D(n,e),n}function B(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function z(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function j(e){this[re]=V(),this._result=this._state=void 0,this._subscribers=[],v!==e&&("function"!=typeof e&&B(),this instanceof j?L(this,e):z())}function H(){var e=void 0;if("undefined"!=typeof i)e=i;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var n=null;try{n=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===n&&!t.cast)return}e.Promise=j}var Y=void 0;Y=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var K=Y,q=0,X=void 0,W=void 0,Q=function(e,t){ne[q]=e,ne[q+1]=t,q+=2,2===q&&(W?W(f):ie())},$="undefined"!=typeof window?window:void 0,J=$||{},Z=J.MutationObserver||J.WebKitMutationObserver,ee="undefined"==typeof self&&"undefined"!=typeof t&&"[object process]"==={}.toString.call(t),te="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,ne=new Array(1e3),ie=void 0;ie=ee?s():Z?c():te?l():void 0===$?p():d();var re=Math.random().toString(36).substring(16),ae=void 0,oe=1,se=2,ue=new N,ce=new N,le=0;return x.prototype._enumerate=function(){for(var e=this.length,t=this._input,n=0;this._state===ae&&n<e;n++)this._eachEntry(t[n],n)},x.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,i=n.resolve;if(i===h){var r=m(e);if(r===g&&e._state!==ae)this._settledAt(e._state,t,e._result);else if("function"!=typeof r)this._remaining--,this._result[t]=e;else if(n===j){var a=new n(v);T(a,e,r),this._willSettleAt(a,t)}else this._willSettleAt(new n(function(t){return t(e)}),t)}else this._willSettleAt(i(e),t)},x.prototype._settledAt=function(e,t,n){var i=this.promise;i._state===ae&&(this._remaining--,e===se?D(i,n):this._result[t]=n),0===this._remaining&&b(i,this._result)},x.prototype._willSettleAt=function(e,t){var n=this;R(e,void 0,(function(e){return n._settledAt(oe,t,e)}),(function(e){return n._settledAt(se,t,e)}))},j.all=M,j.race=U,j.resolve=h,j.reject=G,j._setScheduler=a,j._setAsap=o,j._asap=Q,j.prototype={constructor:j,then:g,"catch":function(e){return this.then(null,e)}},j.polyfill=H,j.Promise=j,j}))}).call(t,n(14),(function(){return this})())}),(function(e,t){function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function r(e){if(l===setTimeout)return setTimeout(e,0);if((l===n||!l)&&setTimeout)return l=setTimeout,setTimeout(e,0);try{return l(e,0)}catch(t){try{return l.call(null,e,0)}catch(t){return l.call(this,e,0)}}}function a(e){if(d===clearTimeout)return clearTimeout(e);if((d===i||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(e);try{return d(e)}catch(t){try{return d.call(null,e)}catch(t){return d.call(this,e)}}}function o(){h&&p&&(h=!1,p.length?g=p.concat(g):v=-1,g.length&&s())}function s(){if(!h){var e=r(o);h=!0;for(var t=g.length;t;){for(p=g,g=[];++v<t;)p&&p[v].run();v=-1,t=g.length}p=null,h=!1,a(e)}}function u(e,t){this.fun=e,this.array=t}function c(){}var l,d,f=e.exports={};!(function(){try{l="function"==typeof setTimeout?setTimeout:n}catch(e){l=n}try{d="function"==typeof clearTimeout?clearTimeout:i}catch(e){d=i}})();var p,g=[],h=!1,v=-1;f.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];g.push(new u(e,t)),1!==g.length||h||r(s)},u.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=c,f.addListener=c,f.once=c,f.off=c,f.removeListener=c,f.removeAllListeners=c,f.emit=c,f.prependListener=c,f.prependOnceListener=c,f.listeners=function(e){return[]},f.binding=function(e){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(e){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}}),(function(e,t){}),(function(e,t,n){var i=n(2),r=n(17),a=n(9),o=r.create(),s={action_data:n(18),async_request:n(24),audience_data:n(25),change_data:n(26),cleanup:n(27),cookie_options:n(28),event_data:n(29),event_emitter:n(30),dimension_data:n(31),directive:n(32),global:n(33),global_state:n(34),history:n(35),integration_settings:n(37),layer:n(38),layer_data:n(39),log:n(41),observed_redirect:n(42),pending_events:n(43),performance:n(44),plugins:n(45),provider_status:n(46),pending_redirect:n(47),rum:n(48),sandbox:n(49),session:n(50),tracker_optimizely:n(51),ua_data:n(52),view:n(53),view_data:n(54),visitor:n(55),visitor_attribute_entity:n(56),visitor_events:n(57),visitor_events_manager:n(63),visitor_id:n(64),visitor_bucketing:n(65),xdomain:n(66)};s["group_data"]=n(67),a.registerStores(s),i.forOwn(s,(function(e,t){o.register("stores/"+t,a.getStore(t))})),e.exports=o}),(function(e,t,n){function i(){this.N={}}var r=n(2);i.prototype.register=function(e,t){if(1===arguments.length){var n=this;return void r.each(e,(function(e,t){n.register(t,e)}))}if(this.N[e])throw new Error("Module already registered for: "+e);this.N[e]=t},i.prototype.get=function(e){return this.N[e]},i.prototype.getModuleKeys=function(){var e=this.N;return r.keys(e)},i.prototype.evaluate=function(e){var t=e.length,n=e.slice(0,t-1),i=e[t-1];if("function"!=typeof i)throw new Error("Evaluate must take a function as last element in array");var a=r.map(n,r.bind(this.get,this));return i.apply(null,a)},i.prototype.reset=function(){this.N={}},e.exports={create:function(){return new i}}}),(function(e,t,n){var i=n(2),r=n(7),a=n(19),o=n(20);e.exports={initialize:function(){this.O={actions:{},actionState:{}},this.on(r.DATA_LOADED,this.C),this.on(r.ACTION_EXECUTED,this.P),this.on(r.SET_CHANGE_APPLIER,this.L),this.on(r.REMOVE_ACTION_STATE,this.V)},C:function(e){var t=this;i.isEmpty(e.data.layers)||(i.each(e.data.layers,(function(e){var n;if(e.changes){var r="layerId:"+e.id;n={id:r,layerId:e.id,changeSet:e.changes,type:"layer"},a.deepFreeze(n),t.O.actions[r]=n}i.each(e.experiments,(function(r){if(r.changes){var o="experimentId:"+r.id;n={id:o,layerId:e.id,experimentId:r.id,changeSet:r.changes,type:"experiment"},a.deepFreeze(n),t.O.actions[o]=n}i.each(r.variations,(function(o){i.each(o.actions,(function(i){var s=i.pageId||i.viewId,u=r.id+":"+o.id+":"+s;n={id:u,layerId:e.id,experimentId:r.id,variationId:o.id,pageId:s,changeSet:i.changes,type:"variation"},a.deepFreeze(n),t.O.actions[u]=n}))}))}))})),this.emitChange())},P:function(e){var t=e.actionId;i.isUndefined(t)||this.O.actionState[t]||(this.O.actionState[t]={})},L:function(e){var t=e.actionId,n=e.changeId;return this.O.actionState[t]?void(this.O.actionState[t][n]=e.changeApplier):void o.warn("Action Data / Attempted to set changeApplier for inactive action: ",t)},V:function(e){delete this.O.actionState[e.actionId]},get:function(e){return a.safeReference(this.O.actions[e])},getActionState:function(e){return a.safeReference(this.O.actionState[e])},getByChangeId:function(e){return i.find(this.O.actions,{changeSet:[{id:e}]})},getAllActionIdsByPageId:function(e){return i.map(i.filter(this.O.actions,{pageId:e}),"id")},getChangeApplier:function(e,t){var n=this.O.actionState[t];if(n)return n[e]},getExperimentVariationActions:function(e,t){return a.safeReference(i.filter(this.O.actions,{experimentId:e,variationId:t}))},getLayerActions:function(e){return a.safeReference(i.filter(this.O.actions,{id:"layerId:"+e}))},getExperimentActions:function(e){return a.safeReference(i.filter(this.O.actions,{id:"experimentId:"+e}))},getAll:function(){return a.safeReference(i.values(this.O.actions))}}}),(function(e,t,n){var i=n(2),r=!1;t.deepFreeze=function e(t){r&&i.isObject(t)&&!i.isFunction(t)&&(i.forOwn(t,e),Object.freeze(t))},t.safeReference=function e(t){return r?!i.isObject(t)||i.isFunction(t)||Object.isFrozen(t)?t:i.isArray(t)?i.map(t,e):i.reduce(t,(function(t,n,i){return t[i]=e(n),t}),{}):i.cloneDeep(t)}}),(function(e,t,n){function i(){this.logLevel=null,this.logMatch=null,this.logs=[],this.timebase=o.now()}var r=n(2),a=n(7),o=n(21),s=n(22),u=n(9),c=n(23);i.prototype.k=function(){return!r.isNull(this.logLevel)},i.prototype.setLogLevel=function(e){var t=this.x(e);null===t?console.error("Unknown log level: "+e):this.logLevel!==t&&(this.log("Setting log level to "+t),this.logLevel=t,this.flush())},i.prototype.setLogMatcher=function(e){r.isString(e)?this.logMatcher=e:this.logMatcher="",this.logGroup=0},i.prototype.shouldLog=function(e){return this.k()&&this.logLevel>=e},i.prototype.matchesLogMessage=function(e,t){var n=this.logMatcher;if(!this.logMatcher)return!0;if(this.logGroup)return"GROUPSTART"===e?this.logGroup++:"GROUPEND"===e&&this.logGroup--,!0;var i=r.some(t,(function(e){if(!r.isString(e))try{e=c.stringify(e)}catch(e){}return r.isString(e)&&r.includes(e,n)}));return i&&"GROUPSTART"===e&&this.logGroup++,i},i.prototype.storeLog=function(e,t){var n={logLevel:e,logMessage:t};u.dispatch(a.LOG,n)},i.prototype.flush=function(){var e=n(16),t=e.get("stores/log");this.logGroup=0;var i=t.getLogs();r.each(i,r.bind((function(e){this.F(e.logLevel,e.logMessage,!0)}),this))},i.prototype.F=function(e,t,n){var i,a=e;if(console)switch(e){case"GROUPSTART":i=console.groupCollapsed,a=s.LogLevel.DEBUG;break;case"GROUPEND":i=console.groupEnd,a=s.LogLevel.DEBUG;break;case s.LogLevel.ERROR:i=console.error;break;case s.LogLevel.WARN:i=console.warn;break;case s.LogLevel.DEBUG:i=console.debug;break;default:i=console.log}try{n||this.k()&&!this.shouldLog(a)||(r.isArray(t)&&r.isString(t[0])&&(t=this.M(t)),this.storeLog(e,t)),i&&this.shouldLog(a)&&this.matchesLogMessage(e,t)&&i.apply(console,t)}catch(e){console&&(console.error?console.error(e):console.log(e))}},i.prototype.debug=function(){this.F(s.LogLevel.DEBUG,[].slice.call(arguments))},i.prototype.log=function(){this.F(s.LogLevel.INFO,[].slice.call(arguments))},i.prototype.logAlways=function(){var e=this.M([].slice.call(arguments));console&&console.log&&console.log.apply&&console.log.apply(console,e),this.storeLog(s.LogLevel.INFO,e)},i.prototype.warn=function(){this.F(s.LogLevel.WARN,[].slice.call(arguments))},i.prototype.error=function(e){var t=[].slice.call(arguments);1===t.length&&e.stack?(this.F(s.LogLevel.ERROR,[this.U(),e]),this.F(s.LogLevel.INFO,[e.stack])):this.F(s.LogLevel.ERROR,t)},i.prototype.groupCollapsed=function(){this.F("GROUPSTART",[].slice.call(arguments))},i.prototype.groupEnd=function(){this.F("GROUPEND",[].slice.call(arguments))},i.prototype.M=function(e){var t=this.U().toString();return t.length<6&&(t=("     "+t).slice(-6)),[t+"| Optly / "+e[0]].concat(e.slice(1))},i.prototype.U=function(){return this.timebase?o.now()-this.timebase:0},i.prototype.x=function(e){return e&&(e=e.toUpperCase(),"TRUE"===e&&(e="INFO"),"FALSE"===e&&(e="OFF"),"ALL"===e&&(e="DEBUG"),!r.isUndefined(s.LogLevel[e]))?s.LogLevel[e]:null},e.exports=new i}),(function(e,t){t.now=function(){return+new Date}}),(function(e,t,n){var i=n(8);t.COOKIES={OPT_OUT:"optimizelyOptOut",PREVIEW:"optimizelyPreview",REDIRECT:"optimizelyRedirectData",SESSION_STATE:"optimizelySessionState",TOKEN:"optimizelyToken",VISITOR_ID:"optimizelyEndUserId"},t.LayerActivationTypes={CONDITIONAL:"conditional",IMMEDIATE:"immediate",MANUAL:"manual",READY:"ready",TIMEOUT:"timeout"},t.LogLevel={OFF:0,ERROR:1,WARN:2,INFO:3,DEBUG:4},t.Lifecycle=i({preActivate:null,postVisitorProfileLoad:null,postViewsActivated:null,postActivate:null}),t.ViewActivationTypes={immediate:"immediate",manual:"manual",callback:"callback",polling:"polling",URLChanged:"url_changed",DOMChanged:"dom_changed"},t.StorageKeys={PENDING_EVENTS:"pending_events"},t.PluginTypes=i({visitorProfileProviders:null,viewProviders:null,audienceMatchers:null,viewMatchers:null,analyticsTrackers:null,viewTagLocators:null,userFeatureDefs:null,apiModules:null,changeAppliers:null,deciders:null,eventImplementations:null,viewTriggers:null}),t.ResourceTimingAttributes=i({connectStart:null,connectEnd:null,decodedBodySize:null,domainLookupStart:null,domainLookupEnd:null,duration:null,encodedBodySize:null,fetchStart:null,requestStart:null,responseStart:null,responseEnd:null,secureConnectionStart:null,startTime:null,transferSize:null}),t.RUMPerformanceTimingAttributes=i({blockTime:null}),t.AttributionTypes=i({FIRST_TOUCH:null,LAST_TOUCH:null}),t.SandboxedFunctions=i({XMLHttpRequest:null}),t.PerformanceData=i({performance_marks:null,resource_timing:null,performance_timing:null}),t.PerformanceCounters=i({mutation_observer_invocation:null,polling_invocation:null,match_selector_invocation:null}),t.VisitorStorageKeys={EVENTS:"events",EVENT_QUEUE:"event_queue",LAYER_MAP:"layer_map",LAYER_STATES:"layer_states",SESSION_STATE:"session_state",VISITOR_PROFILE:"visitor_profile",VARIATION_MAP:"variation_map",TRACKER_OPTIMIZELY:"tracker_optimizely"},t.ListTargetingKeyTypes={COOKIE:"c",QUERY:"q",JS_VARIABLE:"j"}}),(function(e,t,n){function i(e){var t=[Array.prototype],n=[];r.each(t,(function(e){r.isUndefined(e.toJSON)||(n.push(e.toJSON),delete e.toJSON)}));var i,a;try{i=e()}catch(e){a=e}finally{r.each(n,(function(e,n){t[n].toJSON=e}))}if(a)throw a;return i}var r=n(2);t.stringify=function(){return i(r.bind((function(){return JSON.stringify.apply(null,this)}),arguments))},t.parse=JSON.parse}),(function(e,t,n){var i=n(7);e.exports={initialize:function(){this.O={},this.on(i.REGISTER_ASYNC_DEFERRED,this.G),this.on(i.RESOLVE_DEFERRED,this.B),this.on(i.REJECT_DEFERRED,this.z)},getRequest:function(e){return this.O[e]},getPromise:function(e){var t=this.getRequest(e);if(t)return t.promise},G:function(e){this.O[e.source]={promise:e.promise,resolver:e.resolver,rejecter:e.rejecter}},B:function(e){var t=this.getRequest(e.source);if(!t)throw new Error("No request registered for source: "+e.source);t.resolver(e.resolveWith)},z:function(e){var t=this.getRequest(e.source);if(!t)throw new Error("No request registered for source: "+e.source);if(!t.rejecter)throw new Error("No rejecter registered for source: "+e.source);t.rejecter(e.rejectWith)}}}),(function(e,t,n){var i=n(2),r=n(7),a=n(19);e.exports={initialize:function(){this.O={},this.on(r.DATA_LOADED,this.C)},C:function(e){i.isEmpty(e.data.audiences)||(i.each(e.data.audiences,i.bind((function(e){a.deepFreeze(e),this.O[e.id]=e}),this)),this.emitChange())},getAll:function(){return a.safeReference(i.values(this.O))},getAudiencesMap:function(){return a.safeReference(this.O)},get:function(e){return a.safeReference(this.O[e])},getAudienceName:function(e){var t=i.find(i.values(this.O),{id:e});return t.name||"Aud "+e}}}),(function(e,t,n){var i=n(2),r=n(7),a=n(19);e.exports={initialize:function(){this.O={},this.on(r.ADD_CHANGE,this.j),this.on(r.DATA_LOADED,this.C)},getChange:function(e){return this.O[e]},C:function(e){i.isEmpty(e.data.changes)||i.each(e.data.changes,i.bind(this.j,this))},j:function(e){a.deepFreeze(e),this.O[e.id]=e,this.emitChange()}}}),(function(e,t,n){var i=n(2),r=n(7),a=n(22);e.exports={initialize:function(){this.O={},i.each(a.Lifecycle,i.bind((function(e){this.O[e]=[]}),this)),this.on(r.ADD_CLEANUP_FN,this.H),this.on(r.CLEAR_CLEANUP_FN,this.Y)},getCleanupFns:function(e){return i.cloneDeep(this.O[e])},H:function(e){this.O[e.lifecycle].push(e.cleanupFn),this.emitChange()},Y:function(e){var t=this.O[e.lifecycle];if(e.cleanupFn){var n=t.indexOf(e.cleanupFn);n>-1&&(t.splice(n,1),this.emitChange())}else this.O[e.lifecycle]=[],this.emitChange()}}}),(function(e,t,n){var i=n(7),r=31536e4;e.exports={initialize:function(){this.O={currentDomain:null,defaultAgeSeconds:r},this.on(i.SET_COOKIE_DOMAIN,this.K),this.on(i.SET_COOKIE_AGE,this.q)},getCurrentDomain:function(){return this.O.currentDomain},getDefaultAgeInSeconds:function(){return this.O.defaultAgeSeconds},K:function(e){this.O.currentDomain=e,this.emitChange()},q:function(e){this.O.defaultAgeSeconds=e,this.emitChange()}}}),(function(e,t,n){var i=n(2),r=n(7),a=n(19);e.exports={initialize:function(){this.O={},this.on(r.DATA_LOADED,this.C)},getAll:function(){return a.safeReference(i.values(this.O))},getEventsMap:function(){return a.safeReference(this.O)},get:function(e){return a.safeReference(this.O[e])},getByApiName:function(e){return a.safeReference(i.find(i.values(this.O),{apiName:e}))},getByPageId:function(e){return a.safeReference(i.filter(this.O,{pageId:e}))},C:function(e){i.isEmpty(e.data.events)||(i.each(e.data.events,i.bind((function(e){e.pageId||(e.pageId=e.viewId),a.deepFreeze(e),this.O[e.id]=e}),this)),this.emitChange())}}}),(function(e,t,n){function i(e){var t=[];return e&&r.isObject(e)?(e.type&&t.push(e.type),t.push(o),e.type&&e.name&&t.push(e.name),t.join("")):o}var r=n(2),a=n(7),o="|";e.exports={initialize:function(){this.O={handlers:{}},this.on(a.ADD_EMITTER_HANDLER,this.X),this.on(a.REMOVE_EMITTER_HANDLER,this.W)},getHandlers:function(e,t){var n=[null,{type:e.type},{type:e.type,name:e.name}],a=[];return r.each(n,r.bind((function(e){var t=i(e),n=this.O.handlers[t];n&&(a=a.concat(n))}),this)),t&&(a=r.filter(a,(function(e){return!e.publicOnly}))),a},X:function(e){var t=i(e.filter);this.O.handlers[t]||(this.O.handlers[t]=[]),this.O.handlers[t].push({handler:e.handler,token:e.token,publicOnly:!!e.publicOnly,emitErrors:!!e.emitErrors}),this.emitChange()},W:function(e){var t=!1,n=e.token;r.forOwn(this.O.handlers,r.bind((function(e,i){var a=r.filter(e,(function(e){return e.token!==n}));a.length!==e.length&&(t=!0,this.O.handlers[i]=a)}),this)),t&&this.emitChange()}}}),(function(e,t,n){var i=n(2),r=n(7),a=n(19);e.exports={initialize:function(){this.O={},this.on(r.DATA_LOADED,this.C)},C:function(e){i.isEmpty(e.data.dimensions)||(i.each(e.data.dimensions,i.bind((function(e){a.deepFreeze(e),this.O[e.id]=e}),this)),this.emitChange())},getAll:function(){return a.safeReference(i.values(this.O))},getById:function(e){return a.safeReference(this.O[e])},getByApiName:function(e){return a.safeReference(i.find(i.values(this.O),{apiName:e}))}}}),(function(e,t,n){var i=n(2),r=n(7);e.exports={initialize:function(){this.O={disabled:!1,forceAudienceIds:[],forceVariationIds:[],alreadyInitialized:!1,mutationObserverAPISupported:!1,isEditor:!1,isPreview:!1,isLegacyPreview:!1,isSlave:!1,previewLayerIds:[],projectToken:null,shouldOptOut:!1,trackingDisabled:!1,isRunningInV2Editor:!1,isRunningInDesktopApp:!1,forceTracking:!1},this.on(r.LOAD_DIRECTIVE,this.Q)},getAll:function(){return i.cloneDeep(this.O)},conflictInObservingChanges:function(){return!1},isDisabled:function(){return this.O.disabled},isEditor:function(){return this.O.isEditor},clientHasAlreadyInitialized:function(){return this.O.alreadyInitialized},getForceAudienceIds:function(){return this.O.forceAudienceIds},getForceVariationIds:function(){return this.O.forceVariationIds},getPreviewLayerIds:function(){return this.O.previewLayerIds},getProjectToken:function(){return this.O.projectToken},getForceTracking:function(){return this.O.forceTracking},shouldActivate:function(){return!this.O.isEditor&&!this.isDisabled()},shouldBootstrapDataForPreview:function(){return this.O.isPreview},shouldBootstrapDataForEditor:function(){return this.O.isEditor},shouldInitialize:function(){return!(this.shouldOptOut()||this.shouldLoadPreview()||this.isDisabled()||this.getProjectToken())},shouldLoadPreview:function(){return!(this.O.isPreview||this.O.isLegacyPreview||!this.getProjectToken()||this.O.isEditor)},shouldBailForDesktopApp:function(){return!this.O.isEditor&&this.O.isRunningInDesktopApp},shouldLoadInnie:function(){return!this.O.isSlave&&!this.O.isEditor&&this.O.isRunningInV2Editor},shouldObserveChangesIndefinitely:function(){return!1},shouldOptOut:function(){return this.O.shouldOptOut},shouldSendTrackingData:function(){return!this.O.trackingDisabled&&(!!this.O.forceTracking||!this.O.isPreview&&i.isEmpty(this.getForceVariationIds())&&i.isEmpty(this.getForceAudienceIds()))},isSlave:function(){return this.O.isSlave},isRunningInDesktopApp:function(){return this.O.isRunningInDesktopApp},isRunningInV2Editor:function(){return this.O.isRunningInV2Editor},Q:function(e){i.extend(this.O,e),this.emitChange()}}}),(function(e,t,n){var i=n(2),r=n(7);e.exports={initialize:function(){this.O={holdback:0,isGlobalHoldback:null,listTargetingKeys:[],revision:null,projectId:null,accountId:null,namespace:null,activationId:null,activationTimestamp:null,dcpServiceId:null,dcpKeyfieldLocators:[],recommenderServices:[],anonymizeIP:null,projectJS:null,snippetId:null,plugins:[],domContentLoaded:!1},this.on(r.DATA_LOADED,this.$),this.on(r.ACTIVATE,this.J),this.on(r.RECORD_GLOBAL_DECISION,this.Z),this.on(r.SET_DOMCONTENTLOADED,this.ee)},getRevision:function(){return this.O.revision},getGlobalHoldbackThreshold:function(){return this.O.holdback},getProjectId:function(){return this.O.projectId},getSnippetId:function(){return this.O.snippetId},getAccountId:function(){return this.O.accountId},getNamespace:function(){return this.O.namespace},getActivationId:function(){return this.O.activationId},getActivationTimestamp:function(){return this.O.activationTimestamp},getAnonymizeIP:function(){return this.O.anonymizeIP},isGlobalHoldback:function(){return!!this.O.isGlobalHoldback},getListTargetingKeys:function(){return this.O.listTargetingKeys.slice()},getDCPServiceId:function(){return this.O.dcpServiceId},getDCPKeyfieldLocators:function(){return this.O.dcpKeyfieldLocators},getRecommenderServices:function(){return this.O.recommenderServices},getProjectJS:function(){return this.O.projectJS},getPlugins:function(){return this.O.plugins},domContentLoadedHasFired:function(){return this.O.domContentLoaded},J:function(e){this.O.activationId=e.activationId,this.O.activationTimestamp=e.activationTimestamp,this.O.isGlobalHoldback=null},Z:function(e){var t=e.isGlobalHoldback;if(null!==this.O.isGlobalHoldback&&this.O.isGlobalHoldback!==t)throw new Error("Attempted to change already set global holdback!");this.O.isGlobalHoldback=t,this.emitChange()},$:function(e){var t=i.pick(e.data,["holdback","accountId","projectId","snippetId","namespace","revision","listTargetingKeys","dcpServiceId","dcpKeyfieldLocators","recommenderServices","anonymizeIP","plugins","projectJS"]);if(0!==i.keys(t).length){var n={listTargetingKeys:[],dcpServiceId:null,dcpKeyfieldLocators:[]};i.extend(this.O,n,t),this.emitChange()}},ee:function(){this.O.domContentLoaded=!0,this.emitChange()}}}),(function(e,t,n){var i=n(2),r=n(7);e.exports={initialize:function(){this.O={effectiveReferrer:null,effectiveVariationId:null},this.on(r.INITIALIZE_STATE,this.te)},getEffectiveReferrer:function(){return this.O.effectiveReferrer},getEffectiveVariationId:function(){return this.O.effectiveVariationId},te:function(e){i.isUndefined(e.effectiveReferrer)||(this.O.effectiveReferrer=e.effectiveReferrer),i.isUndefined(e.effectiveVariationId)||(this.O.effectiveVariationId=e.effectiveVariationId),this.emitChange()}}}),(function(e,t,n){var i=n(2),r=n(7),a=n(36);e.exports={initialize:function(){this.O={originalPushState:null,originalReplaceState:null},this.on(r.ENSURE_ORIGINAL_PUSHSTATE,this.ne),this.on(r.ENSURE_ORIGINAL_REPLACESTATE,this.re)},getOriginalPushState:function(){return this.O.originalPushState},getOriginalReplaceState:function(){return this.O.originalReplaceState},ne:function(){this.O.originalPushState||(this.O.originalPushState=i.bind(a.getGlobal("history").pushState,a.getGlobal("history")))},re:function(){this.O.originalReplaceState||(this.O.originalReplaceState=i.bind(a.getGlobal("history").replaceState,a.getGlobal("history")))}}}),(function(e,t,n){var i=n(2);t.getUserAgent=function(){return window.navigator.userAgent},t.getLocationSearch=function(){return window.location.search},t.getNavigatorLanguage=function(){return window.navigator.language||window.navigator.userLanguage},t.getHref=function(){return window.location.href},t.getLocation=function(){return window.location},t.setLocation=function(e){window.location.replace(e)},t.setGlobal=function(e,t){window[e]=t},t.getGlobal=function(e){return window[e]},t.addEventListener=function(){return window.addEventListener.apply(window,arguments)},t.removeEventListener=function(){return window.removeEventListener.apply(window,arguments)},t.isMutationObserverAPISupported=function(){return!i.isUndefined(window.MutationObserver)}}),(function(e,t,n){var i=n(2),r=n(7);e.exports={initialize:function(){this.O={},this.on(r.DATA_LOADED,this.C),this.on(r.SET_INTEGRATION_SETTINGS,this.ae)},C:function(e){i.isEmpty(e.data.integrationSettings)||(i.each(e.data.integrationSettings,i.bind((function(e){this.O[e.id]=e}),this)),this.emitChange())},ae:function(e){var t=this.O[e.id];t?i.extend(t,e):this.O[e.id]=e},getAll:function(){return i.cloneDeep(i.values(this.O))},get:function(e){return i.cloneDeep(this.O[e])},getReference:function(e){return this.O[e]}}}),(function(e,t,n){var i=n(2),r=n(7),a=n(20),o="*";e.exports={initialize:function(){this.O={},this.on(r.LOAD_PERSISTED_LAYER_STATES,this.oe),this.on(r.RECORD_LAYER_DECISION,this.se),this.on(r.RECORD_LAYER_DECISION_EVENT_ID,this.ue)},getLayerState:function(e,t){if(this.O[e]){var n=this.O[e];if(i.keys(n).length>1&&!t)throw new Error("View Id must be specified when more than one layerState for layer.");return t?i.cloneDeep(i.find(n,{pageId:t})):i.cloneDeep(n[o])}},getLayerStates:function(e){var t=[];for(var n in this.O)i.forEach(this.O[n],(function(n){(i.isUndefined(e)||n.namespace===e)&&t.push(i.cloneDeep(n))}));return t},getLayerStatesForAnalytics:function(){var e=[];for(var t in this.O)i.forEach(this.O[t],(function(t){e.push(i.pick(t,["layerId","decision","decisionEventId"]))}));return e},oe:function(e){e.merge||(this.O={}),i.each(e.layerStates,i.bind((function(e){var t=e.layerId;e.pageId||(e.pageId=e.viewId);var n=e.pageId||o,r=this.O[t];if(i.isUndefined(r))this.O[t]={},this.O[t][n]=e;else{var a=r[n];(!a||e.decisionTimestamp>(a.decisionTimestamp||0))&&(this.O[t][n]=e)}}),this)),this.emitChange()},se:function(e){var t={layerId:e.layerId,revision:e.revision,namespace:e.namespace,pageId:e.pageId,decisionTicket:e.decisionTicket,decision:e.decision,decisionActivationId:e.activationId,decisionTimestamp:e.timestamp,decisionEventId:null},n=this.O[e.layerId]||{};e.pageId?(delete n[o],n[e.pageId]=t):(n={},n[o]=t),this.O[e.layerId]=n,this.emitChange()},ue:function(e){var t=e.layerId,n=e.pageId||o;return this.O[t]?this.O[t][n]?(this.O[t][n].decisionEventId=e.decisionId,void this.emitChange()):void a.warn("Not recording decision event: Layer state not found for view",n):void a.warn("Not recording decision event: Campaign not registered",t)}}}),(function(e,t,n){var i=n(2),r=n(7),a=n(19),o=n(40);e.exports={initialize:function(){this.O={layers:{},experiments:{},variations:{}},this.on(r.DATA_LOADED,this.C)},C:function(e){if(!i.isEmpty(e.data.layers)){var t=this;i.each(e.data.layers,(function(e){i.each(e.experiments,(function(n){e.pageIds||(e.pageIds=e.viewIds),n.campaignName||o.isSingleExperimentPolicy(e.policy)?o.isSingleExperimentPolicy(e.policy)&&e.groupId&&(n.groupId=e.groupId):n.campaignName=e.name,i.each(n.variations,(function(e){i.each(e.actions,(function(e){e.pageId||(e.pageId=e.viewId)})),t.O.variations[e.id]=e})),t.O.experiments[n.id]=n})),a.deepFreeze(e),t.O.layers[e.id]=e})),this.emitChange()}},getAll:function(){return a.safeReference(i.values(this.O.layers))},getCampaignsMap:function(){return a.safeReference(this.O.layers)},getExperimentsMap:function(){return a.safeReference(this.O.experiments)},getVariationsMap:function(){return a.safeReference(this.O.variations)},getCount:function(){return i.keys(this.O.layers).length},getAllByPageIds:function(e){return a.safeReference(i.filter(i.values(this.O.layers),(function(t){return i.some(e,i.partial(i.includes,t.pageIds))})))},get:function(e){return a.safeReference(this.O.layers[e])},getLayerByExperimentId:function(e){var t=i.values(this.O.layers),n=i.find(t,(function(t){return i.find(t.experiments,{id:e})}));return a.safeReference(n)},getExperimentByVariationId:function(e){var t,n=i.values(this.O.layers);return i.some(n,(function(n){return i.some(n.experiments,(function(n){return i.find(n.variations,{id:e})&&(t=n),t})),t})),a.safeReference(t)}}}),(function(e,t){var n="single_experiment",i="multivariate";t.isSingleExperimentPolicy=function(e){return e===n||e===i}}),(function(e,t,n){var i=n(7);e.exports={initialize:function(){
this.O={logs:[]},this.on(i.LOG,this.ce)},getLogs:function(){return this.O.logs},ce:function(e){this.O.logs.push(e),this.emitChange()},S:function(){return this.O.logs.slice()}}}),(function(e,t,n){var i=n(7),r=n(19);e.exports={initialize:function(){this.O={data:null,hasTracked:null},this.on(i.LOAD_REDIRECT_DATA,this.le),this.on(i.REGISTER_TRACKED_REDIRECT_DATA,this.de)},get:function(){return r.safeReference(this.O.data)},hasTracked:function(){return this.O.hasTracked},le:function(e){r.deepFreeze(e),this.O.data=e,this.O.hasTracked=!1,this.emitChange()},de:function(){this.O.hasTracked=!0}}}),(function(e,t,n){var i=n(2),r=n(7),a=n(23),o=1e3;e.exports={initialize:function(){this.O={},this.on(r.SET_PENDING_EVENT,this.fe),this.on(r.REMOVE_PENDING_EVENT,this.pe),this.on(r.LOAD_PENDING_EVENTS,this.ge)},getEvents:function(){return this.O},getEventsString:function(){return a.stringify(this.O)},fe:function(e){i.keys(this.O).length>=o&&this.he();var t=e.id,n=e.retryCount;this.O[t]&&this.O[t].retryCount===n||(this.O[t]={id:t,timeStamp:e.timeStamp,data:e.data,retryCount:n},this.emitChange())},pe:function(e){delete this.O[e.id],this.emitChange()},ge:function(e){this.O=e.events,this.he(),this.emitChange()},he:function(){for(var e=i.sortBy(this.O,"timeStamp"),t=0;t<=e.length-o;t++)delete this.O[e[t].id];this.emitChange()}}}),(function(e,t,n){var i=n(2),r=n(7),a=n(22);e.exports={initialize:function(){this.O={},this.O[a.PerformanceData.performance_marks]={},this.on(r.SET_PERFORMANCE_MARKS_DATA,this.ve)},ve:function(e){i.isUndefined(this.O[a.PerformanceData.performance_marks][e.name])&&(this.O[a.PerformanceData.performance_marks][e.name]=[]),this.O[a.PerformanceData.performance_marks][e.name].push(e.data),this.emitChange()},getMarks:function(){return i.mapValues(this.O[a.PerformanceData.performance_marks],(function(e){return i.map(e,(function(e){return[e.startTime,e.duration]}))}))},getDurationsFor:function(e){return i.reduce(e,i.bind((function(e,t){var n=this.O[a.PerformanceData.performance_marks][t];return n&&(e[t]=Math.round(i.reduce(n,(function(e,t){return e+t.duration}),0))),e}),this),{})}}}),(function(e,t,n){var i=n(2),r=n(7),a=n(22),o=n(20);e.exports={initialize:function(){this.O=i.mapValues(a.PluginTypes,(function(){return{}})),this.on(r.REGISTER_PLUGIN,this._e)},_e:function(e){var t=e.type,n=e.name,i=e.plugin;if(!t||!n)throw new Error("Missing information needed to register plugins: "+t+":"+n);if(!this.O[t])throw new Error("Invalid plugin type specified: "+t);this.O[t][n]=i,o.debug("Plugin Store: Registering Plugin :",e)},getAllPlugins:function(e){if(e){if(this.O[e])return this.O[e];throw new Error("Invalid plugin type: "+e)}return this.O},getPlugin:function(e,t){if(!t||!e)throw new Error("Missing plugin parameters");var n=this.getAllPlugins(e);return n[t]||null}}}),(function(e,t,n){var i=n(7);e.exports={initialize:function(){this.O={},this.on(i.SET_VISITOR_ATTRIBUTE_PENDING,this.Ee)},getPendingAttributeValue:function(e){if(this.O[e])return this.O[e].pending},Ee:function(e){this.O[e.key]={pending:e.pending},this.emitChange()}}}),(function(e,t,n){var i=n(2),r=n(7);e.exports={initialize:function(){this.O={layerId:null},this.on(r.ANNOUNCE_PENDING_REDIRECT,this.le)},isExpectingRedirect:function(){return i.isString(this.O.layerId)},getLayerId:function(){return this.O.layerId},le:function(e){this.isExpectingRedirect()||(this.O.layerId=e.layerId,this.emitChange())}}}),(function(e,t,n){var i=n(2),r=n(7);e.exports={initialize:function(){this.O={inRumSample:!1,id:null,src:null,RumHost:null,data:{},apis:{},DOMObservation:{}},this.on(r.SET_RUM_DATA,this.me),this.on(r.RECORD_API_USAGE,this.ye),this.on(r.RECORD_DOM_OBSERVATION_OCCURENCE,this.Ie)},me:function(e){i.merge(this.O,e),this.emitChange()},ye:function(e){this.O.apis[e.methodName]||(this.O.apis[e.methodName]=0),this.O.apis[e.methodName]++,this.emitChange()},Ie:function(e){this.O.DOMObservation[e.counterName]||(this.O.DOMObservation[e.counterName]=0),this.O.DOMObservation[e.counterName]++,this.emitChange()},getSampleRum:function(){return this.O.inRumSample},getRumId:function(){return this.O.id},getRumHost:function(){return this.O.RumHost},getApiData:function(){return this.O.apis},getDOMObservationData:function(){return this.O.DOMObservation},getRumData:function(){return i.cloneDeep(this.O.data)},getScriptSrc:function(){return this.O.src}}}),(function(e,t,n){var i=n(7);e.exports={initialize:function(){this.O={initialized:!1,natives:{}},this.on(i.SANDBOXED_FUNCTIONS_ADDED,this.Se)},Se:function(e){if(!e.sandboxedFunctions)throw new Error("No sandboxedFunctions found in payload");this.O.natives=e.sandboxedFunctions,this.O.initialized=!0,this.emitChange()},getAll:function(){return this.O.natives},get:function(e){if(!e)throw new Error("Missing name parameter");return this.O.natives[e]||null},isInitialized:function(){return this.O.initialized}}}),(function(e,t,n){var i=n(2),r=n(7),a=n(21),o=n(5),s=18e5;e.exports={initialize:function(){this.O={lastSessionTimestamp:0,sessionId:null},this.on(r.REFRESH_SESSION,this.Te),this.on(r.LOAD_SESSION_STATE,this.Ae)},getState:function(){return i.cloneDeep(this.O)},getSessionId:function(){return this.O.sessionId},Ae:function(e){this.O.sessionId=e.sessionId,this.O.lastSessionTimestamp=e.lastSessionTimestamp,this.emitChange()},Te:function(){var e=a.now(),t=this.O.lastSessionTimestamp;(!this.O.sessionId||e-t>s)&&(this.O.sessionId=o.generate()),this.O.lastSessionTimestamp=e,this.emitChange()}}}),(function(e,t,n){var i=n(2),r=n(7);e.exports={initialize:function(){this.we(),this.on(r.FINALIZE_BATCH_SNAPSHOT,this.be),this.on(r.REGISTER_PREVIOUS_BATCH,this.De),this.on(r.REGISTER_TRACKER_VISITOR,this.Re),this.on(r.REGISTER_TRACKER_EVENT,this.Oe),this.on(r.REGISTER_TRACKER_DECISION,this.Ne),this.on(r.RESET_TRACKER_EVENTS,this.Ce),this.on(r.RESET_TRACKER_STORE,this.we),this.on(r.RESET_TRACKER_PREVIOUS_BATCHES,this.Pe),this.on(r.SET_TRACKER_POLLING,this.Le),this.on(r.SET_TRACKER_BATCHING,this.Ve),this.on(r.SET_TRACKER_SEND_EVENTS,this.ke),this.on(r.SET_TRACKER_PERSISTABLE_STATE,this.xe),this.on(r.SET_TRACKER_DIRTY,this.Fe),this.on(r.UPDATE_TRACKER_VISITOR_ATTRIBUTES,this.Me)},getPersistableState:function(){return this.O.isDirty?this.hasEventsToSend()||this.hasPreviousBatchesToSend()?{data:this.O.data,decisions:this.O.decisions,decisionEvents:this.O.decisionEvents,previousBatches:this.O.previousBatches}:{}:null},xe:function(e){i.isEmpty(this.O.data)||i.isEmpty(e.data)||(this.be(),this.O.previousBatches.push(this.getEventBatch())),this.O.data=e.data||{},this.O.decisions=e.decisions||[],this.O.decisionEvents=e.decisionEvents||[],i.isEmpty(this.O.previousBatches)||i.isEmpty(e.previousBatches)?this.O.previousBatches=e.previousBatches||[]:this.O.previousBatches=this.O.previousBatches.concat(e.previousBatches),this.emitChange()},Fe:function(e){this.O.isDirty=e,this.emitChange()},Oe:function(e){var t=this.Ue();!i.isEmpty(t.snapshots)&&i.isEmpty(this.O.decisionEvents)||this.Ge(),this.Be().events.push(e.event),this.O.decisions=e.decisions,this.Fe(!0)},Ne:function(e){this.O.decisionEvents.push(e.decisionEvent),this.O.decisions=e.decisions,this.Fe(!0)},Re:function(e){i.isEmpty(this.O.data)?this.O.data=e.data:this.be(),this.O.data.visitors.push(e.visitor),this.O.decisions=e.decisions,this.O.decisionEvents=[],this.Fe(!0)},De:function(e){this.O.previousBatches.push(e),this.Fe(!0)},we:function(){this.O={polling:!1,shouldBatch:!0,data:{},decisions:[],decisionEvents:[],canSend:!1,isDirty:!1,previousBatches:[]},this.emitChange()},Ce:function(){var e=this.Ue();this.O.data.visitors=[e],e.snapshots=[],this.Fe(!0)},Pe:function(){this.O.previousBatches=[],this.Fe(!0)},Le:function(e){this.O.polling=e,this.emitChange()},Ve:function(e){this.O.shouldBatch=e,this.emitChange()},ke:function(e){this.O.canSend=e,this.emitChange()},getEventBatch:function(){return i.cloneDeep(this.O.data)},getPreviousBatches:function(){return i.cloneDeep(this.O.previousBatches)},ze:function(){return this.O.decisionEvents.slice()},je:function(){this.O.decisionEvents=[]},He:function(){return this.O.decisions.slice()},isPolling:function(){return this.O.polling},shouldBatch:function(){return this.O.shouldBatch},Be:function(){return i.last(this.Ue().snapshots)},Ue:function(){return i.last(this.O.data.visitors)},Ge:function(){var e=this.ze(),t=this.Ue();t.snapshots.push({decisions:this.He(),events:e}),this.je(),this.Fe(!0)},be:function(){this.O.decisionEvents.length>0&&this.Ge()},hasEventsToSend:function(){if(!i.isEmpty(this.O.decisionEvents))return!0;if(!i.isEmpty(this.O.data)){var e=i.some(this.O.data.visitors||[],(function(e){return e.snapshots.length>0}));if(e)return!0}return!1},hasPreviousBatchesToSend:function(){return!i.isEmpty(this.O.previousBatches)},canSend:function(){return this.O.canSend},Me:function(e){var t=this.Ue();t&&(t.attributes=e.attributes)}}}),(function(e,t,n){var i=n(2),r=n(7);e.exports={initialize:function(){this.O={},this.on(r.SET_UA_DATA,this.C)},C:function(e){i.isEmpty(this.O)&&(this.O=e.data)},get:function(){return i.cloneDeep(this.O)}}}),(function(e,t,n){var i=n(2),r=n(7),a=n(20),o={globalTags:{},viewStates:{},shouldBatch:!1};e.exports={initialize:function(){this.O=i.cloneDeep(o),this.on(r.REGISTER_VIEWS,this.Ye),this.on(r.SET_VIEW_ACTIVE_STATE,this.Ke),this.on(r.UPDATE_PARSED_VIEW_METADATA,this.qe),this.on(r.UPDATE_USER_SUPPLIED_METADATA,this.Xe),this.on(r.TRACK_VIEW_ACTIVATED_EVENT,this.We),this.on(r.SET_GLOBAL_TAGS,this.Qe),this.on(r.ACTIVATE,this.$e),this.on(r.SET_VIEW_BATCHING,this.Ve)},getAll:function(){var e={};for(var t in this.O.viewStates)e[t]=this.getViewState(t);return e},shouldBatch:function(){return this.O.shouldBatch},getViewState:function(e){var t=i.cloneDeep(this.O.viewStates[e]),n=this.O.globalTags;return t.metadata=i.extend({},t.parsedMetadata,n,t.userSuppliedMetadata),t},getActiveViewTags:function(){var e=this.getActiveViewStates(),t=i.map(e,(function(e){return e.metadata})),n=[{}].concat(t);return i.extend.apply(i,n)},getActivationEventId:function(e){return this.O.viewStates[e]?this.O.viewStates[e].activationEventId:null},getActiveViewStates:function(){return i.reduce(this.O.viewStates,i.bind((function(e,t,n){return this.isViewActive(n)&&e.push(this.getViewState(n)),e}),this),[])},isViewActive:function(e){var t=this.O.viewStates[e];return t||a.warn("No Page registered with id",e),!!t.isActive},getGlobalTags:function(){return i.cloneDeep(this.O.globalTags)},$e:function(){this.O.viewStates={},this.emitChange()},Ye:function(e){i.each(e.views,i.bind((function(e){var t=e.id;this.O.viewStates[t]={id:t,isActive:!1,activatedTimestamp:null,activationEventId:null,parsedMetadata:{},userSuppliedMetadata:{}}}),this)),this.emitChange()},Ke:function(e){var t=e.view.id;if(!this.O.viewStates[t])throw new Error("No view exists with id "+t);this.O.viewStates[t].isActive=e.isActive,e.isActive?this.O.viewStates[t].activatedTimestamp=e.timestamp:(this.O.viewStates[t].parsedMetadata={},this.O.viewStates[t].userSuppliedMetadata={}),this.emitChange()},qe:function(e){var t=e.pageId;if(!this.O.viewStates[t])throw new Error("No view exists with id "+t);i.merge(this.O.viewStates[t].parsedMetadata,e.metadata),this.emitChange()},Xe:function(e){var t=e.pageId;if(!this.O.viewStates[t])throw new Error("No view exists with id "+t);i.merge(this.O.viewStates[t].userSuppliedMetadata,e.metadata),this.emitChange()},We:function(e){var t=e.pageId;this.O.viewStates[t]&&(this.O.viewStates[t].activationEventId=e.eventData.eventId,this.emitChange())},Qe:function(e){i.extend(this.O.globalTags,e),this.emitChange()},Ve:function(e){this.O.shouldBatch=e,this.emitChange()}}}),(function(e,t,n){var i=n(2),r=n(7),a=n(19);e.exports={initialize:function(){this.O={},this.on(r.DATA_LOADED,this.C)},getAll:function(){return a.safeReference(i.values(this.O))},getPagesMap:function(){return a.safeReference(this.O)},get:function(e){return a.safeReference(this.O[e])},getByApiName:function(e){return a.safeReference(i.find(i.values(this.O),{apiName:e}))},getNumberOfPages:function(){return i.keys(this.O).length},getAllViewsForActivationType:function(e){return i.filter(i.values(this.O),{activationType:e})},C:function(e){i.isEmpty(e.data.views)||(i.each(e.data.views,i.bind((function(e){a.deepFreeze(e),this.O[e.id]=e}),this)),this.emitChange())}}}),(function(e,t,n){var i=n(2),r=n(7);e.exports={initialize:function(){this.O={profile:{},metadata:{}},this.on(r.SET_VISITOR_ATTRIBUTES,this.Je),this.on(r.LOAD_EXISTING_VISITOR_PROFILE,this.Ze)},getVisitorProfile:function(){return this.O.profile},getVisitorProfileMetadata:function(){return this.O.metadata},getAttribute:function(e,t){var n=this.O.profile;return t&&(n=n[t]||{}),i.cloneDeep(n[e])},getAttributeMetadata:function(e){return i.cloneDeep(this.O.metadata[e])},Ze:function(e){this.O.profile=e.profile,this.O.metadata=e.metadata,this.emitChange()},Je:function(e){var t,n;i.each(e.attributes,i.bind((function(e){t=this.O.profile,n=this.O.metadata,e.type&&(t=this.O.profile[e.type]=this.O.profile[e.type]||{}),t[e.key]=e.value,e.metadata&&i.forOwn(e.metadata,i.bind((function(t,i){e.type&&(n=this.O.metadata[e.type]=this.O.metadata[e.type]||{}),n[e.key]=n[e.key]||{},n[e.key][i]=t}),this))}),this)),this.emitChange()}}}),(function(e,t,n){var i=n(2),r=n(7);e.exports={initialize:function(){this.O={},this.on(r.DATA_LOADED,this.et)},getCustomBehavioralAttributes:function(){return i.filter(this.O,(function(e){return!!e.rule_json}))},getVisitorAttribute:function(e){var t=i.values(this.O);if(e.datasourceId&&(t=i.filter(t,{dcp_datasource_id:String(e.datasourceId)})),e.attributeName&&e.attributeId)throw new Error("Must not specify both attribute name and attribute ID");if(e.attributeId){var n=this.O[e.attributeId];if(!n)throw new Error("Unrecognized attribute ID: "+e.attributeId);return n}if(e.attributeName){var r=i.filter(t,{name:e.attributeName});if(!r.length)throw new Error("Unrecognized attribute name: "+e.attributeName);if(r.length>1)throw new Error("Too many attributes with name: "+e.attributeName);return r[0]}throw new Error("Must specify attribute name or attribute ID")},et:function(e){i.isEmpty(e.data.visitorAttributes)||(i.each(e.data.visitorAttributes,i.bind((function(e){this.O[e.id]=e}),this)),this.emitChange())}}}),(function(e,t,n){var i=(n(2),n(7));n(58).Event;e.exports={initialize:function(){this.O={events:[],foreignEvents:{},foreignEventQueues:{}},this.on(i.SET_VISITOR_EVENTS,this.C),this.on(i.SET_FOREIGN_VISITOR_EVENTS,this.tt),this.on(i.SET_FOREIGN_VISITOR_EVENT_QUEUE,this.nt)},getEvents:function(){return this.O.events},getForeignEvents:function(){return this.O.foreignEvents},getForeignEventQueues:function(){return this.O.foreignEventQueues},C:function(e){this.O.events=e,this.emitChange()},tt:function(e){this.O.foreignEvents[e.key]=e.value},nt:function(e){this.O.foreignEventQueues[e.key]=e.value}}}),(function(e,t,n){function i(e,t,n,i,r){this[o.FIELDS.NAME]=e,this[o.FIELDS.TYPE]=t,a.isString(n)&&n.trim().length>0&&(this[o.FIELDS.CATEGORY]=n),i&&a.keys(i).length>0&&(this[o.FIELDS.OPTIONS]=i),a.isUndefined(r)||(this[o.FIELDS.REVENUE]=r)}function r(e,t,n,i){this.eventBase=e,this[o.FIELDS.TIME]=t,a.isUndefined(n)||(this[o.FIELDS.SESSION_ID]=n),a.isUndefined(i)||(this[o.FIELDS.SESSION_INDEX]=i)}var a=n(2),o=n(59),s=n(60).getFieldValue,u=n(61);t.EventBase=i,i.prototype.digest=function(){var e=function(e,t){return encodeURIComponent(e)+"="+encodeURIComponent(t)},t=[];if(t.push(e(o.FIELDS.NAME,this[o.FIELDS.NAME])),t.push(e(o.FIELDS.TYPE,this[o.FIELDS.TYPE])),this[o.FIELDS.CATEGORY]&&t.push(e(o.FIELDS.CATEGORY,this[o.FIELDS.CATEGORY])),this[o.FIELDS.REVENUE]&&t.push(e(o.FIELDS.REVENUE,this[o.FIELDS.REVENUE])),!this[o.FIELDS.OPTIONS])return t.join("&");var n=this[o.FIELDS.OPTIONS]||{},i=a.filter(a.keys(n),(function(e){return n.hasOwnProperty(e)}));i=i.sort();for(var r=0;r<i.length;r++)t.push(e(i[r],n[i[r]]));return t.join("&")},i.prototype.hash=function(){return this.hash_?this.hash_:(this.hash_=u.hashToHex(u.toByteString(this.digest()),u.Seed.BEHAVIOR_EVENT),this.hash_)},i.prototype.setHash=function(e){this.hash_=e},i.prototype.reHash=function(){this.hash_=null,this.hash()},i.prototype.equals=function(e){if(this.hash()!==e.hash())return!1;if(this[o.FIELDS.NAME]!==e[o.FIELDS.NAME]||this[o.FIELDS.TYPE]!==e[o.FIELDS.TYPE]||this[o.FIELDS.CATEGORY]!==e[o.FIELDS.CATEGORY]||this[o.FIELDS.REVENUE]!==e[o.FIELDS.REVENUE])return!1;if(!this[o.FIELDS.OPTIONS]&&!e[o.FIELDS.OPTIONS])return!0;var t=this[o.FIELDS.OPTIONS]||{},n=e[o.FIELDS.OPTIONS]||{},i=a.filter(a.keys(t),(function(e){return t.hasOwnProperty(e)})),r=a.filter(a.keys(n),(function(e){return n.hasOwnProperty(e)}));if(i.length!==r.length)return!1;for(var s=0;s<i.length;s++){var u=i[s];if(!n.hasOwnProperty(u)||t[u]!==n[u])return!1}return!0},i.prototype.getValueOrDefault=function(e,t){var n=s(this,e);return a.isUndefined(n)?t:n},i.prototype.setFieldValue=function(e,t){e!==o.FIELDS.NAME&&e!==o.FIELDS.TYPE&&e!==o.FIELDS.CATEGORY&&e!==o.FIELDS.REVENUE&&e!==o.FIELDS.OPTIONS||(this[e]=t,this.reHash())},t.Event=r,r.prototype.getValueOrDefault=function(e,t){if(0===e.length)return this;var n={};n[o.FIELDS.TIME]=this[o.FIELDS.TIME],n[o.FIELDS.SESSION_ID]=this[o.FIELDS.SESSION_ID],n[o.FIELDS.SESSION_INDEX]=this[o.FIELDS.SESSION_INDEX];var i=s(n,e);return a.isUndefined(i)?this.eventBase.getValueOrDefault(e,t):i},r.prototype.setFieldValue=function(e,t){e===o.FIELDS.TIME||e===o.FIELDS.SESSION_ID||e===o.FIELDS.SESSION_INDEX?this[e]=t:this.eventBase.setFieldValue(e,t)};var c={n:"name",y:"type",c:"category",r:"revenue",s:"session_id",o:"tags",si:"session_index"};r.prototype.readableEvent=function(){var e,t,n=function(e){return a.isString(e)?'"'+e+'"':e},i=this,r=[];a.each([o.FIELDS.NAME,o.FIELDS.TYPE,o.FIELDS.CATEGORY,o.FIELDS.REVENUE,o.FIELDS.SESSION_ID],(function(o){e=c[o],t=i.getValueOrDefault([o]),a.isUndefined(t)||r.push(e+": "+n(t))}));var s=[];if(e=c[o.FIELDS.OPTIONS],t=i.getValueOrDefault([o.FIELDS.OPTIONS]),a.isUndefined(t)||(a.each(t,(function(e,t){s.push(t+": "+String(n(e)))})),r.push(e+": {\n\t\t"+s.join(",\n\t\t")+"\n\t}")),t=i.getValueOrDefault([o.FIELDS.TIME]),a.isNumber(t)&&(t=n(new Date(t).toString())),!a.isUndefined(t)){var u="timestamp";r.push(u+": "+t)}return"{\n\t"+r.join(",\n\t")+"\n}"},r.prototype.toObject=function(e){var t,n,i={},r=this;a.each([o.FIELDS.NAME,o.FIELDS.TYPE,o.FIELDS.CATEGORY,o.FIELDS.REVENUE,o.FIELDS.OPTIONS,o.FIELDS.SESSION_INDEX],(function(e){t=c[e],n=r.getValueOrDefault([e],e===o.FIELDS.OPTIONS?{}:void 0),a.isUndefined(n)||(i[t]=n)}));var s=c[o.FIELDS.OPTIONS],u=c[o.FIELDS.REVENUE];if(e&&e.revenueAsTag&&i[u]&&(i[s]=i[s]||{},i[s][u]=i[u],delete i[u]),n=r.getValueOrDefault([o.FIELDS.TIME]),a.isNumber(n))if(e&&e.timeAsTimestamp){var l="timestamp";i[l]=new Date(n)}else{var d="time";i[d]=n}return i}}),(function(e,t){t.FIELDS={NAME:"n",TIME:"t",TYPE:"y",CATEGORY:"c",REVENUE:"r",SESSION_ID:"s",OPTIONS:"o",SESSION_INDEX:"si"},t.FIELDS_V0_2={name:t.FIELDS.NAME,time:t.FIELDS.TIME,type:t.FIELDS.TYPE,category:t.FIELDS.CATEGORY,tags:t.FIELDS.OPTIONS,session_index:t.FIELDS.SESSION_INDEX}}),(function(e,t,n){var i=n(2);t.getFieldValue=function(e,t){if(i.isArray(t)){for(var n=e,r=0;r<t.length;r++){var a=t[r];if(!i.isObject(n)||!n.hasOwnProperty(a))return;n=n[a]}return n}}}),(function(e,t,n){var i=n(62).v3,r={IGNORING:0,BUCKETING:1,FALLBACK:2,HOLDBACK:3,BEHAVIOR_EVENT:2716770798},a=Math.pow(2,32),o=function(e,t,n){return Math.floor(u(e,t)*n)},s=function(e,t){var n=i(e,t);return(n>>>16).toString(16)+(65535&n).toString(16)},u=function(e,t){var n=i(e,t);return(n>>>0)/a},c=function(e){var t=String.fromCharCode;return e.replace(/[\S\s]/gi,(function(e){e=e.charCodeAt(0);var n=t(255&e);return e>255&&(n=t(e>>>8&255)+n),e>65535&&(n=t(e>>>16)+n),n}))};e.exports={Seed:r,hashToHex:s,hashToInt:o,hashToReal:u,toByteString:c}}),(function(e,t,n){!(function(){function t(e,t){for(var n,i=e.length,r=t^i,a=0;i>=4;)n=255&e.charCodeAt(a)|(255&e.charCodeAt(++a))<<8|(255&e.charCodeAt(++a))<<16|(255&e.charCodeAt(++a))<<24,n=1540483477*(65535&n)+((1540483477*(n>>>16)&65535)<<16),n^=n>>>24,n=1540483477*(65535&n)+((1540483477*(n>>>16)&65535)<<16),r=1540483477*(65535&r)+((1540483477*(r>>>16)&65535)<<16)^n,i-=4,++a;switch(i){case 3:r^=(255&e.charCodeAt(a+2))<<16;case 2:r^=(255&e.charCodeAt(a+1))<<8;case 1:r^=255&e.charCodeAt(a),r=1540483477*(65535&r)+((1540483477*(r>>>16)&65535)<<16)}return r^=r>>>13,r=1540483477*(65535&r)+((1540483477*(r>>>16)&65535)<<16),r^=r>>>15,r>>>0}function n(e,t){var n,i,r,a,o,s,u,c;for(n=3&e.length,i=e.length-n,r=t,o=3432918353,s=461845907,c=0;c<i;)u=255&e.charCodeAt(c)|(255&e.charCodeAt(++c))<<8|(255&e.charCodeAt(++c))<<16|(255&e.charCodeAt(++c))<<24,++c,u=(65535&u)*o+(((u>>>16)*o&65535)<<16)&4294967295,u=u<<15|u>>>17,u=(65535&u)*s+(((u>>>16)*s&65535)<<16)&4294967295,r^=u,r=r<<13|r>>>19,a=5*(65535&r)+((5*(r>>>16)&65535)<<16)&4294967295,r=(65535&a)+27492+(((a>>>16)+58964&65535)<<16);switch(u=0,n){case 3:u^=(255&e.charCodeAt(c+2))<<16;case 2:u^=(255&e.charCodeAt(c+1))<<8;case 1:u^=255&e.charCodeAt(c),u=(65535&u)*o+(((u>>>16)*o&65535)<<16)&4294967295,u=u<<15|u>>>17,u=(65535&u)*s+(((u>>>16)*s&65535)<<16)&4294967295,r^=u}return r^=e.length,r^=r>>>16,r=2246822507*(65535&r)+((2246822507*(r>>>16)&65535)<<16)&4294967295,r^=r>>>13,r=3266489909*(65535&r)+((3266489909*(r>>>16)&65535)<<16)&4294967295,r^=r>>>16,r>>>0}var i=n;i.v2=t,i.v3=n;e.exports=i})()}),(function(e,t,n){var i=n(7);e.exports={initialize:function(){this.O={baseMap:{},eventQueue:[],lastEvent:null,initialized:!1,cleared:!1},this.on(i.UPDATE_BEHAVIOR_STORE,this.it)},getBaseMap:function(){return this.O.baseMap},getEventQueue:function(){return this.O.eventQueue},getLastEvent:function(){return this.O.lastEvent},getCleared:function(){return this.O.cleared},getInitialized:function(){return this.O.initialized},it:function(e){this.O[e.key]=e.value}}}),(function(e,t,n){var i=n(2),r=n(7);e.exports={initialize:function(){this.O={randomId:null},this.on(r.SET_VISITOR_ID,this.C)},getBucketingId:function(){return this.getRandomId()},getRandomId:function(){return this.O.randomId},C:function(e){i.extend(this.O,e),this.emitChange()}}}),(function(e,t,n){var i=n(2),r=n(7),a=n(23);e.exports={initialize:function(){this.O={variationIdMap:{},preferredLayerMap:{}},this.on(r.UPDATE_VARIATION_ID_MAP,this.rt),this.on(r.MERGE_VARIATION_ID_MAP,this.at),this.on(r.UPDATE_PREFERRED_LAYER_MAP,this.ot),this.on(r.MERGE_PREFERRED_LAYER_MAP,this.st)},getVariationIdMap:function(){return i.cloneDeep(this.O.variationIdMap)},getVariationIdMapString:function(){return a.stringify(this.O.variationIdMap)},rt:function(e){var t=this.O.variationIdMap,n=t[e.layerId]||{};n[e.experimentId]!==e.variationId&&(n[e.experimentId]=e.variationId,this.O.variationIdMap[e.layerId]=n,this.emitChange())},at:function(e){var t=this.getVariationIdMap(),n=e.variationIdMap;i.merge(n,t),this.O.variationIdMap=n,this.emitChange()},getPreferredLayerMap:function(){return i.cloneDeep(this.O.preferredLayerMap)},getPreferredLayerMapString:function(){return a.stringify(this.O.preferredLayerMap)},getPreferredLayerId:function(e){return this.O.preferredLayerMap[e]},ot:function(e){this.O.preferredLayerMap[e.groupId]!==e.layerId&&(this.O.preferredLayerMap[e.groupId]=e.layerId,this.emitChange())},st:function(e){var t=this.getPreferredLayerMap(),n=e.preferredLayerMap;i.merge(n,t),this.O.preferredLayerMap=n,this.emitChange()}}}),(function(e,t,n){var i=n(2),r=n(7);e.exports={initialize:function(){this.O={frames:[],defaultFrame:null,messages:[],subscribers:[],canonicalOrigins:null,disabled:!1},this.on(r.XDOMAIN_SET_DEFAULT_FRAME,this.ut),this.on(r.XDOMAIN_ADD_FRAME,this.ct),this.on(r.XDOMAIN_SET_MESSAGE,this.dt),this.on(r.XDOMAIN_ADD_SUBSCRIBER,this.ft),this.on(r.XDOMAIN_SET_CANONICAL_ORIGINS,this.pt),this.on(r.XDOMAIN_SET_DISABLED,this.ht)},getMessages:function(){return i.cloneDeep(this.O.messages)},getNextMessageId:function(){return this.O.messages.length},getMessageById:function(e){return this.O.messages[e]},getSubscribers:function(){return this.O.subscribers},getFrames:function(){return this.O.frames},getNextFrameId:function(){return this.O.frames.length},getDefaultFrame:function(){return this.O.defaultFrame},getCanonicalOrigins:function(){return i.cloneDeep(this.O.canonicalOrigins)},isDisabled:function(){return this.O.disabled},ut:function(e){this.O.defaultFrame=e},ct:function(e){this.O.frames.push(e)},dt:function(e){this.O.messages[e.messageId]=e.message},ft:function(e){this.O.subscribers.push(e.subscriber)},pt:function(e){this.O.canonicalOrigins=e.canonicalOrigins},ht:function(e){this.O.disabled=e.disabled}}}),(function(e,t,n){var i=n(2),r=n(7),a=n(19);e.exports={initialize:function(){this.O={},this.on(r.DATA_LOADED,this.C)},C:function(e){i.isEmpty(e.data.groups)||(i.each(e.data.groups,i.bind((function(e){a.deepFreeze(e),this.O[e.id]=e}),this)),this.emitChange())},getAll:function(){return a.safeReference(i.values(this.O))},getGroupsMap:function(){return a.safeReference(this.O)},get:function(e){return a.safeReference(this.O[e])}}}),(function(e,t,n){var i=n(69);t.initializeStore=i.initialize,t.addEvent=i.addEvent,t.getEvents=i.getEvents,t.usageInBytes=i.usageInBytes}),(function(e,t,n){function i(e){y.dispatch(_.SET_VISITOR_EVENTS,e)}function r(e){y.dispatch(_.UPDATE_BEHAVIOR_STORE,{key:"baseMap",value:e})}function a(e){y.dispatch(_.UPDATE_BEHAVIOR_STORE,{key:"eventQueue",value:e})}function o(e){y.dispatch(_.UPDATE_BEHAVIOR_STORE,{key:"lastEvent",value:e})}function s(e){y.dispatch(_.UPDATE_BEHAVIOR_STORE,{key:"cleared",value:e})}function u(){y.dispatch(_.UPDATE_BEHAVIOR_STORE,{key:"initialized",value:!0})}function c(){return O.getEvents()}function l(){return N.getBaseMap()}function d(){return N.getEventQueue()}function f(){return N.getLastEvent()}function p(){return N.getCleared()}function g(){return N.getInitialized()}function h(){return i(c().concat(d())),a([]),c().length>P&&(i(c().slice(-P)),!0)}var v=n(2),_=n(7),E=n(21),m=n(70),y=n(9),I=n(20),S=n(71),T=t,A=n(58).Event,w=n(59),b=n(58).EventBase,D=n(85),R=n(16),O=R.get("stores/visitor_events"),N=R.get("stores/visitor_events_manager"),C={EVENTBASE:"eb",HASH:"h",TIMEBASE:"tb",TIMESTAMPS:"ts",DELTA:"d",INDEX:"i"},P=1e3;t.initialize=function(e,t){if(!g()){T.vt(e,t);var n=c();n.length>0&&o(n[n.length-1]);var i=d();i.length>0&&o(i[i.length-1]),u()}},t.addEvent=function(e){I.debug("Behavior store: adding event",e);var t=T._t(e);o(t),a(d().concat(t)),D.reindexIfNecessary(f(),c(),d()),T.Et(d())},t.getEvents=function(){return d().length>0&&(h()&&D.sessionize(c()),T.mt(c()),T.Et(d())),c()},T.vt=function(e,t){T.yt(e,t)&&(T.mt(c()),T.Et(d())),D.sessionize(c())},T.yt=function(e,t){if(0===e.length&&0===t.length)return i([]),a([]),!1;var n=!1,r=e[0]||t[0];return C.EVENTBASE in r?(i(T.It(e)),a(T.It(t))):(n=!0,i(T.St(e)),a(T.St(t))),d().length>0&&(h(),n=!0),i(T._updateBaseMapAndMaybeDedupe(c())),T._migrateEventBasesAndUpdateStore()&&(n=!0),n},T.St=function(e){for(var t=[],n=0;n<e.length;n++){var i=e[n],r=T.Tt(i);t[n]=new A(r,i[w.FIELDS.TIME])}return t},T._migrateEventBasesAndUpdateStore=function(){var e=!1,t=T.At();return D.applyMigrations(t)&&(e=!0,r({}),i(T._updateBaseMapAndMaybeDedupe(c())),a(T._updateBaseMapAndMaybeDedupe(d()))),e},T.wt=function(){return E.now()},T._t=function(e){var t,n=e.name,i=e.type||"default",r=e.category||m.OTHER,a=e.tags||{};e.revenue&&(t=e.revenue);var o=new b(n,i,r,a,t);o=T.bt(o);var s=T.wt(),u=new A(o,s,-1);return D.updateSessionId(f(),u),D.updateSessionIndex(f(),u),u},T._updateBaseMapAndMaybeDedupe=function(e){for(var t=0;t<e.length;t++)e[t].eventBase=T.bt(e[t].eventBase);return e},T.mt=function(e){var t=T.Dt(e);S.persistBehaviorEvents(t)},T.Et=function(e){var t=T.Dt(e);S.persistBehaviorEventQueue(t)},T.Rt=function(){p()||(i([]),a([]),T.mt(c()),T.Et(d()),r({}),o(null),s(!0))},T.bt=function(e){var t=e.hash(),n=l(),i=n[t];if(v.isUndefined(i))return n[t]=[e],r(n),e;for(var a=0;a<i.length;a++)if(e.equals(i[a]))return i[a];return i.push(e),r(n),e},T.At=function(){var e=[],t=l();for(var n in t)t.hasOwnProperty(n)&&(e=e.concat(t[n]));return e},T.Dt=function(e){for(var t=function(e){var t={};t[w.FIELDS.NAME]=e.getValueOrDefault([w.FIELDS.NAME]),t[w.FIELDS.TYPE]=e.getValueOrDefault([w.FIELDS.TYPE]);var n=e.getValueOrDefault([w.FIELDS.CATEGORY]);v.isUndefined(n)||(t[w.FIELDS.CATEGORY]=n);var i=e.getValueOrDefault([w.FIELDS.REVENUE]);v.isUndefined(i)||(t[w.FIELDS.REVENUE]=i);var r=e.getValueOrDefault([w.FIELDS.OPTIONS]);return v.isUndefined(r)||(t[w.FIELDS.OPTIONS]=r),t},n=C,i=[],r="_idx_",a=0;a<e.length;a++){var o,s,u=e[a],c=u.eventBase;if(c.hasOwnProperty(r)){o=i[c[r]];var l=u[w.FIELDS.TIME]-(o[n.TIMEBASE]||0);s={},s[n.DELTA]=l,s[n.INDEX]=a,o[n.TIMESTAMPS].push(s)}else o={},o[n.EVENTBASE]=t(u),o[n.HASH]=c.hash(),o[n.TIMEBASE]=u[w.FIELDS.TIME],s={},s[n.DELTA]=0,s[n.INDEX]=a,o[n.TIMESTAMPS]=[s],i.push(o),c[r]=i.length-1}for(a=0;a<e.length;a++)delete e[a].eventBase[r];return i},T.Tt=function(e,t){var n=new b(e[w.FIELDS.NAME],e[w.FIELDS.TYPE],e[w.FIELDS.CATEGORY],e[w.FIELDS.OPTIONS],e[w.FIELDS.REVENUE]);return v.isUndefined(t)||n.setHash(t),n},T.It=function(e){for(var t=C,n=[],i=0;i<e.length;i++)for(var r=e[i],a=T.Tt(r[t.EVENTBASE],r[t.HASH]),o=r[t.TIMEBASE],s=r[t.TIMESTAMPS],u=0;u<s.length;u++){var c=s[u],l=new A(a,o+c[t.DELTA]),d=c[t.INDEX];n[d]=l}return n},t.deserialize=function(e){return T.It(e)},t.mergeAllEvents=function(e){var t=[].concat.apply([],e);return t.sort(D.sessionSortPredicate),D.sessionize(t),t}}),(function(e,t){e.exports={OTHER:"other"}}),(function(e,t,n){function i(){return u(M.LAYER_MAP)||{}}function r(e,t){b.dispatch(D.UPDATE_PREFERRED_LAYER_MAP,{groupId:e,layerId:t})}function a(){var e=H.getPreferredLayerMapString();f(M.LAYER_MAP,e,!0)}function o(e){b.dispatch(D.SET_TRACKER_PERSISTABLE_STATE,e)}function s(e,t){function n(e,n){var i;t.attributionType&&(i=C.now()),b.dispatch(D.SET_VISITOR_ATTRIBUTES,{attributes:[{key:e,value:n,metadata:{lastModified:i}}]})}if(t.getter){var i,r=t.provides;if(!t.isSticky||w.isUndefined(e[r]))try{var a=P.evaluate(t.getter);w.isFunction(a)&&(a=a((function(){return e[r]}),(function(e){return n(r,e)}))),w.isUndefined(a)||(t.isAsync?(i=a.then((function(e){n(r,e)}),(function(e){x.warn('Failed to evaluate provider for "'+t.provides+'"; error was:',e)})),b.dispatch(D.SET_VISITOR_ATTRIBUTE_PENDING,{key:r,pending:i})):n(r,a))}catch(e){x.warn('Failed to evaluate getter for provider for "'+t.provides+'"; error was: '+e.message)}return i}}function u(e){var t=p(e),n=k.getItem(t);if(!n){var i=g(e);n=k.getItem(i),d(e,n)}return w.isString(n)&&(n=A(n)),n}function c(e){var t=[];return w.each(e,(function(e){w.each(e.item,(function(n){n.namespace=e.namespace,t.push(n)}))})),t}function l(e){var t=j.getBucketingId(),n=[],i=t+"\\$\\$([^$]+?)\\$\\$"+e,r=new RegExp(i);return w.each(k.keys(),(function(e){var i=e.match(r);if(i){var a={namespace:i[1],userId:t,item:A(k.getItem(e))};n.push(a)}})),n}function d(e,t){var n=p(e),i=g(e);k.setItem(n,t),k.removeItem(i)}function f(e,t,i){try{var r=p(e);i||(t=V.stringify(t));try{k.removeItem(g(e)),k.setItem(r,t)}catch(e){throw x.warn("Visitor / Unable to set localStorage key, error was:",e),new Error("Unable to set localStorage")}n(83).setItem(r,t)}catch(e){x.warn("Unable to persist visitor data:",e.message)}}function p(e){var n=j.getBucketingId();if(!n)throw new Error("Visitor bucketingId not set");var i=t.getNamespace();if(!i)throw new Error("Namespace is not set");return[n,i,e].join("$$")}function g(e){var t=j.getBucketingId();if(!t)throw new Error("Cannot get legacy key: visitor bucketingId not set");return[t,e].join("$$")}function h(e,t){if(_(e,p(M.EVENT_QUEUE)))b.dispatch(D.SET_FOREIGN_VISITOR_EVENT_QUEUE,{key:e,value:O.deserialize(A(t))});else if(_(e,p(M.EVENTS)))b.dispatch(D.SET_FOREIGN_VISITOR_EVENTS,{key:e,value:O.deserialize(A(t))});else if(_(e,p(M.LAYER_STATES)))b.dispatch(D.LOAD_PERSISTED_LAYER_STATES,{layerStates:A(t),merge:!0});else if(_(e,p(M.VARIATION_MAP)))b.dispatch(D.MERGE_VARIATION_ID_MAP,{variationIdMap:A(t)});else if(_(e,p(M.VISITOR_PROFILE))){var n=["custom"],i=A(t);w.each(n,(function(e){var t=B.getPlugin(L.PluginTypes.visitorProfileProviders,e);if(t){if(i.profile&&i.metadata){var n=v(i,e,t.attributionType);if(!w.isEmpty(n)){var r=[];w.forOwn(n.data,(function(t,i){
var a=n.metadata[i],o={key:i,value:t,type:e,metadata:a};r.push(o)})),b.dispatch(D.SET_VISITOR_ATTRIBUTES,{attributes:r})}}}else x.debug("Attribute type",e,"not used by any audiences")}))}}function v(e,t,n){var i=Y.getAttribute(t),r=Y.getAttributeMetadata(t),a=e.profile[t],o=e.metadata[t];if(w.isEmpty(i))return{data:a,metadata:o};var s={};return w.forOwn(a,(function(e,t){var i;r&&r[t]&&(i=r[t].lastModified);var a;o&&o[t]&&(a=o[t].lastModified),(n===L.AttributionTypes.FIRST_TOUCH&&i>=a||n===L.AttributionTypes.LAST_TOUCH&&a>=i||w.isUndefined(i)&&a)&&(s.data=s.data||{},s.data[t]=e,a&&(s.metadata=s.metadata||{},s.metadata[t]=s.metadata[t]||{},s.metadata[t].lastModified=a))})),s}function _(e,t){return e.indexOf(t)>0}function E(){var e=Y.getVisitorProfile(),t=Y.getVisitorProfileMetadata(),n=B.getAllPlugins(L.PluginTypes.visitorProfileProviders);if(n){var i=w.reduce(n,(function(e,t){return t.provides&&(e[t.provides]=t),e}),{});e=w.omitBy(e,(function(e,t){var n=i[t];return n&&n.isTransient}))}return{profile:e,metadata:t}}function m(e,t){R.initializeStore(e,t)}function y(e){b.dispatch(D.LOAD_PERSISTED_LAYER_STATES,{layerStates:w.filter(e,(function(e){return!!e.decision}))})}function I(e){e=w.extend({lastSessionTimestamp:0,sessionId:null},e),b.dispatch(D.LOAD_SESSION_STATE,e)}function S(){return"oeu"+C.now()+"r"+Math.random()}function T(e){var t,n,i=B.getAllPlugins(L.PluginTypes.visitorProfileProviders),r=w.filter(i,(function(e){return w.isFunction(e.restorer)}));e.profile&&e.metadata?(t=e.profile,n=e.metadata):(t=e,n={}),t=w.reduce(t,(function(e,t,n){var i=t,a=w.find(r,{provides:n});return a&&(i=a.restorer(t)),e[n]=i,e}),{}),b.dispatch(D.LOAD_EXISTING_VISITOR_PROFILE,{profile:t,metadata:n})}function A(e){try{return V.parse(e)}catch(t){return x.debug("Failed to parse: ",e,t),null}}var w=n(2),b=n(9),D=n(7),R=n(68),O=n(69),N=n(72),C=n(21),P=n(16),L=n(22),V=n(23),k=n(78).LocalStorage,x=n(20),F=n(12).Promise,M=n(22).VisitorStorageKeys,U=P.get("stores/global"),G=P.get("stores/layer"),B=P.get("stores/plugins"),z=P.get("stores/session"),j=P.get("stores/visitor_id"),H=P.get("stores/visitor_bucketing"),Y=P.get("stores/visitor"),K=P.get("stores/provider_status");t.getIdFromCookies=function(){var e=N.get(L.COOKIES.VISITOR_ID);return e||(e=S()),{randomId:e}},t.setId=function(e){var n=j.getBucketingId();if(b.dispatch(D.SET_VISITOR_ID,e),j.getBucketingId()!==n){t.loadData();try{t.persistVisitorId(e)}catch(e){if(x.error("Visitor / Unable to persist visitorId, disabling tracking"),b.dispatch(D.LOAD_DIRECTIVE,{trackingDisabled:!0}),e instanceof N.MismatchError)throw x.error("Visitor / Cookie not set to correct value:",e),new Error("Cookie mismatch error while persisting visitorId");throw e}}t.refreshSession()},t.getVariationIdMap=function(){return u(M.VARIATION_MAP)||{}},t.updateVariationIdMap=function(e,t,n){b.dispatch(D.UPDATE_VARIATION_ID_MAP,{layerId:e,experimentId:t,variationId:n})},t.persistVariationIdMap=function(){var e=H.getVariationIdMapString();f(M.VARIATION_MAP,e,!0)},t.getPreferredLayerMap=i,t.updatePreferredLayerMap=r,t.persistTrackerOptimizelyData=function(e){f(M.TRACKER_OPTIMIZELY,e)},t.refreshSession=function(){b.dispatch(D.REFRESH_SESSION)},t.populateEagerVisitorData=function(e,n){var i=w.filter(e,(function(e){return!e.isLazy})),r=t.populateVisitorData(i,n);return r},t.populateLazyVisitorData=function(e,n){var i=w.filter(e,(function(e){return e.isLazy}));return t.populateVisitorData(i,n)},t.populateVisitorData=function(e,t){t=t||{};var n=w.partial(s,t),i=w(e).filter({isAsync:!0}).map(n).filter().value();return w.forEach(w.filter(e,(function(e){return!e.isAsync})),n),i.length>0?F.all(i):F.resolve()},t.loadData=function(){m(u(M.EVENTS)||[],u(M.EVENT_QUEUE)||[]);var e=l(M.LAYER_STATES);y(c(e)),I(u(M.SESSION_STATE)||{}),T(u(M.VISITOR_PROFILE)||{});var n=u(M.TRACKER_OPTIMIZELY);n&&o(n),t.loadForeignData(),t.removeLegacySessionStateCookies()},t.persistBehaviorEvents=function(e){f(M.EVENTS,e)},t.persistBehaviorEventQueue=function(e){f(M.EVENT_QUEUE,e)},t.persistLayerStates=function(){var e=G.getLayerStates(t.getNamespace());e=w.map(e,(function(e){return w.omit(e,"namespace")})),f(M.LAYER_STATES,e)},t.persistSessionState=function(){f(M.SESSION_STATE,z.getState())},t.persistVisitorProfile=function(){f(M.VISITOR_PROFILE,E())},t.persistVisitorBucketingStore=function(){t.persistVariationIdMap(),a()},t.getUserIdFromKey=function(e,n){var i;return w.includes(e,n)&&w.includes(e,"_")&&w.includes(e,"$$")&&w.includes(e.slice(e.indexOf("$$")),t.getNamespace())&&(i=e.slice(e.indexOf("_")+1,e.indexOf("$$"))),i},t.persistVisitorId=function(e){N.remove(L.COOKIES.VISITOR_UUID),e.randomId&&N.set(L.COOKIES.VISITOR_ID,e.randomId)},t.getAttribute=function(e){return Y.getAttribute(e)},t.getPendingAttributeValue=function(e){return K.getPendingAttributeValue(e)},t.loadForeignData=function(){w.each(k.keys(),(function(e){var t=k.getItem(e);t&&h(e,t)}))},t.getNamespace=function(){return U.getNamespace()},t.removeLegacySessionStateCookies=function(){var e=N.getAll();w.forEach(w.keys(e),(function(e){0===e.indexOf(L.COOKIES.SESSION_STATE+"$$")&&N.remove(e)}))}}),(function(e,t,n){function i(e,n){n!==!1&&(n=!0);for(var i,a,o=e.hostname.split("."),s=[],u=null,l=o.length-1;l>=0;l--)if(s.unshift(o[l]),i=s.join("."),!r.includes(h,i)){a={domain:n?"."+i:i};try{t.set(v,Math.random().toString(),a),t.remove(v,a),u=a.domain;break}catch(e){}}return d.dispatch(c.SET_COOKIE_DOMAIN,u),u}var r=n(2),a=n(73).create,o=n(21),s=n(77),u=n(36),c=n(7),l=n(16),d=n(9),f=l.get("stores/cookie_options"),p=t.SetError=a("CookieSetError"),g=t.MismatchError=a("CookieMismatchError");t.getAll=function(e){r.isUndefined(e)&&(e=!0);var n,i,a,o,u;n=s.getCookieString().split(/\s*;\s*/);var c={};for(a=0;a<n.length;a++)if(i=n[a],o=i.indexOf("="),o>0&&(u=t.safeDecodeURIComponent(i.substring(0,o)),void 0===c[u])){var l=i.substring(o+1);e&&(l=t.safeDecodeURIComponent(l)),c[u]=l}return c},t.safeDecodeURIComponent=function(e){try{return decodeURIComponent(e)}catch(t){return e}},t.get=function(e,n){var i=t.getAll(n);return i[e]},t.set=function(e,n,a,c){a=r.extend({encodeValue:!0},a),c!==!1&&(c=!0);var l=[];if(r.isUndefined(a.domain)){var d=f.getCurrentDomain();d||(d=i(u.getLocation(),!0)),a.domain=d}if(a.domain&&l.push("domain="+a.domain),r.isUndefined(a.path)&&(a.path="/"),a.path&&l.push("path="+a.path),r.isUndefined(a.expires)){var h=r.isUndefined(a.maxAge)?f.getDefaultAgeInSeconds():a.maxAge;a.expires=new Date(o.now()+1e3*h)}if(r.isUndefined(a.expires)||l.push("expires="+a.expires.toUTCString()),a.secure&&l.push("secure"),l=l.join(";"),s.setCookie(e+"="+(a.encodeValue?encodeURIComponent(n):n)+";"+l),c){var v=a.encodeValue,_=t.get(e,v);if(_!==n){if(!_)throw new p('Failed to set cookie "'+e+'"');throw new g('Expected "'+n+'" for "'+e+'", got "'+_+'"')}}},t.remove=function(e,n){t.set(e,null,r.extend({},n,{expires:new Date(0)}),!1)};var h=["optimizely.test"],v="optimizelyDomainTestCookie"}),(function(e,t,n){var i=n(74),r=i("InternalError");t.BaseError=r,t.create=function(e){return i(e,r)}}),(function(e,t,n){function i(e,t){function n(t){if(!(this instanceof n))return new n(t);try{throw new Error(t)}catch(t){t.name=e,this.stack=t.stack}r&&this.stack&&(this.stack=a(this.stack,e,t)),this.message=t||"",this.name=e}return n.prototype=new(t||Error),n.prototype.constructor=n,n.prototype.inspect=function(){return this.message?"["+e+": "+this.message+"]":"["+e+"]"},n.prototype.name=e,n}var r=n(75)(),a=n(76);e.exports=i}),(function(e,t){"use strict";e.exports=function(){var e=new Error("yep");return!!e.stack&&"Error: yep\n"===e.stack.substr(0,11)}}),(function(e,t){"use strict";e.exports=function(e,t,n){var i=t;return n&&(i+=": "+n),e=i+e.slice(e.indexOf("\n"))}}),(function(e,t,n){function i(){return"loading"===t.getReadyState()}var r=n(16),a=r.get("stores/global");t.getDocumentElement=function(){return document.documentElement},t.getCookieString=function(){return document.cookie||""},t.setCookie=function(e){document.cookie=e},t.querySelector=function(e){return document.querySelector(e)},t.querySelectorAll=function(e){return document.querySelectorAll(e)},t.childrenOf=function(e){return Array.prototype.slice.call(e.querySelectorAll("*"))},t.createElement=function(e){return document.createElement(e)},t.isReady=function(){return a.domContentLoadedHasFired()||"interactive"===document.readyState||"complete"===document.readyState},t.isLoaded=function(){return"complete"===document.readyState},t.addReadyHandler=function(e){return document.addEventListener("DOMContentLoaded",e),function(){t.removeReadyHandler(e)}},t.removeReadyHandler=function(e){return function(){document.removeEventListener("DOMContentLoaded",e)}},t.getReferrer=function(){return document.referrer},t.getReadyState=function(){return document.readyState},t.write=function(e){if(!i())throw new Error("Aborting attempt to write to already-loaded document");document.write(e)},t.appendToHead=function(e){return t.appendTo(document.head,e)},t.appendTo=function(e,t){e.appendChild(t)},t.addEventListener=function(e,t,n){return document.addEventListener(e,t,n),function(){document.removeEventListener(e,t,n)}},t.getCurrentScript=function(){if(document.currentScript)return document.currentScript},t.parentElement=function(e){for(var t=e.parentNode;t.nodeType!==Node.ELEMENT_NODE;)t=t.parentNode;return t}}),(function(e,t,n){var i,r="optimizely_data",a=n(79),o=n(73).create,s=n(81),u=n(36),c=t.Error=o("StorageError"),l=u.getGlobal("localStorage");l?i=s.create(l,r):(a.emitError(new c("Failed to initialize localStorage")),i=s.mockStorage),t.LocalStorage=i}),(function(e,t,n){var i=n(80);t.emitError=function(e,t,n){var r=!0;i.emit({type:"error",name:e.name||"Error",data:{error:e,metadata:t}},n||!1,r)},t.emitInternalError=function(e,n){t.emitError(e,n,!0)},t.emitAnalyticsEvent=function(e,t){var n={type:"analytics",name:"trackEvent",data:e};i.emit(n,t)}}),(function(e,t,n){var i=n(2),r=n(5),a=n(7),o=n(79),s=n(16),u=n(9),c=n(20),l=s.get("stores/event_emitter");t.on=function(e){return e.token||(e.token=r.generate()),u.dispatch(a.ADD_EMITTER_HANDLER,e),e.token},t.off=function(e){u.dispatch(a.REMOVE_EMITTER_HANDLER,{token:e})},t.emit=function(e,t,n){var r=l.getHandlers(e,t);i.each(r,(function(i){try{i.handler.call({$di:s},e)}catch(r){!n&&i.emitErrors?(c.error("Error in handler for event:",e,r),o.emitError(r,null,t)):c.warn("Suppressed error in handler for event:",e,r)}}))}}),(function(e,t,n){function i(e,t){this.Ot=e,this.Nt=t}var r=n(2),a=n(20),o="$$";i.prototype.Ct=function(e){return[this.Nt,e].join(o)},i.prototype.Pt=function(e){return e.replace(this.Nt+o,"")},i.prototype.setItem=function(e,t){try{this.Ot.setItem(this.Ct(e),t)}catch(t){a.warn("Failed to save",e,"to localStorage:",t)}},i.prototype.removeItem=function(e){this.Ot.removeItem(this.Ct(e))},i.prototype.getItem=function(e){var t=null;try{t=this.Ot.getItem(this.Ct(e))}catch(e){}return t},i.prototype.keys=function(){var e=r.keys(this.Ot);return r.map(e,r.bind(this.Pt,this))},i.prototype.allKeys=function(){return r.keys(this.Ot)},i.prototype.allValues=function(){return r.values(this.Ot)},e.exports={create:function(e,t){return new i(e,t)},mockStorage:{keys:function(){},getItem:function(e){},removeItem:function(e){},setItem:function(e,t){}}}}),(function(e,t,n){function i(){return u.getGlobal("performance")}var r=n(7),a=n(73).create,o=n(21),s=n(9),u=n(36),c=n(16),l=c.get("stores/rum"),d="optimizely:",f=t.Error=a("PerformanceError");t.time=function(e){if(l.getSampleRum()){var t=i();if(t&&t.mark){var n=d+e;t.clearMarks(n+"Begin"),t.mark(n+"Begin")}}},t.timeEnd=function(e){if(l.getSampleRum()){var t=i();if(t&&t.mark){var n=d+e,a=t.getEntriesByName(n+"Begin");if(0===a.length)throw new f("Called timeEnd without matching time: "+e);t.clearMarks(n+"End"),t.mark(n+"End");var o=t.getEntriesByName(n+"End"),u=e+"Time",c=o[0].startTime-a[0].startTime;s.dispatch(r.SET_PERFORMANCE_MARKS_DATA,{name:u,data:{startTime:Math.round(1e3*a[0].startTime)/1e3,duration:Math.round(1e3*c)/1e3}})}}},t.now=function(){var e=i();return e?e.now():o.now()}}),(function(e,t,n){function i(e){var t;if(!o.find(y.getFrames(),{origin:e.origin}))return void m.debug("XDomain","No frame found for origin: "+e.origin);try{t=h.parse(e.data)}catch(t){return void m.debug("XDomain","Ignoring malformed message event:",e)}if("ERROR"===t.type)l.dispatch(u.XDOMAIN_SET_DISABLED,{disabled:!0}),d.emitInternalError(new I("Xdomain Error: "+t.response.toString()));else if("SYNC"===t.type)o.each(y.getSubscribers(),(function(e){e(t.response.key,t.response.value)}));else{var n=y.getMessageById(t.id);if(!n){if(m.warn("XDomain","No stored message found for ID",t.id),o.isNumber(t.id)){var i=y.getNextMessageId();t.id>=i?d.emitInternalError(new I("Message ID is greater than expected maximum ID ("+t.id+">"+i+")")):t.id<0?d.emitInternalError(new I("Message ID is < 0: "+t.id)):d.emitInternalError(new I("No stored message found for message ID: "+t.id))}else d.emitInternalError(new I("Message ID is not a number: "+t.id.toString()));return}n.resolver(t.response),l.dispatch(u.XDOMAIN_SET_MESSAGE,{messageId:t.id,message:o.extend({},n,{endTime:p.now(),response:t.response})})}}function r(e,t){return t||(t=y.getDefaultFrame()),new s(function(n){var i={data:o.extend({},e,{id:y.getNextMessageId()}),resolver:n};t?y.isDisabled()||a(i,t):l.dispatch(u.XDOMAIN_SET_MESSAGE,{messageId:i.data.id,message:i})})}function a(e,t){var n=e.data;l.dispatch(u.XDOMAIN_SET_MESSAGE,{messageId:e.data.id,message:o.extend({},e,{startTime:p.now()})}),t.target.postMessage(h.stringify(n),t.origin)}var o=n(2),s=n(12).Promise,u=n(7),c=n(16),l=n(9),d=n(79),f=n(73).create,p=n(21),g=n(77),h=n(23),v=n(84),_=n(71),E=n(36),m=n(20),y=c.get("stores/xdomain"),I=t.Error=f("XDomainStorageError");t.setItem=function(e,t,n){return r({type:"PUT",key:e,value:t},n)},t.getItem=function(e,t){return r({type:"GET",key:e},t)},t.fetchAll=function(e){return r({type:"GETALL"},e)},t.subscribe=function(e){l.dispatch(u.XDOMAIN_ADD_SUBSCRIBER,{subscriber:e})},t.loadIframe=function(e,t){return new s(function(n){var i=g.createElement("iframe");i.src=e+t,i.hidden=!0,i.setAttribute("aria-hidden","true"),i.setAttribute("tabindex","-1"),i.style.display="none",i.height=0,i.width=0,i.onload=function(){var r={id:y.getNextFrameId(),target:i.contentWindow,origin:e,path:t};l.dispatch(u.XDOMAIN_ADD_FRAME,r),n(r)},g.appendTo(g.querySelector("body"),i)})},t.loadCanonicalOrigins=function(e){l.dispatch(u.XDOMAIN_SET_CANONICAL_ORIGINS,{canonicalOrigins:e})},t.getXDomainUserId=function(e,t){var n,i={};return o.each(t,(function(t){i[t]=[],o.each(o.keys(e),(function(e){var r=_.getUserIdFromKey(e,t);!n&&r&&(n=r),r&&!o.includes(i[t],r)&&i[t].push(r)}))})),m.debug("XDomain: Found userIds:",i),n},t.load=function(e,n){E.addEventListener("message",i);var r=function(){return!!g.querySelector("body")},s=function(){return t.loadIframe(e,n)};return v.pollFor(r).then(s).then((function(e){l.dispatch(u.XDOMAIN_SET_DEFAULT_FRAME,e),y.isDisabled()||o.each(y.getMessages(),(function(t){t.startTime||a(t,e)}))}))}}),(function(e,t,n){var i=n(2),r=n(12).Promise,a=100,o=50;t.pollFor=function(e,t,n){var s,u;return i.isFunction(n)?u=n:(s=n||a,u=function(){return s--,s<-1}),t=t||o,new r(function(n,i){!(function r(){var a;if(!u()){try{var o=e();if(o)return n(o)}catch(e){a=e}return setTimeout(r,t)}i(a||new Error("Poll timed out"))})()})}}),(function(e,t,n){function i(e,n){var i;i=t.isInSameSession(e,n)?e.getValueOrDefault([s.FIELDS.SESSION_ID]):n.getValueOrDefault([s.FIELDS.TIME]),n.setFieldValue(s.FIELDS.SESSION_ID,i)}function r(e,n,i){var r,a=e.getValueOrDefault([s.FIELDS.SESSION_INDEX]);r=t.isInSameSession(n,e)?a:i?a+1:a-1,n.setFieldValue(s.FIELDS.SESSION_INDEX,r)}var a=n(58).Event,o=n(21),s=n(59),u=n(58).EventBase,c=18e5;t.isInSameSession=function(e,t){var n=e.getValueOrDefault([s.FIELDS.TIME],0),i=t.getValueOrDefault([s.FIELDS.TIME],0);return Math.abs(n-i)<c},t.updateSessionId=function(e,t){if(!e)return void t.setFieldValue(s.FIELDS.SESSION_ID,t.getValueOrDefault([s.FIELDS.TIME]));var n=e.getValueOrDefault([s.FIELDS.TIME]),r=e.getValueOrDefault([s.FIELDS.SESSION_ID]),o=t.getValueOrDefault([s.FIELDS.TIME]);n="number"!=typeof n?o-36e5:n,r="number"!=typeof r?n:r,e=new a(new u("",""),n,r),i(e,t)},t.updateSessionIndex=function(e,t){if(!e)return void t.setFieldValue(s.FIELDS.SESSION_INDEX,0);var n=e.getValueOrDefault([s.FIELDS.TIME]),i=e.getValueOrDefault([s.FIELDS.SESSION_INDEX]),o=t.getValueOrDefault([s.FIELDS.TIME]),c=e.getValueOrDefault([s.FIELDS.SESSION_ID]);n="number"!=typeof n?o-36e5:n,i="number"!=typeof i?0:i,c="number"!=typeof c?n:c,e=new a(new u("",""),n,c,i),r(e,t,!1)},t.sessionize=function(e){var t=e.length;if(0!==t){e[0].setFieldValue(s.FIELDS.SESSION_ID,e[0].getValueOrDefault([s.FIELDS.TIME]));for(var n=1;n<t;n++)i(e[n-1],e[n]);var a=e[t-1].getValueOrDefault([s.FIELDS.TIME]),u=o.now(),l=u-a>c?1:0;e[t-1].setFieldValue(s.FIELDS.SESSION_INDEX,l);for(var n=t-1;n>0;n--)r(e[n],e[n-1],!0)}},t.reindexIfNecessary=function(e,t,n){function i(e){for(var t=0;t<e.length;t++){var n=e[t].getValueOrDefault([s.FIELDS.SESSION_INDEX]);e[t].setFieldValue(s.FIELDS.SESSION_INDEX,n+1)}}e.getValueOrDefault([s.FIELDS.SESSION_INDEX])===-1&&(i(t),i(n))},t.sessionSortPredicate=function(e,t){return e[s.FIELDS.TIME]-t[s.FIELDS.TIME]},t.applyMigrations=function(e){return!1}}),(function(e,t,n){var i=n(2),r=n(7),a=n(21),o=n(9),s=n(23),u=n(20),c=n(12).Promise,l=n(87),d=3;t.isCORSSupported=function(){var e=l.get("XMLHttpRequest");return"withCredentials"in new e},t.request=function(e){return e=i.extend({method:"GET",async:!0,contentType:"text/plain;charset=UTF-8"},e),new c(function(n,r){if(!t.isCORSSupported())return r("CORS is not supported");var a=l.get("XMLHttpRequest"),o=new a;o.onload=function(){e.success&&e.success(o),n(o)},o.onerror=function(){e.error&&e.error(o),r(o)},i.isObject(e.data)&&(e.data=s.stringify(e.data)),o.open(e.method,e.url,e.async),o.setRequestHeader("Content-Type",e.contentType),o.send(e.data)})},t.retryableRequest=function(e,n,s,l){if(!n)return c.reject(new Error("No id specified for request."));if(!t.isCORSSupported())return c.reject(new Error("CORS is not supported."));i.isUndefined(l)&&(l=d),i.isUndefined(s)&&(s=0);var f={id:n,timeStamp:a.now(),data:e,retryCount:s};return o.dispatch(r.SET_PENDING_EVENT,f),u.debug("Sending event ",n),t.request(e).then((function(e){return o.dispatch(r.REMOVE_PENDING_EVENT,{id:n}),e}),(function(e){throw f.retryCount>=l?(o.dispatch(r.REMOVE_PENDING_EVENT,{id:n}),u.warn("Event ",f," could not be sent after ",l," attempts.")):(f.retryCount++,o.dispatch(r.SET_PENDING_EVENT,f),u.debug("Event ",f," failed to send, with error ",e," It will be retried ",l-s," times.")),e}))},t.sendBeacon=t.request}),(function(e,t,n){var i=n(2),r=n(7),a=n(21),o=n(16),s=n(77),u=n(22),c=n(9),l=n(20),d=o.get("stores/sandbox"),f=n(36);t.shouldSandbox=function(){return!1},t.get=function(e){if(!e)throw new Error("Name is required");if(t.shouldSandbox()){d.isInitialized()||p();var n=d.get(e);if(n)return n}return f.getGlobal(e)};var p=function(){try{var e="optimizely_"+a.now(),t=s.createElement("iframe");t.name=e,t.style.display="none",s.appendToHead(t);var n=t.contentWindow,o=t.contentDocument;o.write("<script></script>"),o.close();var d=i.mapValues(u.SandboxedFunctions,(function(e){return n[e]}));c.dispatch(r.SANDBOXED_FUNCTIONS_ADDED,{sandboxedFunctions:d}),t.parentNode.removeChild(t)}catch(e){l.warn("Unable to create a sandbox: ",e)}}}),(function(e,t,n){var i=n(2),r=n(20),a=n(89),o=n(16),s=o.get("stores/plugins"),u=n(7),c=n(22),l=n(9),d=[n(103),n(104),n(123)],f=["disable","load","optOut"];t.push=function(e,t){var n,a,o,s;if(!i.isArray(e)&&i.isObject(e))s=i.isUndefined(e.version)?1:e.version,n=e.type,o=[e];else if(i.isArray(e))s=0,n=e[0],o=e.slice(1);else{if(!i.isString(e))return r.warn("API / Ignoring non-array/object/string argument:",e),!1;s=0,n=e,o=[]}if(d[s]&&(a=d[s][n]),t&&f.indexOf(n)===-1)return r.debug("API / Ignoring non high priority function:",n,o),!1;if(!a)return r.warn('API / No function found for "'+n+'" (v'+s+") with arguments:",o),!1;r.log('API / Executing: "'+n,'" with arguments:',o);try{a.apply(null,o),l.dispatch(u.RECORD_API_USAGE,{methodName:s?"v"+s+"."+n:n})}catch(e){r.error(e)}return!0},t.get=function(e){r.log('API / Getting module: "'+e+'"');var t=a[e];return t?i.isArray(t)&&(t=o.evaluate(t)):t=s.getPlugin(c.PluginTypes.apiModules,e),t?(l.dispatch(u.RECORD_API_USAGE,{methodName:"get."+e}),t):void r.warn('Module "'+e+'" not found.')}}),(function(e,t,n){function i(e,t,n,i){var r=e.getLayerState(i),a=t.get(i),s=n.get();if(!r||!a)return s?{layer:{name:s.layerName,id:s.layerId,policy:s.layerPolicy,integrationStringVersion:s.integrationStringVersion},experiment:{name:s.experimentName,id:s.experimentId},variation:{name:s.variationName,id:s.variationId},isLayerHoldback:!1}:null;if(d.isSingleExperimentPolicy(a.policy)&&r.decision.isLayerHoldback)return null;var u=r.decision.experimentId,c=r.decision.variationId;if(!u||!c)return null;var l,f;return(l=o.find(a.experiments,{id:u}))?(f=o.find(l.variations,{id:c}),f?{layer:{name:a.name,id:a.id,policy:a.policy,integrationStringVersion:a.integrationStringVersion},experiment:{name:l.name,id:l.id},variation:{name:f.name,id:f.id},isLayerHoldback:r.decision.isLayerHoldback}:null):null}function r(e,t,n,i,r,s){var u=[],c=e.getLayerStates();s.onlySingleExperiments&&(c=o.filter(c,(function(e){var n=t.get(e.layerId);return n&&d.isSingleExperimentPolicy(n.policy)})));var l=o.map(c,(function(e){var t=!!e.decision.variationId,n=e.decisionActivationId&&e.decisionActivationId===i.getActivationId(),r=f.getExperimentAndVariation(),a=r?r.variationId:null,s=t&&e.decision.variationId===a;return o.extend(e,{isActive:t&&n||s,visitorRedirected:s})})),p=r?o.filter(l,r):l;return o.each(p,(function(e){var i=a(e,t,n,s.includeOfferConsistency);i&&u.push(i)})),u}function a(e,t,n,i){var r,a,s=e.layerId,u=t.get(s)||{},c=o.map(u.experiments,(function(e){return o.pick(e,["id","name"])}));if(i||!u.decisionMetadata||!u.decisionMetadata.offerConsistency){var l={id:s,campaignName:u.name||null,experiment:null,allExperiments:c,variation:null,reason:e.decision.reason,isActive:e.isActive,visitorRedirected:e.visitorRedirected,isInCampaignHoldback:e.decision.isLayerHoldback};e.decision&&e.decision.experimentId&&(r=o.find(u.experiments,{id:e.decision.experimentId})),r&&(l.experiment=o.pick(r,["id","name","campaignName"])),r&&e.decision.variationId&&(a=o.find(r.variations,{id:e.decision.variationId})),a&&(l.variation=o.pick(a,["id","name"]));var d=o.map(e.decisionTicket.audienceIds,(function(e){return o.pick(n.get(e),["id","name"])}));return l.audiences=d,u.decisionMetadata&&u.decisionMetadata.offerConsistency&&(l.pageId=e.pageId),l}}var o=n(2),s=n(90),u=n(91),c=n(92),l=n(94),d=n(40),f=n(95);t.data=["stores/audience_data","stores/event_data","stores/layer_data","stores/view_data","stores/group_data","stores/global",function(e,t,n,i,r,a){var u={},d={},f={},p={audiences:e.getAudiencesMap(),events:t.getEventsMap(),campaigns:u,pages:i.getPagesMap(),experiments:d,variations:f,projectId:a.getProjectId(),snippetId:a.getSnippetId(),accountId:a.getAccountId(),dcpServiceId:a.getDCPServiceId(),revision:a.getRevision(),clientVersion:s.VERSION},g=l.dereferenceChangeId;return o.each(n.getAll(),(function(e){c.defineProperty(u,e.id,(function(){var t=o.extend({},e);return c.defineProperty(t,"changes",(function(){return o.map(e.changes,g)}),"campaign"),c.defineProperty(t,"experiments",(function(){return o.map(e.experiments,(function(e){return d[e.id]}))}),"campaign"),t}),"campaignMap","byId"),o.each(e.experiments,(function(e){c.defineProperty(d,e.id,(function(){var t=o.extend({},e);return c.defineProperty(t,"changes",(function(){return o.map(e.changes,g)}),"experiment"),c.defineProperty(t,"variations",(function(){return o.map(e.variations,(function(e){return f[e.id]}))}),"experiment"),t}),"experimentMap"),o.each(e.variations,(function(e){c.defineProperty(f,e.id,(function(){var t=o.extend({},e);return c.defineProperty(t,"actions",(function(){return o.map(e.actions,(function(e){return o.extend({},e,{changes:o.map(e.changes,g)})}))}),"variation"),t}),"variationMap","byId")}))}))})),p.groups=r.getGroupsMap(),p}],t.session=["stores/session",function(e){return e.getState()}],t.visitor=["stores/visitor",function(e){return o.cloneDeep(e.getVisitorProfile())}],t.visitor_id=["stores/visitor_id",function(e){return{randomId:e.getRandomId()}}],t.state=["stores/audience_data","stores/layer_data","stores/layer","stores/view_data","stores/view","stores/global","stores/observed_redirect",function(e,t,n,a,s,c,l){return{getCampaignStates:function(i){var a={},s=r(n,t,e,c,i,{includeOfferConsistency:!1});return o.each(s,(function(e){a[e.id]=e})),a},getExperimentStates:function(i){var a=r(n,t,e,c,i,{includeOfferConsistency:!1,onlySingleExperiments:!0}),s=["audiences","variation","reason","visitorRedirected","isActive"],u=o.reduce(a,(function(e,t){var n=t.allExperiments[0];return e[n.id]=o.extend({},o.pick(t,s),{id:n.id,experimentName:n.name,isInExperimentHoldback:t.isInCampaignHoldback}),e}),{});return u},getCampaignStateLists:function(i){var a={},s=r(n,t,e,c,i,{includeOfferConsistency:!0});return o.each(s,(function(e){var t=e.id;a[t]||(a[t]=[]),a[t].push(e)})),a},getPageStates:function(e){var t=s.getAll(),n=o.reduce(t,(function(e,t){var n=a.get(t.id);return e[t.id]=o.extend({},o.pick(n,["id","name","apiName","category","staticConditions","tags"]),o.pick(t,["isActive","metadata"])),e}),{});return e?o.pickBy(n,e):n},isGlobalHoldback:function(){return c.isGlobalHoldback()},getActivationId:function(){return c.getActivationId()},getVariationMap:function(){var e=n.getLayerStates(),i={};return o.each(e,(function(e){var n=t.get(e.layerId);if(e.decision&&e.decision.experimentId&&(i[e.decision.experimentId]={id:e.decision.variationId,name:null,index:null},n)){var r=o.find(n.experiments,{id:e.decision.experimentId});if(r&&e.decision.variationId)var a=o.find(r.variations,{id:e.decision.variationId}),s=o.findIndex(r.variations,{id:e.decision.variationId});a&&(i[e.decision.experimentId]={id:e.decision.variationId,name:a.name,index:s})}})),i},getActiveExperimentIds:function(){var e={};return o.each(this.getCampaignStateLists({isActive:!0}),(function(t){o.each(t,(function(t){e[t.experiment.id]=!0}))})),o.keys(e)},getRedirectInfo:function(){var e=f.getExperimentAndVariation();return e&&(e.referrer=f.getReferrer()),e},getDecisionString:function(e){if(!e)throw new Error("Must pass a config to getDecisionString");e=o.extend({maxLength:255,shouldCleanString:!1},e);var r=i(n,t,l,e.campaignId);return r?u.generateAnalyticsString(r.layer,r.experiment,r.variation,r.isLayerHoldback,e.maxLength,e.shouldCleanString):null},getDecisionObject:function(e){if(!e)throw new Error("Must pass a config to getDecisionObject");e=o.extend({maxLength:255,shouldCleanString:!1},e);var r=i(n,t,l,e.campaignId);if(!r)return null;var a=u.formatNamesAndIdsForAnalytics(r.layer,r.experiment,r.variation,e.shouldCleanString),s=o.mapValues(a.names,(function(t,n){return u.combineAndTruncateIdAndName(t,a.idStrings[n],e.maxLength)})),c={experiment:s.experiment,variation:s.variation};return d.isSingleExperimentPolicy(r.layer.policy)||o.extend(c,{campaign:s.layer,holdback:r.isLayerHoldback}),c}}}],t.utils=n(96).create(),t.jquery=["env/jquery",function(e){return e}],t.event_emitter=n(102)}),(function(e,t,n){t.VERSION="0.91.0",t.ENGINE="js"}),(function(e,t,n){function i(e){return e.replace(/[^a-zA-Z0-9\.\~\!\*\(\)\']+/g,"_")}function r(e){return!u.isEmpty(e)&&u.includes(["and","or","not"],e[0])}function a(e,t){var n="";return u.isEmpty(t)?n=d:(n=u.reduce(t,(function(t,n){var r=e.get(n);return r?t+i(r.name?r.name:r.id)+",":t}),""),n=n.slice(0,-1)),n}function o(e,n,i,r,a,o){if(!v.isSingleExperimentPolicy(e.policy)||!r){var s=!v.isSingleExperimentPolicy(e.policy)&&r,c=t.formatNamesAndIdsForAnalytics(e,n,i,o),d=[c.names.experiment,c.names.variation],p=[c.idStrings.experiment,c.idStrings.variation];v.isSingleExperimentPolicy(e.policy)||(d.unshift(c.names.layer),p.unshift(c.idStrings.layer));var g=u.reduce(p,(function(e,t){return e+t.length}),0),h=d.length-1+(s?1:0),_=h*l.length,E=g+_;if(s&&(E+=f.length),E>a)throw new Error("The analytics string size is too low to send the entity IDs.");for(var m=a-E,y=d.length,I=[],S=d.length-1;S>=0;S--){var T=d[S],A=Math.min(T.length,Math.floor(m/y));m-=A,y--,I.unshift(T.substring(0,A))}var w=u.map(I,(function(e,t){return e+p[t]}));return s&&w.push(f),w.join(l)}}function s(e,n,i,r,a,o){var s=r?f:p,c=3*l.length,d=t.formatNamesAndIdsForAnalytics(e,n,i,o),g=d.names,h=d.idStrings,_=u.reduce(h,(function(e,t){return e+t.length}),0);if(_+c+s.length>a)throw new Error("The analytics string size is too low to send the campaign, experiment, and variation IDs.");var E=a-_-c-s.length,m={};m.variation=Math.min(g.variation.length,Math.floor(E/3)),E-=m.variation,m.experiment=Math.min(g.experiment.length,Math.floor(E/2)),E-=m.experiment,m.layer=E;var y={};u.each(g,(function(e,t){y[t]=e.substring(0,m[t])}));var I=[];return v.isSingleExperimentPolicy(e.policy)||I.push(y.layer+h.layer),I=I.concat([y.experiment+h.experiment,y.variation+h.variation,s]),I.join(l)}var u=n(2),c=n(16),l=":",d="everyone_else",f="holdback",p="treatment",g="",h=n(20),v=n(40);t.formatNamesAndIdsForAnalytics=function(e,t,n,o){var s={layer:e.name||g,experiment:t.name||g,variation:n.name||g};if(o&&(s=u.mapValues(s,i)),s.experiment===g&&(!e.integrationStringVersion||1===e.integrationStringVersion))if(r(t.audienceIds))s.experiment="Exp";else{var l=c.get("stores/audience_data");s.experiment=a(l,t.audienceIds)}var d={layer:"("+i(e.id)+")",experiment:"("+i(t.id)+")",variation:"("+i(n.id)+")"};return{names:s,idStrings:d}},t.combineAndTruncateIdAndName=function(e,t,n){var i=n-t.length;if(i<0&&(h.warn("maxLength must be at least long enough to fit the entity ID, which is length"+t.length+". Defaulting to only use entity ID as name."),e=g),e===g)return t;if(e.length>i){var r=Math.min(e.length,i);return e=e.substring(0,r),e+t}return e+" "+t},t.generateAnalyticsString=function(e,t,n,i,r,a){return e.integrationStringVersion&&2===e.integrationStringVersion?o(e,t,n,i,r,a):s(e,t,n,i,r,a)}}),(function(e,t,n){var i=n(93),r=n(7),a=n(9),o=n(20);t.defineProperty=function(e,t,n,s,u){i(e,t,(function(){var e=["prop",s,u||t].join(".");return o.debug('Evaluating getter: "'+e+'"'),a.dispatch(r.RECORD_API_USAGE,{methodName:e}),n()}),!0)}}),(function(e,t){"use strict";function n(e,t,n,i){Object.defineProperty(e,t,{get:function(){var e=n.call(this);return Object.defineProperty(this,t,{value:e,enumerable:!!i,writable:!0}),e},set:function(e){return Object.defineProperty(this,t,{value:e,enumerable:!!i,writable:!0}),e},enumerable:!!i,configurable:!0})}e.exports=n}),(function(e,t,n){function i(e){var n=r.cloneDeep(e);return n.changes&&(n.changes=r.map(n.changes,t.dereferenceChangeId)),n.experiments&&r.each(n.experiments,(function(e){e.changes&&(e.changes=r.map(e.changes,t.dereferenceChangeId)),e.variations&&r.each(e.variations,(function(e){e.actions&&r.each(e.actions,(function(e){e.changes&&(e.changes=r.map(e.changes,t.dereferenceChangeId))}))}))})),n}var r=n(2),a=n(16),o=n(19),s=n(92),u=a.get("stores/change_data");t.translateDecisionToCampaignDecision=function(e){return c(r.cloneDeep(e),{layerId:"campaignId",isLayerHoldback:"isCampaignHoldback"})},t.translateLayerEventToCampaignEvent=function(e){var t={};return s.defineProperty(t,"campaign",(function(){var t=i(e.data.layer);return t}),"campaignEvent"),t.decisionTicket=e.data.decisionTicket,t.decision=this.translateDecisionToCampaignDecision(e.data.decision),t.audiences=e.data.audiences,{type:"lifecycle",name:"campaignDecided",data:t}},t.translateViewActivatedToPageActivated=function(e){return{type:"lifecycle",name:"pageActivated",data:{page:e.data.view}}},t.dereferenceChangeId=function(e){var t=u.getChange(e);return t?o.safeReference(t):e};var c=function(e,t){var n=r.omit(e,r.keys(t));return r.each(t,(function(t,i){n[t]=e[i]})),n}}),(function(e,t,n){var i=n(2),r=n(16),a=r.get("stores/global_state"),o=r.get("stores/layer_data"),s=r.get("stores/observed_redirect");t.getReferrer=function(){var e=s.get();return e?e.referrer:i.isString(a.getEffectiveReferrer())?a.getEffectiveReferrer():null;
},t.getExperimentAndVariation=function(){var e=s.get();if(e&&i.isString(e.variationId))return i.pick(e,["experimentId","variationId"]);if(i.isString(a.getEffectiveVariationId())){var t=a.getEffectiveVariationId(),n=o.getExperimentByVariationId(t),r=n?n.id:null;return{experimentId:r,variationId:t}}return null}}),(function(e,t,n){var i=n(12).Promise,r=n(97).observeSelector,a=n(98).poll,o=n(100).waitForElement,s=n(101).waitUntil;t.create=function(){return{observeSelector:r,poll:a,Promise:i,waitForElement:o,waitUntil:s}}}),(function(e,t,n){function i(){if(f.shouldObserveChangesIndefinitely()){var e={attributes:!0,childList:!0,subtree:!0,characterData:!0},t=p.getDocumentElement(),n=new MutationObserver(function(){this.disconnect(),l.each(l.keys(_),a),this.observe(t,e)});return function(i){var r=_[i];n.observe(t,e),r.cancelObservation=function(){delete _[i],l.isEmpty(_)&&n.disconnect()}}}return function(e){var t=h.poll(l.partial(a,e));_[e].cancelObservation=function(){t(),delete _[e]}}}function r(e){var t=_[e];t&&t.cancelObservation&&t.cancelObservation()}function a(e){if(_[e]){if(o(_[e]))return 0===_[e].matchedCount&&l.isFunction(_[e].options.onTimeout)&&_[e].options.onTimeout(),void r(e);var t=document.querySelectorAll(_[e].selector);t.length&&(l.each(t,(function(t){t.Lt&&t.Lt[e]||_[e].callbackQueue.push(t)})),s(e))}}function o(e){var t=e.options.timeout;if(null!==t)if("function"==typeof t)try{return t()}catch(e){}else if(Date.now()-e.startTime>t)return!0;return!1}function s(e){for(;_[e]&&_[e].callbackQueue.length;){var t=_[e].callbackQueue.shift();if(u(t,e),_[e].matchedCount=_[e].matchedCount+1,_[e].callback(t),_[e].options.once)return void r(e)}}function u(e,t){e.Lt||(e.Lt={}),e.Lt[t]=!0}function c(e){try{document.querySelector(e)}catch(e){return!1}return!0}var l=n(2),d=(n(7),n(16)),f=d.get("stores/directive"),p=n(77),g=(n(22),n(9),n(5).generate),h=n(98),v=(d.get("stores/rum"),{once:!1,onTimeout:null,timeout:null}),_={},E=function(e){(E=i())(e)};t.observeSelector=function(e,t,n){if(!c(e))throw new Error("observeSelector expects a valid css selector as its first argument");if(!l.isFunction(t))throw new Error("observeSelector expects a function as its second argument");if(n&&(!l.isObject(n)||l.isFunction(n)))throw new Error("observeSelector expects an object as its third argument");var i=g();return n=l.merge({},v,n||{}),_[i]={callback:t,callbackQueue:[],matchedCount:0,options:n,selector:e,startTime:Date.now()},E(i),setTimeout(l.bind(a,null,i),0),l.partial(r,i)}}),(function(e,t,n){function i(e){c[e]&&a.each(c[e].callbacks,(function(e){e.call(null)}))}function r(e,t){c[t]&&c[t].callbacks[e]&&(delete c[t].callbacks[e],a.some(c[t].callbacks)||(clearInterval(c[t].id),delete c[t]))}var a=n(2),o=(n(7),n(16)),s=(n(22),n(9),n(5).generate),u=(o.get("stores/rum"),n(99).DEFAULT_INTERVAL),c={};t.poll=function(e,t){a.isNumber(t)||(t=u),c[t]||(c[t]={callbacks:{},id:setInterval(a.partial(i,t),t)});var n=s();return c[t].callbacks[n]=e,a.partial(r,n,t)},t.cancelAll=function(){a.each(c,(function(e,t){clearInterval(e.id),delete c[t]}))}}),(function(e,t){e.exports={DEFAULT_INTERVAL:20}}),(function(e,t,n){var i=n(12).Promise,r=n(97).observeSelector;t.waitForElement=function(e){return new i(function(t,n){r(e,t,{once:!0})})}}),(function(e,t,n){var i=n(12).Promise,r=n(98).poll;t.waitUntil=function(e){return new i(function(t,n){if(e())return void t();var i=r((function(){e()&&(i(),t())}))})}}),(function(e,t,n){var i=n(80);t.on=function(e){return e.publicOnly=!0,i.on(e)},t.off=i.off,t.emit=function(e){i.emit(e)}}),(function(e,t,n){function i(e){var t,n={};if(e)if(r(e))t=Number(e);else{if("object"!=typeof e)throw new Error("tracker","Revenue argument",e,"not a number.");if(n=a.extend({},e),"revenue"in n){if(!r(n["revenue"]))throw new Error("tracker","Revenue value",n["revenue"],"not a number.");t=Number(n["revenue"]),delete n["revenue"]}}return a.isUndefined(t)||(n.revenue=t),n}function r(e){return a.isNumber(e)||a.isString(e)&&Number(e)==e}var a=n(2),o=n(104);t.activateGeoDelayedExperiments=function(e,t){t||(t=e.lists?"odds":"cdn3"),o.dataFromSource({data:e,source:t})},t.activateSiteCatalyst=function(e){e&&e.sVariable&&o.integrationSettings({id:"adobe_analytics",settings:{sVariableReference:e.sVariable}})},t.bucketUser=t.bucketVisitor=function(e,t){if(e&&t){var n={experimentId:String(e)};t>256?n.variationId=String(t):n.variationIndex=String(t),o.bucketVisitor(n)}},t.disable=function(e){o.disable({scope:e})},t.log=function(e){a.isUndefined(e)&&(e=!0),o.log({level:e?"INFO":"OFF"})},t.optOut=function(e){a.isUndefined(e)&&(e=!0),o.optOut({isOptOut:e})},t.setCookieDomain=function(e){o.cookieDomain({cookieDomain:e})},t.setCookieExpiration=function(e){o.cookieExpiration({cookieExpirationDays:e})},t.setDimensionValue=function(e,t){var n={};n[e]=t,o.user({attributes:n})},t.setUserId=function(e){o.user({userId:e})},t.storeThirdPartyData=function(e,t){o.dataFromSource({source:e,data:t})},t.trackEvent=function(e,t){o.event({eventName:e,tags:i(t)})}}),(function(e,t,n){var i=n(2),r=n(7),a=n(88),o=n(89),s=n(105),u=n(22),c=n(106),l=n(113),d=n(6),f=n(73).create,p=n(21),g=n(114),h=n(80),v=n(9),_=n(23),E=n(20),m=n(117),y=n(118),I=n(71),S=n(83),T=n(16),A=T.get("stores/dimension_data"),w=T.get("stores/view_data"),b=T.get("stores/visitor_id"),D=T.get("stores/layer_data"),R=T.get("stores/directive"),O=86400,N=90,C=t.ApiListenerError=f("ApiListenerError");t.event=function(e){y.updateAllViewTags();var t=function(){var t=c.trackCustomEvent(e.eventName,e.tags);t?E.log("API / Tracking custom event:",e.eventName,e.tags):E.log("API / Not tracking custom event:",e.eventName)};b.getBucketingId()?t():v.dispatch(r.ADD_CLEANUP_FN,{lifecycle:u.Lifecycle.postActivate,cleanupFn:t})},t.page=function(e){var t=w.getByApiName(e.pageName);if(!t)throw new Error('Unknown page "'+e.pageName+'"');var n=!e.hasOwnProperty("isActive")||e.isActive,i=function(){n?y.activateViaAPI(t,e.tags):(y.deactivate(t),E.log("API / Deactivated Page",y.description(t)))};b.getBucketingId()?i():v.dispatch(r.ADD_CLEANUP_FN,{lifecycle:u.Lifecycle.postViewsActivated,cleanupFn:i})},t.tags=function(e){y.setGlobalTags(e.tags)},t.user=function(e){E.log("API / Setting visitor attributes:",e.attributes),i.each(e.attributes,(function(e,t){var n,i=t,a="custom",o=A.getById(t)||A.getByApiName(t);o&&(i=o.id,n=o.segmentId||o.id);var s=function(){v.dispatch(r.SET_VISITOR_ATTRIBUTES,{attributes:[{key:i,value:{id:n,value:e},type:a,metadata:{lastModified:p.now()}}]})};b.getBucketingId()?s():v.dispatch(r.ADD_CLEANUP_FN,{lifecycle:u.Lifecycle.postVisitorProfileLoad,cleanupFn:s})}))},t.optOut=function(e){var t=!e.hasOwnProperty("isOptOut")||e.isOptOut;g.setOptOut(t)},t.cookieExpiration=function(e){var t=e.cookieExpirationDays;t<N&&(E.error('Argument "cookieExpirationDays"=',t,"less than minimum days:",N,", setting to minimum."),t=N),E.log("API / Setting cookie age to",t,"days."),v.dispatch(r.SET_COOKIE_AGE,t*O)},t.cookieDomain=function(e){E.log("API / Setting cookie domain to",e.cookieDomain),v.dispatch(r.SET_COOKIE_DOMAIN,e.cookieDomain)},t.disable=function(e){if(e.scope){if("tracking"!==e.scope)throw new Error('Unknown "scope" for disable: '+e.scope);E.log("API / Disabling tracking"),v.dispatch(r.LOAD_DIRECTIVE,{trackingDisabled:!0})}else E.log("API / Disabling everything"),v.dispatch(r.LOAD_DIRECTIVE,{disabled:!0})},t.log=function(e){var t=e.level,n=e.match;i.isUndefined(t)&&(t="INFO"),i.isUndefined(n)&&(n=""),E.setLogMatcher(n),E.setLogLevel(t)},t.registerModule=function(e){var t="custom/"+e.moduleName;if(o[t]||a.get(t))throw new Error('Module name "'+t+'" is reserved. Will not be registered as plugin.');m.registerApiModule(t,e.module)},t.dataFromSource=function(e){var t=e.source;d.makeAsyncRequest(t),d.resolveRequest(t,e.data)},t.addListener=function(e){if(!i.isFunction(e.handler))throw new Error("A handler function must be supplied");e=i.omit(e,"type"),e.publicOnly=!0,e.emitErrors=!0;var t=e.handler;e.handler=function(e){try{return t(e)}catch(e){throw new C(e)}},h.on(e)},t.removeListener=function(e){if(!e.token)throw new Error("Must supply a token to removeListener");h.off(e.token)},t.load=function(e){e.data=i.extend({},e.data),s.normalizeClientData(e.data),v.dispatch(r.DATA_LOADED,{data:e.data})},t.integrationSettings=function(e){if(!e.id)throw new Error("id is required");if(!e.settings)throw new Error("settings is required");v.dispatch(r.SET_INTEGRATION_SETTINGS,i.extend({},e.settings,{id:e.id}))},t.bucketVisitor=function(e){if(!e.variationId&&i.isUndefined(e.variationIndex)||e.variationId&&e.variationIndex)throw new Error("One of a variationId or a variationIndex is required.");if(!e.experimentId)throw new Error("An experimentId is required.");var t,n,r=e.campaignId;if(r){if(t=D.get(r),!t)throw new Error("Could not find layer "+r)}else if(t=D.getLayerByExperimentId(e.experimentId),r=t.id,!r)throw new Error("Could not find layer for experiment "+e.experimentId);if(n=i.find(t.experiments,{id:e.experimentId}),!n)throw new Error("Could not find experiment "+e.experimentId+" in layer "+r);var a=e.variationId;if(i.isUndefined(e.variationIndex)){if(!i.find(n.variations,{id:a}))throw new Error("Cound not find variation "+a+" in experiment "+e.experimentId)}else if(a=n.variations[e.variationIndex].id,!a)throw new Error("Could not find variation at index "+e.variationIndex+" in experiment "+e.experimentId);I.updateVariationIdMap(r,e.experimentId,a),b.getBucketingId()&&I.persistVariationIdMap()},t.waitForOriginSync=function(e){if(!i.isArray(e.canonicalOrigins))throw new Error("canonicalOrigins must be an array. Got: "+_.stringify(e.canonicalOrigins));i.each(e.canonicalOrigins,(function(e){if(!i.isString(e))throw new Error("Each item in canonicalOrigins must be a string. Found type "+typeof e)})),S.loadCanonicalOrigins(e.canonicalOrigins)},t.activate=function(){R.shouldActivate()?l.emitActivateEvent():E.debug("Not activating.")},t.sendEvents=function(){l.emitSendEvents()},t.holdEvents=function(){l.emitHoldEvents()}}),(function(e,t,n){var i=n(2),r=n(22);t.normalizeClientData=function(e){!e.listTargetingKeys&&e.listTargetingCookies&&(e.listTargetingKeys=i.map(e.listTargetingCookies,(function(e){return{type:r.ListTargetingKeyTypes.COOKIE,key:e}})),delete e.listTargetingCookies)}}),(function(e,t,n){function i(e,t){var n=V.description(t),i=W.isExpectingRedirect(),r=W.getLayerId();if(i&&r===t.id){var a=G.TrackLayerDecisionTimingFlags.preRedirectPolicy;e.timing=a,E(a,[G.PreRedirectPolicies.PERSIST_BEFORE_AND_TRACK_DURING_REDIRECT],e),k.log("Called trackLayerDecision for redirect Campaign",n,e)}else{var a=G.TrackLayerDecisionTimingFlags.nonRedirectPolicy;e.timing=a,E(a,[G.NonRedirectPolicies.TRACK_IMMEDIATELY],e),k.log("Called trackLayerDecision for non-redirect Campaign",n,e)}}function r(e,t,n,i,r){var a=q.get(t.layerId),o=V.description(a),s=d(e,t,n,i);v("onLayerDecision",s,r?"trackLayerDecision":void 0),k.log("Analytics / Called onLayerDecision for Campaign",o,s)}function a(e,t){var n=f({activeViewStates:H.getActiveViewStates(),visitorProfile:Q.getVisitorProfile(),layerStates:K.getLayerStatesForAnalytics()}),i=J.getByApiName(e),r=i&&i.pageId?g(i):H.getActiveViewTags(),a=y.extend({},r,t),o=i&&i.category?i.category:O.OTHER;return y.extend(n,{eventEntityId:i&&i.id,eventApiName:e,eventCategory:o,eventTags:a})}function o(e,t){var n=f({activeViewStates:H.getActiveViewStates(),visitorProfile:Q.getVisitorProfile(),layerStates:K.getLayerStatesForAnalytics()});return y.extend(n,{pageId:e.id,viewCategory:e.category,eventTags:t.metadata})}function s(e){var t=f({activeViewStates:H.getActiveViewStates(),visitorProfile:Q.getVisitorProfile(),layerStates:K.getLayerStatesForAnalytics()}),n=e.config&&e.config.selector?e.config.selector:e.eventFilter.selector,i=e&&e.category?e.category:O.OTHER,r=g(e);return y.extend(t,{event:e,eventCategory:i,eventTags:r,selector:n})}function u(){var e=f({activeViewStates:[],visitorProfile:Q.getVisitorProfile(),layerStates:K.getLayerStatesForAnalytics()});return y.extend(e,{eventTags:{}})}function c(e,t,n){var i=q.get(t.layerId),r=null,a=null,o=null;if(t.experimentId){var s=y.find(i.experiments,{id:t.experimentId});if(s&&(r=s.name||null,o=s.integrationSettings,t.variationId)){var u=y.find(s.variations,{id:t.variationId});u&&(a=u.name||null)}}var c=F.getReferrer()||D.getReferrer(),l={sessionId:j.getSessionId(),decisionTicketAudienceIds:n.audienceIds,visitorId:Z.getRandomId(),decisionId:e,activationId:z.getActivationId(),namespace:z.getNamespace(),timestamp:w.now(),pageId:n.pageId||null,variationId:t.variationId,variationName:a,experimentId:t.experimentId,experimentName:r,layerId:t.layerId,layerName:i.name,layerPolicy:i.policy,accountId:z.getAccountId(),projectId:z.getProjectId(),revision:String(z.getRevision()),clientVersion:A.VERSION,referrer:c,integrationStringVersion:i.integrationStringVersion,integrationSettings:y.extend({},i.integrationSettings,o)};return l}function l(e,t,n){var i=y.extend({},e,{isLayerHoldback:t,clientEngine:A.ENGINE,anonymizeIP:y.isNull(z.getAnonymizeIP())?void 0:z.getAnonymizeIP(),userFeatures:h(n),layerStates:K.getLayerStatesForAnalytics()});return i}function d(e,t,n,i){return{decisionId:e,timestamp:w.now(),revision:z.getRevision(),clientEngine:A.ENGINE,clientVersion:A.VERSION,projectId:z.getProjectId(),accountId:z.getAccountId(),activationId:z.getActivationId(),sessionId:j.getSessionId(),visitorId:Z.getRandomId(),decision:t,decisionTicket:n,userFeatures:h(i),layerStates:K.getLayerStatesForAnalytics()}}function f(e){var t={eventId:B.generate(),timestamp:w.now(),revision:z.getRevision(),clientEngine:A.ENGINE,clientVersion:A.VERSION,projectId:z.getProjectId(),accountId:z.getAccountId(),activationId:z.getActivationId(),sessionId:j.getSessionId(),isGlobalHoldback:z.isGlobalHoldback(),visitorId:Z.getRandomId(),activeViewStates:e.activeViewStates,layerStates:e.layerStates,userFeatures:h(e.visitorProfile)};return t}function p(e){var t=H.getViewState(e),n=t&&t.isActive?t.metadata:{};return n}function g(e){var t={};return e.pageId?p(e.pageId):t}function h(e){var t=Y.getAllPlugins(R.PluginTypes.visitorProfileProviders),n=y.filter(t,{shouldTrack:!0}),i={id:null,type:null,name:"",value:null,shouldIndex:!0};return y.reduce(n,(function(t,n){try{var r=n.provides,a=e[r],o=[];if(!y.isUndefined(a)){y.isObject(a)?o=y.map(a,(function(e,t){var n=y.isObject(e)?e:{value:e};return y.extend({},{type:r,name:t},n)})):o.push({type:r,value:a});var s=y(o).map((function(e){return y.pick(y.extend({},i,e),y.keys(i))})).filter((function(e){return!!e.value})).value();t=t.concat(s)}}catch(e){k.warn("Error evaluating userFeature against visitorProfile:",e)}return t}),[])}function v(e,t,n){var i=_(e,n);k.debug("Found "+i.length+" analytics integrations defining a "+e+" hook"),k.debug("Calling each with data: ",t),y.each(i,(function(e){try{k.debug("Calling plugin: "+e.name),e.hookFn(t),k.debug("Called plugin: "+e.name)}catch(e){k.error(e)}}))}function _(e,t){var n=[];return y.each(Y.getAllPlugins(R.PluginTypes.analyticsTrackers),(function(i,r){if(i[e]&&(!t||!i[t]))try{n.push({name:r,hookFn:b.evaluate(i[e])})}catch(e){k.error(e)}})),n}function E(e,t,n){var i=m(e,t);k.debug("Found "+i.length+" analytics integrations  defining a trackLayerDecision "+e+" timing of "+t.join("|")),k.debug("Calling each with data: ",n),y.each(i,(function(e){try{k.debug("Calling plugin: "+e.name),e.hookFn(n),k.debug("Called plugin: "+e.name)}catch(e){k.error(e)}}))}function m(e,t){var n=[];return y.each(Y.getAllPlugins(R.PluginTypes.analyticsTrackers),(function(i,r){y.includes(t,i[e])&&n.push({name:r,hookFn:i.trackLayerDecision})})),n}var y=n(2),I=n(7),S=n(79),T=n(68),A=n(90),w=n(21),b=n(16),D=n(77),R=n(22),O=n(70),N=n(80),C=n(107),P=n(108),L=n(9),V=n(109),k=n(20),x=(n(82),n(12).Promise),F=n(95),M=n(110),U=n(112),G=n(111),B=n(5),z=b.get("stores/global"),j=b.get("stores/session"),H=b.get("stores/view"),Y=b.get("stores/plugins"),K=b.get("stores/layer"),q=b.get("stores/layer_data"),X=b.get("stores/observed_redirect"),W=b.get("stores/pending_redirect"),Q=b.get("stores/visitor"),$=b.get("stores/directive"),J=b.get("stores/event_data"),Z=b.get("stores/visitor_id"),ee="COOKIE",te=!0,ne=1e3;t.trackClientActivation=function(){if($.shouldSendTrackingData()){var e=u();return v("onClientActivation",e),e}},t.trackCustomEvent=function(e,t){t=t||{};var n=a(e,t),i=J.getByApiName(e),r={name:e,type:P.CUSTOM,category:n.eventCategory,tags:y.omit(n.eventTags,"revenue")};if(y.isUndefined(t.revenue)||(r.revenue=t.revenue),S.emitAnalyticsEvent({name:i?i.name||i.apiName:e,apiName:i?i.apiName:void 0,type:P.CUSTOM,tags:y.omit(n.eventTags,"revenue"),category:n.eventCategory,metrics:r.revenue?{revenue:r.revenue}:{}},!$.shouldSendTrackingData()),$.shouldSendTrackingData())return T.addEvent(r),v("onCustomEvent",n),n},t.trackDecisionEvent=function(e,t){var n=q.get(e.layerId),a=B.generate();L.dispatch(I.RECORD_LAYER_DECISION_EVENT_ID,{layerId:e.layerId,pageId:t.pageId,decisionId:a});var o;if(ee){o=c(a,e,t);var s=W.isExpectingRedirect(),u=W.getLayerId();if(s&&u===n.id){M.persist(o,ee);var d=V.description(n);k.log("Relaying decision for redirect Campaign",d,V.description(n))}}if(!$.shouldSendTrackingData())return void k.log("Analytics / Not tracking decision for Campaign",V.description(n));var f=Q.getVisitorProfile();if(ee){var p=l(o,e.isLayerHoldback,f);i(p,n),r(a,e,t,f,!0)}else r(a,e,t,f,!1)},t.trackPostRedirectDecisionEvent=function(){if(!$.shouldSendTrackingData())return x.resolve();if(X.hasTracked())return x.resolve();var e=X.get();if(!e)return x.resolve();var t=Q.getVisitorProfile(),n=l(e,!1,t),i=G.TrackLayerDecisionTimingFlags.postRedirectPolicy;if(n.timing=i,E(i,[G.PostRedirectPolicies.TRACK_IMMEDIATELY],n),te){var r=new x(function(e,t){var n=N.on({filter:{type:C.TYPES.LIFECYCLE,name:"originsSynced"},handler:function(){e(),N.off(n)}})}),a=U.makeTimeoutPromise(ne);return x.race([r,a]).then((function(){k.log("Calling trackers after successful sync")}),(function(e){k.warn("Calling trackers after failed sync:",e)})).then((function(){t=Q.getVisitorProfile(),n=l(e,!1,t),n.timing=G.TrackLayerDecisionTimingFlags.postRedirectPolicy,E(G.TrackLayerDecisionTimingFlags.postRedirectPolicy,[G.PostRedirectPolicies.TRACK_AFTER_SYNC],n),L.dispatch(I.REGISTER_TRACKED_REDIRECT_DATA)}))["catch"]((function(e){k.error("Error when calling trackers after sync:",e)}))}return E(G.TrackLayerDecisionTimingFlags.postRedirectPolicy,[G.PostRedirectPolicies.TRACK_AFTER_SYNC],n),L.dispatch(I.REGISTER_TRACKED_REDIRECT_DATA),x.resolve()},t.trackClickEvent=function(e){var t=s(e),n={name:e.apiName,type:e.eventType,category:t.eventCategory,tags:t.eventTags};if(S.emitAnalyticsEvent({name:e.name||e.apiName,apiName:e?e.apiName:void 0,type:e.eventType,category:t.eventCategory,tags:t.eventTags,metrics:{}},!$.shouldSendTrackingData()),$.shouldSendTrackingData())return T.addEvent(n),v("onClickEvent",t),t},t.trackViewActivation=function(e){var t=H.getViewState(e.id);if(!t.isActive)return void k.debug("Inactive view passed to `trackViewActivation`");var n=o(e,t),i={name:e.apiName,type:P.PAGEVIEW,category:n.viewCategory,tags:n.eventTags};return S.emitAnalyticsEvent({name:e.name||e.apiName,apiName:e.apiName,type:P.PAGEVIEW,category:n.viewCategory,tags:n.eventTags,metrics:{}},!$.shouldSendTrackingData()),$.shouldSendTrackingData()?(T.addEvent(i),L.dispatch(I.TRACK_VIEW_ACTIVATED_EVENT,{pageId:e.id,eventData:n}),v("onPageActivated",n),n):void 0}}),(function(e,t){t.TYPES={ACTION:"action",ANALYTICS:"analytics",EDITOR:"editor",LIFECYCLE:"lifecycle"}}),(function(e,t){e.exports={CLICK:"click",CUSTOM:"custom",ENGAGEMENT:"engagement",PAGEVIEW:"pageview"}}),(function(e,t,n){var i=n(2),r=n(7),a=n(21),o=n(16),s=n(9),u=o.get("stores/global"),c=o.get("stores/session"),l=2e3;t.recordLayerDecision=function(e,t,n){return s.dispatch(r.RECORD_LAYER_DECISION,{layerId:e,decision:n,decisionTicket:t,sessionId:c.getSessionId(),activationId:u.getActivationId(),timestamp:a.now(),revision:u.getRevision(),namespace:u.getNamespace(),pageId:t.pageId}),n},t.relatedAudienceIds=function(e){var t={},n=["and","or","not"];return i.each(e.experiments,(function(e){i.each(i.flattenDeep(e.audienceIds),(function(e){i.includes(n,e)||(t[e]=!0)}))})),i.keys(t)},t.getActivationTimeout=function(e){var t=e.activation;return t&&null!==t.timeout&&void 0!==t.timeout?t.timeout:l},t.description=function(e){return(e.name?'"'+e.name+'" ':"")+"("+e.id+")"}}),(function(e,t,n){function i(e){try{var t=r(e)}catch(e){return _.error("Relay / Error computing redirect relay cookie: ",e),void p.emitError(e)}_.debug("Relay / Setting redirect relay cookie:",t);try{f.set(h.COOKIES.REDIRECT,t,{maxAge:5,encodeValue:!1})}catch(e){_.error("Relay / Failed to set redirect relay cookie",e),p.emitError(e)}}function r(e){var t=[],n=l.reduce(e,(function(e,n,i){var r=S[i];return r?(r.isMulti?l.forEach(n,(function(t,n){t=r.valueToValueString?r.valueToValueString(t,n):String(t),l.isNull(t)||(t=(r.encodeValueString||encodeURIComponent)(t),e.push(encodeURIComponent(r.relayName+y+n)+"="+t))})):l.isNull(n)||(n=(r.valueToValueString||String)(n),n=(r.encodeValueString||encodeURIComponent)(n),e.push(r.relayName+"="+n)),e):(t.push(i),e)}),[]);if(t.length)throw new Error("Relay / Don't know how to relay some fields:",t);return n.sort(),n.join("&")}function a(){var e=f.get(h.COOKIES.REDIRECT,!1);if(e){_.log("Relay / Found redirect cookie:",e);var t=o(e);if(!t.visitorId){_.warn("Relay / Missing required field visitorId, attempting to load from VISITOR_ID cookie");var n=f.get(h.COOKIES.VISITOR_ID);t.visitorId=l.isString(n)?n:null}return t}}function o(e){var t={},n=e.split("&");return l.forEach(n,(function(e){var n=e.split("=");if(2!==n.length)return void _.warn("Relay / Skipping invalid segment:",e);var i=f.safeDecodeURIComponent(n[0]),r=T[i];if(!r&&(r=l.find(I,(function(e){return e.isMulti&&0===i.indexOf(e.relayName+y)})),!r))return void _.warn("Relay / Skipping segment with unknown field identifier:",e,i);var a=n[1];try{if(r.isMulti){t[r.name]=t[r.name]||{};var o=i.substring(r.relayName.length+y.length);a=(r.decodeValueString||f.safeDecodeURIComponent)(a),a=(r.valueFromValueString||l.identity)(a,o),t[r.name][o]=a}else a=(r.decodeValueString||f.safeDecodeURIComponent)(a),a=(r.valueFromValueString||l.identity)(a),t[r.name]=a}catch(t){return _.warn("Relay / Skipping segment due to decode or parse error:",e,t),void p.emitError(t)}})),t}function s(e,t){var n=null;if(e){var i=m.getPlugin(h.PluginTypes.analyticsTrackers,t);if(i&&l.isFunction(i.serializeSettings))try{n=i.serializeSettings(e)}catch(e){_.warn("Analytics / Failed to persist integrationSettings for plugin:",t,e)}}return n}function u(e,t){var n=null,i=m.getPlugin(h.PluginTypes.analyticsTrackers,t);if(i&&l.isFunction(i.deserializeSettings))try{n=i.deserializeSettings(e)}catch(e){_.warn("Analytics / Failed to persist integrationSettings for plugin:",t,e)}return n}function c(e){var t=e.pageId||void 0;v.dispatch(d.RECORD_LAYER_DECISION,{layerId:e.layerId,decision:{layerId:e.layerId,experimentId:e.experimentId,variationId:e.variationId,isLayerHoldback:!1},decisionTicket:{audienceIds:e.decisionTicketAudienceIds,bucketingId:e.visitorId,globalHoldback:0,preferredVariationMap:void 0,pageId:t,activationId:e.activationId},sessionId:e.sessionId,activationId:e.activationId,timestamp:e.timestamp,revision:e.revision,namespace:e.namespace,pageId:t}),v.dispatch(d.RECORD_LAYER_DECISION_EVENT_ID,{layerId:e.layerId,pageId:t,decisionId:e.decisionId}),v.dispatch(d.ACTION_EXECUTED,{sessionId:e.sessionId,layerId:e.layerId,pageId:e.pageId,timestamp:e.timestamp,activationId:e.activationId})}var l=n(2),d=n(7),f=n(72),p=n(79),g=n(16),h=n(22),v=n(9),_=n(20),E=n(111),m=g.get("stores/plugins"),y=".",I=[{name:"sessionId",relayName:"s"},{name:"decisionTicketAudienceIds",relayName:"as",valueToValueString:function(e){return l.map(e,encodeURIComponent).join(",")},encodeValueString:l.identity,decodeValueString:l.identity,valueFromValueString:function(e){return l.map(e.split(","),f.safeDecodeURIComponent)}},{name:"decisionId",relayName:"d"},{name:"activationId",relayName:"aId"},{name:"pageId",relayName:"vId",isNullable:!0},{name:"variationId",relayName:"v",isNullable:!0},{name:"referrer",relayName:"r"},{name:"timestamp",relayName:"t",valueFromValueString:Number},{name:"visitorId",relayName:"i"},{name:"projectId",relayName:"p"},{name:"revision",relayName:"n"},{name:"clientVersion",relayName:"cV"},{name:"namespace",relayName:"ns"},{name:"accountId",relayName:"a"},{name:"layerId",relayName:"l"},{name:"layerName",relayName:"lN",isNullable:!0},{name:"layerPolicy",relayName:"lP"},{name:"experimentId",relayName:"x",isNullable:!0},{name:"experimentName",relayName:"xN",isNullable:!0},{name:"variationName",relayName:"vN",isNullable:!0},{name:"integrationStringVersion",relayName:"isv",valueFromValueString:Number,isNullable:!0},{name:"integrationSettings",relayName:"iS",isMulti:!0,valueToValueString:s,valueFromValueString:u,isNullable:!0}],S={},T={};l.forEach(I,(function(e){S[e.name]=e,T[e.relayName]=e})),t.persist=function(e,t){t===E.RedirectRelayMedia.COOKIE?i(e):_.error("Relay / Unsupported redirect relay medium: "+t)},t.load=function(){var e;if(e||(e=a()),e){var t=[];return l.forEach(I,(function(n){(l.isNull(e[n.name])||l.isUndefined(e[n.name]))&&(n.isNullable?e[n.name]=null:(delete e[n.name],t.push(n.name)))})),t.length?void _.error("Relay / Observed redirect data with missing fields:",t):(v.dispatch(d.LOAD_REDIRECT_DATA,e),v.dispatch(d.ADD_CLEANUP_FN,{lifecycle:h.Lifecycle.postVisitorProfileLoad,cleanupFn:function(){c(e)}}),e)}}}),(function(e,t,n){var i=n(8);t.TrackLayerDecisionTimingFlags=i({preRedirectPolicy:null,postRedirectPolicy:null,nonRedirectPolicy:null}),t.PreRedirectPolicies=i({PERSIST_BEFORE_AND_TRACK_DURING_REDIRECT:null,PERSIST_BEFORE_REDIRECT:null}),t.PostRedirectPolicies=i({TRACK_IMMEDIATELY:null,TRACK_AFTER_SYNC:null}),t.NonRedirectPolicies=i({TRACK_IMMEDIATELY:null}),t.RedirectRelayMedia=i({COOKIE:null})}),(function(e,t,n){var i=n(12).Promise;t.makeTimeoutPromise=function(e){return new i(function(t,n){setTimeout((function(){n(new Error("Timed out after "+e+" ms"))}),e)})}}),(function(e,t,n){function i(e){var t=["type","selector","attributes","value"],n=r.extend({},e);return n.changeSet=r.map(e.changeSet,(function(e){return r.pick(l.dereferenceChangeId(e),t)})),n}var r=n(2),a=n(16),o=a.get("stores/audience_data"),s=n(80),u=n(107),c=n(92),l=n(94);t.emitLayerDecided=function(e){var t=e.decisionTicket?e.decisionTicket.audienceIds:[],n=r.map(t,(function(e){return{id:e,name:o.get(e).name}})),i={type:u.TYPES.LIFECYCLE,name:"layerDecided",data:r.extend(e,{audiences:n})},a=l.translateLayerEventToCampaignEvent(i);s.emit(i),s.emit(a)},t.emitViewActivated=function(e){var t={type:u.TYPES.LIFECYCLE,name:"viewActivated",data:e},n=l.translateViewActivatedToPageActivated(t);s.emit(t),s.emit(n)},t.emitViewsActivated=function(e){var t={type:u.TYPES.LIFECYCLE,name:"viewsActivated",data:e};s.emit(t)},t.emitPageDeactivated=function(e){var t={type:u.TYPES.LIFECYCLE,name:"pageDeactivated",data:e};s.emit(t)},t.emitActivateEvent=function(){s.emit({type:u.TYPES.LIFECYCLE,name:"activate"},!0)},t.emitActivatedEvent=function(){s.emit({type:u.TYPES.LIFECYCLE,name:"activated"})},t.emitInitializedEvent=function(){var e={type:u.TYPES.LIFECYCLE,name:"initialized"};window.optimizely&&(window.optimizely.initialized=!0),s.emit(e)},t.emitOriginsSyncedEvent=function(){var e={type:u.TYPES.LIFECYCLE,name:"originsSynced"};s.emit(e)},t.emitActionAppliedEvent=function(e){var t={type:e.type,campaignId:e.layerId,pageId:e.pageId,experimentId:e.experimentId,variationId:e.variationId};c.defineProperty(t,"changes",(function(){return i(e).changeSet}),"actionAppliedEvent");var n={type:u.TYPES.ACTION,name:"applied",data:t};s.emit(n)},t.emitActionsForDecisionAppliedEvent=function(e,t){var n={decision:e};c.defineProperty(n,"actions",(function(){return r.map(t,i)}),"appliedAllForDecisionEvent");var a={type:u.TYPES.ACTION,name:"appliedAllForDecision",data:n};s.emit(a)},t.emitSendEvents=function(){var e={type:u.TYPES.ANALYTICS,name:"sendEvents"};s.emit(e)},t.emitHoldEvents=function(){var e={type:u.TYPES.ANALYTICS,name:"holdEvents"};s.emit(e)}}),(function(e,t,n){function i(){var e=Boolean(m.result(window.optimizely,"initialized"));w.dispatch(y.LOAD_DIRECTIVE,{alreadyInitialized:e})}function r(){w.dispatch(y.LOAD_DIRECTIVE,{mutationObserverAPISupported:N.isMutationObserverAPISupported()})}function a(){var e=N.getUserAgent()||"";if(!m.isString(e))return void b.warn("Directive / userAgent not a string");e=e.toLowerCase();var t=["googlebot","yahoo! slurp","bingbot","bingpreview","msnbot","keynote","ktxn","khte","gomezagent","alertsite","yottaamonitor","pingdom.com_bot","aihitbot","baiduspider","adsbot-google","mediapartners-google","applebot","catchpoint","phantomjs","moatbot","facebookexternalhit"],n=function(t){if(m.includes(e,t))return b.warn("Directive / Matches bot:",t),!0};m.some(t,n)&&(b.log("Directive / Disabling tracking"),w.dispatch(y.LOAD_DIRECTIVE,{trackingDisabled:!0}))}function o(){var e=S.get(A.COOKIES.OPT_OUT),n=R.getQueryParamValue(C.OPT_OUT);e?n===e||"true"!==n&&"false"!==n?w.dispatch(y.LOAD_DIRECTIVE,{shouldOptOut:"true"===e}):t.setOptOut("true"===n):"true"===n&&t.setOptOut(!0)}function s(){var e=!1,t=[C.AB_PREVIEW,C.DISABLE];t.push(C.EDITOR);for(var n=0;n<t.length;n++)if("true"===R.getQueryParamValue(t[n])){b.warn("Directive / Not activating because "+t[n]+" is set."),e=!0;break}w.dispatch(y.LOAD_DIRECTIVE,{disabled:e})}function u(){w.dispatch(y.LOAD_DIRECTIVE,{isPreview:!1})}function c(){var e=R.getQueryParamValue(C.LEGACY_PREVIEW);e&&b.log("Directive / Is legacy preview mode"),w.dispatch(y.LOAD_DIRECTIVE,{isLegacyPreview:!!e})}function l(){w.dispatch(y.LOAD_DIRECTIVE,{isEditor:!1})}function d(){w.dispatch(y.LOAD_DIRECTIVE,{isSlave:!1})}function f(){var e=N.getGlobal("optlyDesktop"),t=!(!e||m.isUndefined(e["p13nInner"]));t&&b.log("Directive / Is running in desktop app editor"),w.dispatch(y.LOAD_DIRECTIVE,{isRunningInDesktopApp:t})}function p(){var e="true"===R.getQueryParamValue(C.EDITOR_V2);e&&b.log("Directive / Is running in editor"),w.dispatch(y.LOAD_DIRECTIVE,{isRunningInV2Editor:e})}function g(){var e=S.get(A.COOKIES.TOKEN)||null,t=R.getQueryParamValue(C.TOKEN)||e;w.dispatch(y.LOAD_DIRECTIVE,{projectToken:t})}function h(){var e=S.get(A.COOKIES.PREVIEW),t=[],n=R.getQueryParamValue(C.FORCE_AUDIENCES);if(n)t=n.split(",");else if(e)try{var i=O.parse(e);t=i.forceAudienceIds}catch(t){var r=new D("Failed to parse previewCookie in registerForceAudienceIds: "+e),a={originalMessage:t.message,userError:!0};I.emitError(r,a)}t.length&&(b.log("Directive / Force Audience IDs:",t),w.dispatch(y.LOAD_DIRECTIVE,{forceAudienceIds:t}))}function v(){var e=S.get(A.COOKIES.PREVIEW),t=[],n=R.getQueryParamValue(C.FORCE_VARIATIONS);if(n)t=n.split(",");else if(e)try{var i=O.parse(e);t=i.forceVariationIds}catch(t){var r=new D("Failed to parse previewCookie in registerForceVariationIds: "+e),a={originalMessage:t.message,userError:!0};I.emitError(r,a)}t.length&&(b.log("Directive / Force Variation IDs:",t),w.dispatch(y.LOAD_DIRECTIVE,{forceVariationIds:t}))}function _(){var e=R.getQueryParamValue(C.FORCE_TRACKING);e&&w.dispatch(y.LOAD_DIRECTIVE,{forceTracking:e})}function E(){var e="OFF",t=R.getQueryParamValue("optimizely_log");if(t){var n=t.split(":");""!==n[0]&&(e=String(n[0]).toUpperCase()),"undefined"!=typeof n[1]&&b.setLogMatch(n[1])}b.setLogLevel(e)}var m=n(2),y=n(7),I=n(79),S=n(72),T=n(73).create,A=n(22),w=n(9),b=n(20),D=t.JSONParseError=T("JSONParseError"),R=n(115),O=n(23),N=n(36),C={AB_PREVIEW:"optimizely_show_preview",DISABLE:"optimizely_disable",EDITOR:"optimizely_editor",EDITOR_V2:"optimizely_p13n",FORCE_AUDIENCES:"optimizely_x_audiences",FORCE_VARIATIONS:"optimizely_x",LEGACY_PREVIEW:"optimizely_show_preview",OPT_OUT:"optimizely_opt_out",PREVIEW_LAYER_IDS:"optimizely_preview_layer_ids",TOKEN:"optimizely_token",FORCE_TRACKING:"optimizely_force_tracking"};t.populateDirectiveData=function(){E(),a(),i(),r(),o(),s(),l(),u(),c(),d(),f(),p(),g(),h(),v(),_()},t.setOptOut=function(e){e?(b.warn("Directive / Opting out"),S.set(A.COOKIES.OPT_OUT,"true",null,!0)):S.remove(A.COOKIES.OPT_OUT),
w.dispatch(y.LOAD_DIRECTIVE,{shouldOptOut:e})}}),(function(e,t,n){var i=n(116),r=n(36);t.getLanguage=function(){return r.getNavigatorLanguage()},t.getQueryParams=i.getQueryParams,t.getQueryParamValue=i.getQueryParamValue,t.getUrl=function(){return r.getHref()}}),(function(e,t,n){var i=n(2),r=n(36);t.getQueryParams=function(){var e=r.getLocationSearch()||"";if(0===e.indexOf("?")&&(e=e.substring(1)),0===e.length)return[];for(var t=e.split("&"),n=[],i=0;i<t.length;i++){var a="",o="",s=t[i].split("=");s.length>0&&(a=s[0]),s.length>1&&(o=s[1]),n.push([a,o])}return n},t.getQueryParamValue=function(e){for(var n=t.getQueryParams(),i=0;i<n.length;i++)if(n[i][0]===e)return n[i][1];return null},t.queryStringFromMap=function(e){return i.map(e,(function(e,t){return t+"="+e})).join("&")}}),(function(e,t,n){var i=n(2),r=n(7),a=n(16),o=n(22),s=n(80),u=n(9);t.registerApiModule=function(e,t){i.isArray(t)&&(t=a.evaluate(t)),u.dispatch(r.REGISTER_PLUGIN,{type:o.PluginTypes.apiModules,name:e,plugin:t})},t.registerDependency=function(e,t){var n=a.get(e);n||a.register(e,t)},t.registerVisitorProfileProvider=function(e){u.dispatch(r.REGISTER_PLUGIN,{type:o.PluginTypes.visitorProfileProviders,name:e.provides,plugin:e})},t.registerViewProvider=function(e){u.dispatch(r.REGISTER_PLUGIN,{type:o.PluginTypes.viewProviders,name:e.provides,plugin:e})},t.registerAudienceMatcher=function(e,t){u.dispatch(r.REGISTER_PLUGIN,{type:o.PluginTypes.audienceMatchers,name:e,plugin:t})},t.registerViewMatcher=function(e,t){u.dispatch(r.REGISTER_PLUGIN,{type:o.PluginTypes.viewMatchers,name:e,plugin:t})},t.registerAnalyticsTracker=function(e,t){u.dispatch(r.REGISTER_PLUGIN,{type:o.PluginTypes.analyticsTrackers,name:e,plugin:t})},t.registerViewTagLocator=function(e,t){u.dispatch(r.REGISTER_PLUGIN,{type:o.PluginTypes.viewTagLocators,name:e,plugin:t})},t.registerAudiencePlugin=function(e){e.dependencies&&i.each(e.dependencies,(function(e,n){t.registerDependency(n,e)}));var n,r="vendor."+e.vendor;n=i.isString(e.provider)?a.get(e.provider)(e.vendor):i.isFunction(e.provider)?e.provider(e.vendor):i.cloneDeep(e.provider),t.registerVisitorProfileProvider(i.extend(n,{provides:r}));var o;o=i.isString(e.matcher)?a.get(e.matcher):e.matcher;var s={fieldsNeeded:[r],match:function(e,t){return o(e[r],t)}};t.registerAudienceMatcher(r,s)},t.registerWidget=function(e){i.isArray(e)&&(e=a.evaluate(e));var t=s.on({filter:{type:"showWidget",name:e.widgetId},handler:e.showFn}),n=s.on({filter:{type:"hideWidget",name:e.widgetId},handler:e.hideFn});return{showToken:t,hideToken:n}},t.registerChangeApplier=function(e,t){u.dispatch(r.REGISTER_PLUGIN,{type:o.PluginTypes.changeAppliers,name:e,plugin:t})},t.registerDecider=function(e,t){u.dispatch(r.REGISTER_PLUGIN,{type:o.PluginTypes.deciders,name:e,plugin:t})},t.registerEventImplementation=function(e,t){u.dispatch(r.REGISTER_PLUGIN,{type:o.PluginTypes.eventImplementations,name:e,plugin:t})},t.registerViewTrigger=function(e,t){u.dispatch(r.REGISTER_PLUGIN,{type:o.PluginTypes.viewTriggers,name:e,plugin:t})}}),(function(e,t,n){function i(e,t){r.forEach(e,(function(e){if(e.eventType!==d.CUSTOM){var n=h.getPlugin(l.PluginTypes.eventImplementations,e.eventType);n?t?n.attach(e):n.detach(e):p.warn("No implementation found for event type:",e.eventType,"needed for event:",e)}}))}var r=n(2),a=n(7),o=n(113),s=n(119),u=n(21),c=n(16),l=n(22),d=n(108),f=n(9),p=n(20),g=n(120),h=c.get("stores/plugins"),v=c.get("stores/view"),_=c.get("stores/view_data"),E=c.get("stores/event_data");t.parseViewTags=function(e){var n=t.evaluateViewTags(e);t.setParsedViewTags(e.id,n)},t.updateAllViewTags=function(){var e=v.getActiveViewStates();r.each(e,(function(e){var n=_.get(e.id);t.parseViewTags(n)}))},t.evaluateViewTags=function(e){if(!e.tags)return{};var t=r.reduce(e.tags,(function(e,t){try{e[t.apiName]=g.getTagValue(t)}catch(e){e instanceof g.Error?p.warn("Page / Ignoring unparseable tag",t,e):p.error(e)}return e}),{});return t},t.createViewTicket=function(){var e={};return r.each(h.getAllPlugins(l.PluginTypes.viewProviders),(function(t){e[t.provides]=c.evaluate(t.getter)})),e},t.registerViews=function(e){f.dispatch(a.REGISTER_VIEWS,{views:e})},t.activateViaAPI=function(e,n){n&&t.setUserSuppliedViewTags(e.id,n),t.activateMultiple([e],n)},t.getViewsAndActivate=function(e){var n=_.getAllViewsForActivationType(e);t.activateMultiple(n)},t.activateMultiple=function(e,n){var a=[];r.each(e,(function(e){var r=v.getViewState(e.id),s=t.createViewTicket();if(r.isActive)return void(e.deactivationEnabled?t.hasValidStaticConditions(e,s)||t.deactivate(e):p.log("Not activating Page, already active ",t.description(e)));if(!t.hasValidStaticConditions(e,s))return void p.log("Page / Failed to match page conditions for "+t.description(e),e.staticConditions);a.push(e),t.setViewActiveState(e,!0),p.log("Activated Page",t.description(e)),o.emitViewActivated({view:e,metadata:n});var u=E.getByPageId(e.id);i(u,!0)})),r.isEmpty(a)||o.emitViewsActivated({views:a})},t.deactivate=function(e){var n=v.getViewState(e.id);if(!n.isActive)return void p.log("Not deactivating Page, already inactive ",t.description(e));t.setViewActiveState(e,!1),p.log("Deactivated Page",t.description(e)),o.emitPageDeactivated({page:e});var r=E.getByPageId(e.id);i(r,!1)},t.setViewActiveState=function(e,t){f.dispatch(a.SET_VIEW_ACTIVE_STATE,{view:e,timestamp:u.now(),isActive:t})},t.setGlobalTags=function(e){f.dispatch(a.SET_GLOBAL_TAGS,e)},t.setParsedViewTags=function(e,t){f.dispatch(a.UPDATE_PARSED_VIEW_METADATA,{pageId:e,metadata:t})},t.setUserSuppliedViewTags=function(e,t){f.dispatch(a.UPDATE_USER_SUPPLIED_METADATA,{pageId:e,metadata:t})},t.hasValidStaticConditions=function(e,t){if(r.isEmpty(e.staticConditions))return!0;var n=h.getAllPlugins(l.PluginTypes.viewMatchers);p.groupCollapsed("Page / Evaluating staticConditions:",e.staticConditions),p.debug("Matching to current value:",t);var i=s.evaluate(e.staticConditions,(function(e){var i=e.type,r=n[i];if(!r)throw new Error("Page / No matcher found for type="+i);return r.match(t,e)}));return p.groupEnd(),i},t.description=function(e){return'"'+e.name+'" ('+e.id+")"},t.shouldTriggerImmediately=function(e){return e===l.ViewActivationTypes.DOMChanged||e===l.ViewActivationTypes.URLChanged||e===l.ViewActivationTypes.immediate||!e}}),(function(e,t,n){function i(e,t){for(var n,i,r=0;r<e.length;r++){if(n=o(e[r],t),n===!1)return!1;s.isUndefined(n)&&(i=!0)}if(!i)return!0}function r(e,t){for(var n,i=!1,r=0;r<e.length;r++){if(n=o(e[r],t),n===!0)return!0;s.isUndefined(n)&&(i=!0)}if(!i)return!1}function a(e,t){if(1!==e.length)return!1;var n=o(e[0],t);return s.isUndefined(n)?void 0:!n}function o(e,t){var n;if(s.isArray(e)){var i,r;e[0]in d?(i=e[0],r=e.slice(1)):(i=l.OR,r=e),c.groupCollapsed('Condition / Applying operator "'+i+'" with args',u.stringify(r));try{n=d[i](r,t),c.debug("Condition / Result:",n)}finally{c.groupEnd()}return n}return n=t(e),c.debug("Condition / Evaluated:",u.stringify(e),":",n),n}var s=n(2),u=n(23),c=n(20),l={AND:"and",OR:"or",NOT:"not"},d={};d[l.AND]=i,d[l.OR]=r,d[l.NOT]=a,e.exports={evaluate:o}}),(function(e,t,n){var i=n(22).PluginTypes,r=n(16),a=r.get("stores/plugins");t.getTagValue=function(e){var n=a.getPlugin(i.viewTagLocators,e.locatorType);if(!n)throw new t.Error("No locator registered for tag locatorType: "+e.locatorType);return n(e)},t.enums=n(121),t.Error=n(122).Error}),(function(e,t){t.locatorType={CSS_SELECTOR:"css_selector",JAVASCRIPT:"javascript",URL_REGEX:"url_regex"},t.valueType={STRING:"string",NUMBER:"number",CURRENCY:"currency"},t.nodeNames={INPUT:"INPUT",SELECT:"SELECT"}}),(function(e,t,n){var i=n(73).create;t.Error=i("TagError")}),(function(e,t){}),(function(e,t,n){var i=n(16);i.register("env/jquery",n(125))}),(function(e,t,n){var i,r=n(36);try{i=$}catch(e){}var a=r.getGlobal("$");i&&i!==a?e.exports=i:e.exports=a}),(function(e,t,n){var i=n(36),r="optimizelyDataApi";t.registerFunction=function(e,t){var n=i.getGlobal(r);n||(n={},i.setGlobal(r,n)),n[e]||(n[e]=t)},t.getFunction=function(e){return i.getGlobal(r)[e]}}),(function(e,t,n){var i=n(77),r=n(20),a=n(86);t.addScriptAsync=function(e,t){var n=i.querySelector("head"),a=i.createElement("script");a.type="text/javascript",a.async=!0,a.src=e,t&&(a.onload=t),n.insertBefore(a,n.firstChild),r.debug("Asynchronously requesting "+e)},t.addScriptSync=function(e,n){try{var o="optimizely_synchronous_script_"+Math.floor(1e5*Math.random());if(e.indexOf('"')!==-1)return void r.error("Blocked attempt to load unsafe script: "+e);if(i.write('<script id="'+o+'" src="'+e+'"></script>'),!i.querySelector("#"+o))throw new Error("Document.write failed to append script");n&&n()}catch(i){r.debug("Document.write failed for "+e+": "+i.message);var s=function(e){var t=new Function(e.responseText);t(),n&&n()};return a.request({url:e,async:!1,contentType:"text/plain",success:s})["catch"]((function(i){r.error("Failed to load "+e+" via synchronous XHR: "+i.message),t.addScriptAsync(e,n)}))}}}),(function(e,t,n){function i(){var e=null;w.isNumber(e)&&0===he.getCount()?(W.log("Activating after delay of",e,"ms because no Experiments are running"),Y.dispatch(N.SET_RUM_DATA,{data:{activateDfd:!0}}),setTimeout(P.emitActivateEvent,e)):P.emitActivateEvent()}function r(e){be.handleError(e.data.error,e.data.metadata)}function a(){w.isArray(window.optimizely)&&(window.optimizely=w.filter(window.optimizely,(function(e){var t=!0;return!we.push(e,t)})))}function o(e){return w.each(e,(function(e,t){X.setItem(t,e)})),e}function s(){var e=pe.getAccountId(),t="https://a1706490390.cdn.optimizely.com".replace("__SUBDOMAIN__","a"+e+"."),n="/client_storage/a"+e+".html";se.subscribe(w.bind(X.setItem,X));var i=se.fetchAll().then((function(e){var t=Ae.getCanonicalOrigins();if(t){var n=se.getXDomainUserId(e,t);n&&(W.log("Syncing cross-origin visitor randomId:",n),oe.persistVisitorId({randomId:n}))}return e})).then(o);return ee.all([se.load(t,n),i.then((function(){oe.loadForeignData()})).then((function(){W.log("Loaded visitor data from foreign origins"),P.emitOriginsSyncedEvent()}),(function(e){W.debug("Ignored error syncing foreign data (expected if waitForOriginSync used:",e.message),W.debug("Enqueuing sync to happen after visitorId set."),Y.dispatch(N.ADD_CLEANUP_FN,{lifecycle:B.Lifecycle.postVisitorProfileLoad,cleanupFn:P.emitOriginsSyncedEvent})}))])}function u(e){var t=me.getVisitorProfile();return oe.populateEagerVisitorData(e,t)}function c(e,t,n){e=e||[];var i=Ee.getAllPlugins(B.PluginTypes.visitorProfileProviders),r=pe.getGlobalHoldbackThreshold(),a=me.getVisitorProfile();oe.populateLazyVisitorData(i,a);var o=Se.getBucketingId();if(!o)throw new Error("bucketingId not set");var s,u=me.getVisitorProfile();if(t){var c=Te.getVariationIdMap();s=c[t.id]}var l={bucketingId:o,visitorProfile:u,audiences:e,globalHoldback:r,preferredVariationMap:s,layer:t};return t&&n&&M.isPageIdRelevant(t)?w.map(n,(function(e){return M.createTicket(w.extend({},l,{pageId:e}))})):[M.createTicket(l)]}function l(e){return{bucketingId:Se.getBucketingId(),preferredLayerId:Te.getPreferredLayerMap()[e.id]}}function d(e){var t=he.getAllByPageIds(e),n=fe.getForceVariationIds(),i=fe.getForceAudienceIds(),r=w.reduce(t,(function(e,t){return t.groupId?e.groups[t.groupId]||(e.groups[t.groupId]=ge.get(t.groupId)):e.individual.push(t),e}),{groups:{},individual:[]});W.log("Deciding Campaigns/Experiments for Page(s)",e);var a=w.map(r.groups,K.description).join(", ");W.log("Groups:",a);var o=w.map(r.individual,q.description).join(", ");W.log("Campaigns/Experiments not in Groups (by Campaign id):",o);var s=w.map(r.groups,w.partial(f,n,i,e))||[],u=w.map(r.individual,(function(t){var r=w.filter(t.pageIds,w.partial(w.includes,e));return p(n,i,r,t)})),c=s.concat(u);return ee.all(c).then((function(t){var n=w.filter(t,(function(e){return!!e}));return W.log("All Campaigns/Experiments for Page(s) (by Campaign id)",e,"resolved:",w.map(n,q.description).join(", ")),n}))}function f(e,n,i,r){try{var a=l(r),o=M.decideGroup(r,a);if(o.reason)return W.debug("Not activating Group",K.description(r),"; reason:",o.reason),ee.resolve();var s=he.get(o.layerId);if(!s)return W.debug("Visitor was bucketed into a Campaign ("+o.layerId+") which is not in this snippet"),ee.resolve();var u=w.filter(s.pageIds,w.partial(w.includes,i));return w.isEmpty(u)?(W.debug("Not activating Group",K.description(r),"; reason: visitor was bucketed into a Campaign/Experiment not related to the currently-activating Page(s)"),ee.resolve()):t.decideAndExecuteLayerASAP(e,n,u,s)}catch(e){return W.error("Error getting decision for Group",K.description(r),"; ",e),ee.reject(e)}}function p(e,t,n,i){return new ee(function(r,a){try{_(i,e,t,n,(function(a){w.each(a,(function(r){var a=r.pageId?[r.pageId]:n;W.debug("Deciding layer: ",i,"with decisionTicket: ",r,"and actionViewIds: ",a),g(i,e,t,a,r)})),r(i)}))}catch(e){W.error("Error getting decision for Campaign: "+q.description(i),e),a(e)}})}function g(e,t,n,i,r){var a=q.description(e);W.log("Activating Campaign",a,"on Page(s)",i),n.length&&(W.log("Applying force audienceIds:",n,"to Campaign",a),r=w.cloneDeep(r),r.audienceIds=n);var o=I(e,r,t),s=!(!t.length&&!n.length),u=T(e,o,s)||[],c=A(u,i);if(h(c,e,o,i),w.forEach(i,(function(){C.trackDecisionEvent(o,r)})),P.emitLayerDecided({layer:e,decisionTicket:r,decision:o}),o.error)throw o.error;return M.isInCohort(o)?void v(c,e,o,i):void W.log("Not activating Campaign: "+q.description(e)+"; not in the cohort because:",o.reason)}function h(e,t,n,i){var r=q.description(t);W.log("Preparing actions",e,"for Campaign",r,"on Page(s)",i),w.forEach(e,O.prepareAction)}function v(e,t,n,i){var r=q.description(t);return W.log("Executing actions",e,"for Campaign",r,"on Page(s)",i),ee.all(w.map(e,(function(e){return O.executePreparedAction(e).then(w.partial(P.emitActionAppliedEvent,e))}))).then((function(){W.log("All page actions for",n,"applied:",e),P.emitActionsForDecisionAppliedEvent(n,e)}))["catch"]((function(e){W.warn("Error evaluating page actions for decision",n,"because:",e)}))}function _(e,t,n,i,r){if(t.length||n.length)return void r(c([],void 0,i));var a=q.relatedAudienceIds(e),o=w.reduce(a,(function(e,t){var n=ce.get(t);return n&&e.push(n),e}),[]);y(o,q.getActivationTimeout(e),(function(){var t=c(o,e,i);w.map(t,(function(t){E(t,o,e)})),r(t)}))}function E(e,t,n){var i=w.map(e.audienceIds,w.bind(ce.get,ce)),r=w.filter(t,(function(t){return!w.includes(e.audienceIds,t.id)}));W.log("When deciding Campaign",q.description(n),"visitor is in audiences:",m(i),"and not in audiences:",m(r))}function m(e){var t=[];return w.each(e,(function(e){t.push(e.name,e)})),t}function y(e,t,n){var i={},r=Ee.getAllPlugins(B.PluginTypes.audienceMatchers);w.each(e,(function(e){var t=L.requiredAudienceFields(e,r);w.each(t,(function(e){i[e]=!0}))}));var a=w.reduce(i,(function(e,t,n){if(w.isUndefined(oe.getAttribute(n))){var i=oe.getPendingAttributeValue(n);w.isUndefined(i)||e.push(i)}return e}),[]);if(0===a.length)return n();var o=[].concat(e),s=te.firstToResolve(w.map(a,(function(e){return ee.resolve(e).then((function(){var e=me.getVisitorProfile();if(o=w.filter(o,(function(t){return w.isUndefined(L.isInAudience(e,t,r))})),!w.isEmpty(o))throw new Error("At least one audience is still pending")}))})));ee.race([s,new ee(function(e,n){setTimeout(n,t)})]).then((function(){W.log("Activating Campaign after pending Audiences resolved",e),n()}),(function(){W.log("Activating Campaign after timeout on Audiences",e),n()}))}function I(e,t,n){var i,r=q.description(e);return i=n.length?M.getDummyLayerDecision(e,n):M.decideLayer(e,t),W.log("Recording decision for Campaign",r,t,"->",i),q.recordLayerDecision(e.id,t,i),i.variationId&&i.experimentId&&oe.updateVariationIdMap(e.id,i.experimentId,i.variationId),e.groupId&&oe.updatePreferredLayerMap(e.groupId,e.id),i}function S(e){var t=de.getCleanupFns(e);if(t.length>0){for(;t.length>0;)t.shift()();Y.dispatch(N.CLEAR_CLEANUP_FN,{lifecycle:e})}}function T(e,t,n){var i=q.description(e),r="NOT applying changes for Campaign";if(!n&&pe.isGlobalHoldback())return W.log(r,i,"(visitor is in global holdback)"),null;if(t.isLayerHoldback)return W.log(r,i,"(visitor is in layer holdback)"),null;if(!t.experimentId||!t.variationId)return W.log(r,i,"(visitor is not eligible for any Experiments)"),null;var a=[].concat(le.getLayerActions(t.layerId)||[],le.getExperimentActions(t.experimentId)||[],le.getExperimentVariationActions(t.experimentId,t.variationId)||[]);return W.log("Got Actions for Campaign:",i,a),a}function A(e,t){return w.filter(e,(function(e){return w.isUndefined(e.pageId)||w.includes(t,e.pageId)}))}var w=n(2),b=n(73).create,D=t.ActivationCodeError=b("ActivationCodeError"),R=t.ProjectJSError=b("ProjectJSError"),O=n(129),N=n(7),C=n(106),P=n(113),L=n(133),V=n(72),k=n(79),x=n(105),F=n(21),M=n(134),U=n(16),G=n(77),B=n(22),z=n(80),j=n(107),H=n(139),Y=n(9),K=n(138),q=n(109),X=n(78).LocalStorage,W=n(20),Q=n(140),$=n(82),J=n(117),Z=n(84),ee=n(12).Promise,te=n(141),ne=n(110),ie=n(112),re=n(131),ae=n(118),oe=n(71),se=n(83),U=n(16),ue=U.get("stores/session"),ce=U.get("stores/audience_data"),le=U.get("stores/action_data"),de=U.get("stores/cleanup"),fe=U.get("stores/directive"),pe=U.get("stores/global"),ge=U.get("stores/group_data"),he=U.get("stores/layer_data"),ve=U.get("stores/layer"),_e=U.get("stores/pending_events"),Ee=U.get("stores/plugins"),me=U.get("stores/visitor"),ye=U.get("stores/view_data"),Ie=U.get("stores/view"),Se=U.get("stores/visitor_id"),Te=U.get("stores/visitor_bucketing"),Ae=U.get("stores/xdomain"),we=n(88),be=n(142),De=1e3,Re=!1,Oe=1e3,Ne=t;t.initialize=function(e){var n=e.clientData;if(x.normalizeClientData(e.clientData),z.on({filter:{type:"error"},handler:r}),Y.dispatch(N.DATA_LOADED,{data:n}),W.log("Initialized with DATA:",n),a(),fe.isDisabled()||fe.shouldOptOut())return void W.log("Controller / Is disabled");G.isReady()?Y.dispatch(N.SET_DOMCONTENTLOADED):G.addReadyHandler((function(){Y.dispatch(N.SET_DOMCONTENTLOADED)}));var o=!1,u=V.get(B.COOKIES.REDIRECT);if(u){var c=u.match(/^(\d+)\|(.*)/);if(c){W.debug("Found legacy redirect data:",u);var l=c[1],d=c[2];Y.dispatch(N.INITIALIZE_STATE,{effectiveVariationId:l,effectiveReferrer:d}),o=!0}}$.time("projectJS");var f=pe.getProjectJS();if(w.isFunction(f))try{H.apply(f)}catch(e){W.error("Error while executing projectJS: ",e),k.emitError(new R(e))}$.timeEnd("projectJS"),w.each(e.plugins||[],(function(e){try{e(J)}catch(e){k.emitInternalError(e)}})),w.each(pe.getPlugins()||[],(function(e){try{H.apply(e,[J])}catch(e){k.emitError(e)}})),o||ne.load();var p=z.on({filter:{type:"lifecycle",name:"activated"},handler:function(){me.observe(oe.persistVisitorProfile),ve.observe(oe.persistLayerStates),ue.observe(oe.persistSessionState),_e.observe(Q.persistPendingEvents),Te.observe(oe.persistVisitorBucketingStore),z.off(p)}});z.on({filter:{type:"lifecycle",name:"viewsActivated"},handler:t.onViewsActivated}),z.on({filter:{type:"lifecycle",name:"pageDeactivated"},handler:t.onPageDeactivated}),t.initializeApi();var g=Q.getPendingEvents();if(g&&(Y.dispatch(N.LOAD_PENDING_EVENTS,{events:g}),Q.retryPendingEvents(g)),z.on({filter:{type:"lifecycle",name:"activate"},handler:t.activate}),P.emitInitializedEvent(),!fe.shouldActivate())return ee.resolve();var h=[],v=s();if(h.push(v),Ae.getCanonicalOrigins()){var _=ie.makeTimeoutPromise(Oe);ee.race([v,_])["catch"]((function(e){W.error("Failed to initialize xDomain storage: ",e)})).then(i)["catch"](be.handleError)}else i();return ee.all(h)},t.activate=function(){try{var e=[];W.log("Activated client"),w.forEach(Ie.getActiveViewStates(),(function(e){ae.deactivate(ye.get(e.id))})),S(B.Lifecycle.preActivate);var t=F.now();Y.dispatch(N.ACTIVATE,{activationId:String(t),activationTimestamp:t});var n=ye.getAll();ae.registerViews(n),oe.setId(oe.getIdFromCookies()),e.push(C.trackPostRedirectDecisionEvent()),Y.dispatch(N.MERGE_VARIATION_ID_MAP,{variationIdMap:oe.getVariationIdMap()}),Y.dispatch(N.MERGE_PREFERRED_LAYER_MAP,{preferredLayerMap:oe.getPreferredLayerMap()}),S(B.Lifecycle.postVisitorProfileLoad),e.push(u(Ee.getAllPlugins(B.PluginTypes.visitorProfileProviders)).then((function(){W.log("Populated visitor profile")})));var i=c(),r=M.decideGlobal(i);W.log("Made global decision",i,"->",r),Y.dispatch(N.RECORD_GLOBAL_DECISION,r);var a=C.trackClientActivation();a?W.log("Tracked activation event",a):W.log("Not tracking activation event");var o=Ne.setUpViewActivation(n);return Re?ae.activateMultiple(o):w.each(o,(function(e){ae.activateMultiple([e])})),S(B.Lifecycle.postViewsActivated),S(B.Lifecycle.postActivate),P.emitActivatedEvent(),ee.all(e).then((function(){z.emit({type:j.TYPES.LIFECYCLE,name:"activateDeferredDone"}),W.log("All immediate effects of activation resolved")}),k.emitError)}catch(e){return k.emitError(e),ee.reject(e)}},Ne.setUpViewActivation=function(e){var t=[];return w.each(e,(function(e){ae.shouldTriggerImmediately(e.activationType)?t.push(e):e.activationType===B.ViewActivationTypes.callback?(W.debug("Setting up conditional activation for Page",ae.description(e)),Ne.activateViewOnCallback(e)):e.activationType===B.ViewActivationTypes.polling?(W.debug("Setting up polling activation for Page",ae.description(e)),Z.pollFor(w.partial(H.apply,e.activationCode),null,w.partial(re.isTimedOut,F.now())).then((function(){ae.activateMultiple([e])}))["catch"]((function(t){W.warn("Failed to activate view ",e,t)}))):e.activationType!==B.ViewActivationTypes.manual&&k.emitError(new Error("Unknown view activationType: "+e.activationType))})),t},Ne.activateViewOnCallback=function(e){var t=function(t){var n=w.extend({},t,{pageName:e.apiName,type:"page"});we.push(n)},n={pageId:e.id};Object.defineProperty(n,"isActive",{get:function(){return Ie.isViewActive(e.id)}});try{H.apply(e.activationCode,[t,n])}catch(t){var i=new D("("+t.toString()+") in activationCode for "+ae.description(e));k.emitError(i,{originalError:t,userError:!0})}},t.onViewsActivated=function(e){var t,n=e.data.views,i=w.map(n,"id");try{if(!Se.getBucketingId())throw new Error("View activated with no visitorId set");var r=d(i)["catch"](k.emitError);return t=ee.all(w.map(n,(function(e){var t=function(){ae.parseViewTags(e);var t=C.trackViewActivation(e);t?W.log("Tracked activation for Page",ae.description(e),t):W.log("Not Tracking activation for Page",ae.description(e))};return G.isReady()?ee.resolve(t()):Z.pollFor(G.isReady,De).then(t)}))),ee.all([r,t])}catch(e){k.emitError(e)}},t.onPageDeactivated=function(e){var t=e.data.page,n=le.getAllActionIdsByPageId(t.id);w.each(n,(function(e){var n=le.getActionState(e);n&&(w.each(n,(function(e,n){if(e.cancel)try{e.cancel(),W.debug("Controller / Canceled change",n,"observation due to deactivation of page:",t)}catch(e){W.error("Controller / Error canceling change",n,"observation upon deactivation of page.",e)}if(t.undoOnDeactivation&&e.undo)try{e.undo(),W.debug("Controller / Undid change",n,"due to deactivation of page:",t)}catch(e){W.error("Controller / Error undoing change upon deactivation of page.",e)}})),Y.dispatch(N.REMOVE_ACTION_STATE,{actionId:e}),W.debug("Controller / Undid changes and/or canceled change observation due to deactivation of page:",t,e))}))},t.initializeApi=function(){var e={get:we.get,push:we.push},t=window.optimizely;w.isArray(t)&&w.each(t,(function(t){e.push(t)})),e.data={note:"Obsolete, use optimizely.get('data') instead"},e.state={},window.optimizely=e},t.decideAndExecuteLayerASAP=p}),(function(e,t,n){function i(e,t,n){var i=_.getActionState(t.id);if(!i)return void p.warn("Action / Attempted to prepare change for inactive action: ",t);var r=_.getChangeApplier(e.id,t.id);if(!a.isUndefined(r))return void p.warn("Action / Attempted to prepare a change which is already being applied: ",e);var s={changeId:e.id,actionId:t.id,changeApplier:y.create(e,t,n)};f.dispatch(o.SET_CHANGE_APPLIER,s)}function r(e,t,n,o){if(a.includes(o,t))return void p.error("Change with id "+t+" has circular dependencies: "+o.concat(t));if(!e[t]){var c=E.getChange(t);if(!c){var d="Change with id "+t+" is absent";return o.length&&(d+=" but listed as a dependency for "+o[o.length-1]),void p.warn(d)}e[t]=new g(function(d){var f=a.map(c.dependencies||[],(function(i){return r(e,i,n,o.concat([t]))}));if(c.src){var v="change_"+c.src,m=u.makeAsyncRequest(v,(function(){return h.addScriptAsync("https://cdn.optimizely.com/public/1706490390/data"+c.src,(function(){u.resolveRequest(v)}))})).then((function(){var e=E.getChange(c.id);e||s.emitError(new S("Failed to load async change from src: "+c.src)),i(e,n,l.now())}));f.push(m)}g.all(f).then((function(){var e=l.now(),i=_.getChangeApplier(t,n.id);return i?(p.debug("Action / Applying change:",c),i.apply().then((function(t){t?p.log(t):p.debug("Action / Applied change for the first time in "+(l.now()-e)+"ms:",c),d()}))):(p.debug("Action / Not applying change ",t," - No changeApplier found."),void d())}))["catch"]((function(e){p.error("Action / Failed to apply change:",c,e),d()}))})}return e[t]}var a=n(2),o=n(7),s=n(79),u=n(6),c=n(73).create,l=n(21),d=n(16),f=n(9),p=n(20),g=n(12).Promise,h=n(127),v=d.get("stores/global"),_=d.get("stores/action_data"),E=d.get("stores/change_data"),m=d.get("stores/session"),y=n(130),I=n(131);I.initialize();var S=c("ActionError");t.prepareAction=function(e){p.debug("Action / Preparing:",e),f.dispatch(o.ACTION_EXECUTED,{actionId:e.id,sessionId:m.getSessionId(),layerId:e.layerId,pageId:e.pageId,timestamp:l.now(),activationId:v.getActivationId()});var t=l.now();a.forEach(e.changeSet,(function(n){var r=a.isObject(n)?n.id:n,s=E.getChange(r);s||(f.dispatch(o.ADD_CHANGE,n),s=E.getChange(n.id)),s.src||i(s,e,t)}))},t.executePreparedAction=function(e){p.debug("Action / Executing:",e);var t={},n=a.map(e.changeSet,(function(n){var i=a.isObject(n)?n.id:n;return r(t,i,e,[])}));return g.all(n).then((function(){p.debug("changes for action id="+e.id+" applied")}))}}),(function(e,t,n){var i=n(13).Promise,r=n(21),a=n(16),o=a.get("stores/plugins"),s=n(22),u=n(20);t.create=function(e,t,n){var a={identifier:e.id,action:t,startTime:n||r.now()};try{var c=o.getPlugin(s.PluginTypes.changeAppliers,e.type);if(!c)throw new Error("Unrecognized change type "+e.type);return new c(e,a)}catch(e){u.error("Change applier was never properly constructed:",e);var l={apply:function(){return i.reject(e)}};return l}}}),(function(e,t,n){function i(){"interactive"!==document.readyState&&"complete"!==document.readyState||(t.domReadyTime=Date.now())}var r=n(132),a=n(16).get("stores/directive");t.domReadyTime=null,t.initialize=function(){i(),document.addEventListener("readystatechange",i,!0)},t.isTimedOut=function(e){var n=Date.now();if(!t.domReadyTime||!e)return!1;var i=Math.max(e,t.domReadyTime);return a.isEditor()&&(i=t.domReadyTime),!(n-i<r.SELECTOR_POLLING_MAX_TIME)}}),(function(e,t){e.exports={SELECTOR_POLLING_MAX_TIME:2e3,CHANGE_DATA_KEY:"optimizelyChangeData",CHANGE_ID_ATTRIBUTE_PREFIX:"data-optly-"}}),(function(e,t,n){function i(e,t){var n={};return o.each(e,(function(e){if(o.isArray(e))o.extend(n,i(e,t));else if(o.isObject(e)){var r=t[e.type];r&&o.each(r.fieldsNeeded,(function(e){n[e]=!0}))}})),n}function r(e,t){return function(n){var i=n.type,r=t[i];if(!r)throw new Error("Audience / No matcher found for type="+i);if(r.fieldsNeeded)for(var a,s,c=0;c<r.fieldsNeeded.length;c++)if(a=r.fieldsNeeded[c],s=e[a],o.isUndefined(s))return void u.debug("Audience / Required field",a,"for type",i,"has no value");u.debug("Matching condition:",n,"to values:",e);var l=r.match(e,n);if(!o.isUndefined(l))return!!l}}function a(e){return e.name?e.name+" ("+e.id+")":e.id}var o=n(2),s=n(119),u=n(20);t.isInAudience=function(e,t,n){var i=r(e,n);u.groupCollapsed("Checking audience",t.name,t.id,t),u.debug("Visitor Profile:",e);var o;try{var c=s.evaluate(t.conditions,i)}catch(e){o=e,c=!1}return u.groupEnd(),o&&u.error("Audience / Error evaluating audience",a(t),":",o),u.log("Is "+(c?"in":"NOT in")+" audience:",a(t)),c},t.requiredAudienceFields=function(e,t){return o.keys(i(e.conditions,t))}}),(function(e,t,n){function i(e,t){_.debug("Decision / Deciding layer for group: ",h.description(e));var n,i,r=t.preferredLayerId,a=!!r;if(a)_.debug("Decision / Using preferredLayerMap to select layer for group:",h.description(e)),n=r;else try{n=l.chooseWeightedCandidate(t.bucketingId,e.id,e.weightDistributions),n&&"None"!==n||(i='Group traffic allocation. Visitor maps to a "hole" in the bucket space left by an experiment or campaign that\'s since been removed from the group')}catch(e){i="Group traffic allocation. Visitor maps to a point in the bucket space which has never been covered by any experiment or campaign."}if(i)return{layerId:null,reason:i};if(!s.find(e.weightDistributions,{entityId:n})){var o=a?" sticky-":" non-sticky ",u="Visitor was"+o+"bucketed into a campaign ("+n+") which is not in the group";if(!a)throw new f(u);return{layerId:null,reason:u}}return{layerId:n}}function r(e,t){for(var n=0;n<e.experiments.length;n++)for(var i=0;i<e.experiments[n].variations.length;i++)if(t.indexOf(e.experiments[n].variations[i].id)>-1)return{experimentId:e.experiments[n].id,variationId:e.experiments[n].variations[i].id};return null}function a(e){var t=m.getPlugin(g.PluginTypes.deciders,e);if(s.isEmpty(t))throw new Error("No deciders found for policy: "+e);return t}function o(e,t){var n=m.getAllPlugins(g.PluginTypes.audienceMatchers);return s.reduce(t,(function(t,i){return c.isInAudience(e,i,n)&&t.push(i.id),t}),[])}var s=n(2),u=n(79),c=n(133),l=n(135),d=n(136),f=n(137).DecisionError,p=n(16),g=n(22),h=n(138),v=n(109),_=n(20),E=n(40),m=p.get("stores/plugins"),y=p.get("stores/global"),I=p.get("stores/layer_data");t.isPageIdRelevant=function(e){if(!e)return!1;var t=a(e.policy);return s.isFunction(t.includePageIdInDecisionTicket)?t.includePageIdInDecisionTicket(e):t.includePageIdInDecisionTicket===!0},t.createTicket=function(e){var t=s.pick(e,["bucketingId","globalHoldback","preferredVariationMap","pageId"]);return s.extend(t,{audienceIds:o(e.visitorProfile,e.audiences),activationId:y.getActivationId()}),t},t.decideGlobal=function(e){var t=l.isHoldback(e.bucketingId,{id:null,holdback:e.globalHoldback});return{isGlobalHoldback:t}},t.decideGroup=i,t.decideLayer=function(e,t){_.debug("Deciding: ",e,t);var n,i,r=a(e.policy),o={layerId:e.id,experimentId:null,variationId:null,isLayerHoldback:l.isHoldback(t.bucketingId,e)};if(s.isEmpty(e.experiments))throw new f("No experiments in layer.");try{if(r.decideLayer){_.debug("Decision / Using decider's custom decideLayer.");var c=r.decideLayer(e,t);n=c.experiment,i=c.variation}else _.debug("Decision / Using default decideLayer behavior."),n=r.selectExperiment(e,t.audienceIds,t.bucketingId),i=d.selectVariation(n,t.audienceIds,t.bucketingId,t.activationId,t.preferredVariationMap)}catch(e){e instanceof f?o.reason=e.message:o.error=e}return o.experimentId=n?n.id:null,o.variationId=i?i.id:null,o.error&&(o.error.name="DecisionEngineError",u.emitError(o.error)),o},t.getDummyLayerDecision=function(e,t){var n,i=r(e,t);return i?(_.log("Decision / Applying force variation:",i.variationId,"to Campaign",v.description(e)),n={layerId:e.id,variationId:i.variationId,experimentId:i.experimentId,isLayerHoldback:!1,reason:"force"}):(_.log("No variation matches ids:",t,"in Campaign",v.description(e)),n={layerId:e.id,variationId:null,experimentId:null,isLayerHoldback:!1,reason:"force"}),n},t.isInCohort=function(e){if(!e.experimentId||!e.variationId)return!1;var t=I.get(e.layerId);return!(E.isSingleExperimentPolicy(t.policy)&&e.isLayerHoldback)}}),(function(e,t,n){var i=n(61),r=t.TOTAL_POINTS=1e4;t.bucketingNumber=function(e,t,n){var a=i.hashToInt(e+t,n,r);return a},t.isHoldback=function(e,n){return t.bucketingNumber(e,n.id,i.Seed.IGNORING)<(n.holdback||0)},t.chooseWeightedCandidate=function(e,n,r){for(var a=t.bucketingNumber(e,n,i.Seed.BUCKETING),o=0;o<r.length;o++)if(r[o].endOfRange>a)return r[o].entityId;throw new Error("Unable to choose candidate")}}),(function(e,t,n){var i=n(2),r=n(135),a=n(119),o=n(137).DecisionError,s=n(20),u="impression";t.isValidExperiment=function(e,t){var n,r=i.partial(i.includes,e);return s.groupCollapsed("Decision / Evaluating audiences for experiment:",t,e),n=!t.audienceIds||a.evaluate(t.audienceIds,r),s.groupEnd(),s.debug("Decision / Experiment",t,"is valid?",n),n},t.selectVariation=function(e,t,n,a,c){
if(!e.variations||0===e.variations.length)throw new o('No variations in selected experiment "'+e.id+'"');if(!e.weightDistributions&&e.variations.length>1)throw new o('On selected experiment "'+e.id+'", weightDistributions must be defined if # variations > 1');var l;if(e.bucketingStrategy&&e.bucketingStrategy===u)if(1===e.variations.length)l=e.variations[0].id;else{var d=a;l=r.chooseWeightedCandidate(n+d,e.id,e.weightDistributions)}else if(c&&c[e.id]){s.debug("Decision / Using preferredVariationMap to select variation for experiment:",e.id);var f=c[e.id];if(!i.find(e.variations,{id:f}))return s.debug("Decision / Preferred variation:",f,"not found on experiment:",e.id,". Visitor not bucketed."),null;l=f}else l=1===e.variations.length?e.variations[0].id:r.chooseWeightedCandidate(n,e.id,e.weightDistributions);var p=i.find(e.variations,{id:l});if(p)return s.debug("Decision / Selected variation:",p),p;throw new o('Unable to find selected variation: "'+l+'".')},t.getExperimentById=function(e,t){var n=i.find(e.experiments,{id:t});if(n)return n;throw new o("Unable to find selected experiment.")},t.hasVariationActionsOnView=function(e,t){return s.debug("Decision / Checking variation:",e,"for actions on pageId:",t),!!i.find(e.actions,(function(e){return e.pageId===t&&!i.isEmpty(e.changes)}))}}),(function(e,t){function n(e){this.message=e}n.prototype=new Error,t.DecisionError=n}),(function(e,t,n){function i(e){return r.map(e.weightDistributions,"entityId")}var r=n(2);t.description=function(e){var t=!!e.name,n=t?'"'+e.name+'" ':"",r=i(e).join(", ");return n+"(id "+e.id+", campaigns: "+r+")"}}),(function(module,exports,__webpack_require__){var createError=__webpack_require__(74),di=__webpack_require__(16),Logger=__webpack_require__(20),CSP_MODE=!1,EXEC_WITH_JQUERY=!0,ExecError=exports.Error=createError("ExecError");exports.apply=function(e,t){t=t||[],EXEC_WITH_JQUERY&&(t=t.concat(di.get("env/jquery")));try{return e.apply(void 0,t)}catch(n){throw Logger.warn("Error applying function",e,"with args:",t,n),new ExecError(n)}},exports.eval=function(str){if(CSP_MODE)throw new ExecError("eval is not supported in CSP mode");try{return EXEC_WITH_JQUERY&&(str="var $ = optimizely.get('jquery');"+str),eval(str)}catch(e){throw Logger.warn("Error executing JS:",str,e),new ExecError(e)}}}),(function(e,t,n){var i=n(2),r=n(79),a=n(22),o=n(23),s=n(78).LocalStorage,u=n(20),c=n(86),l=n(16),d=l.get("stores/pending_events"),f=a.StorageKeys.PENDING_EVENTS;t.persistPendingEvents=function(){try{var e=d.getEventsString();s.setItem(f,e),n(83).setItem(f,e)}catch(e){u.warn("PendingEvents / Unable to set localStorage key, error was: ",e),r.emitInternalError(e)}},t.getPendingEvents=function(){try{return o.parse(s.getItem(f))}catch(e){return null}},t.retryPendingEvents=function(e){i.forOwn(e,(function(e,t){c.retryableRequest(e.data,t,e.retryCount)})),i.isEmpty(e)||u.log("Retried pending events: ",e)}}),(function(e,t,n){var i=n(2),r=n(12).Promise;t.firstToResolve=function(e){return new r(function(t){i.each(e,(function(e){r.resolve(e).then(t,(function(){}))}))})}}),(function(e,t,n){var i=n(2),r=n(90),a=n(73).BaseError,o=n(21),s=n(16),u=n(77),c=n(20),l=n(36),d=n(86),f=s.get("stores/global"),p="https://errors.client.optimizely.com";t.handleError=function(e,t){function n(){return d.request({url:p+"/log",method:"POST",data:v,contentType:"application/json"}).then((function(e){c.log("Error Monitor / Logged error with response: ",e)}),(function(e){c.error("Failed to log error, response was: ",e)}))}var s=e.name||"Error",g=e.message,h=e.stack||null;e instanceof a&&(g instanceof Error?(g=g.message,h=e.message.stack):h=null);var v={timestamp:o.now(),clientEngine:r.ENGINE,clientVersion:r.VERSION,accountId:f.getAccountId(),projectId:f.getProjectId(),errorClass:s,message:g,stacktrace:h};t&&(v.metadata=i.reduce(t,(function(e,t,n){return i.isObject(t)||e.push({key:n,value:String(t)}),e}),[])),c.error("Logging error",v),u.isLoaded()?n():l.addEventListener("load",n)}}),(function(e,t,n){function i(e){var t=!1;if(a.isArray(window.optimizely)&&a.each(window.optimizely,(function(n){a.isArray(n)&&"verifyPreviewProject"===n[0]&&String(n[1])===e&&(t=!0)})),!t)throw new Error("Preview projectId: "+e+" does not match expected")}function r(){s.on({filter:{type:u.TYPES.ANALYTICS,name:"trackEvent"},handler:f}),s.on({filter:{type:u.TYPES.LIFECYCLE,name:"viewActivated"},handler:f}),s.on({filter:{type:u.TYPES.LIFECYCLE,name:"layerDecided"},handler:f}),s.on({filter:{type:"error"},publicOnly:!0,handler:f})}var a=n(2),o=n(16),s=n(80),u=n(107),c=n(36),l=o.get("stores/directive"),d="optimizelyPreview",f=function(e){var t=c.getGlobal(d);t.push(e)};t.initialize=function(e){l.isSlave()&&i(e),r()},t.setupPreviewGlobal=function(){c.getGlobal(d)||c.setGlobal(d,[])},t.pushToPreviewGlobal=function(e){f(e)}}),(function(e,t,n){e.exports=function(e){e.registerVisitorProfileProvider(n(145))}}),(function(e,t){e.exports={provides:"visitorId",getter:["stores/visitor_id",function(e){return e.getRandomId()}]}}),(function(e,t,n){e.exports=function(e){e.registerVisitorProfileProvider(n(147)),e.registerAudienceMatcher("behavior",n(149))}}),(function(e,t,n){var i=n(148);e.exports={provides:"events",isTransient:!0,getter:["stores/visitor_events",function(e){return i.getEvents(e)}]}}),(function(e,t,n){var i=n(2),r=n(69);t.getEvents=function(e){var t=r.getEvents(),n=[].concat.apply([],i.values(e.getForeignEvents())),a=[].concat.apply([],i.values(e.getForeignEventQueues()));return r.mergeAllEvents([t,n,a])}}),(function(e,t,n){var i=n(2),r=n(23),a=n(150),o=n(151);e.exports={fieldsNeeded:["events"],match:function(e,t){var n=[],s=r.parse(t.value);return n=i.isUndefined(s.version)?[s]:a.buildFromSpecV0_1(s),i.every(n,(function(t){return o.isSatisfied(t,e.events)}))}}}),(function(e,t,n){function i(e){return e=(e||"").toString().trim(),p[e]||e}function r(e,t,n){var i={where:t};if(e.count&&(i["limit"]=e.count),e.modifier===s.FREQUENCY_FILTERS.MOST_FREQUENT){var r=s.getFieldKeyPathForSource(e.name,n),a=s.aggregate("count"),o=s.aggregateField("count"),l=s.groupField(r);return u.extend(i,{select:[{field:l}],groupBy:s.groupBy([r]),aggregate:[a],orderBy:[{field:o,direction:"DESC"}]})}return u.extend(i,{orderBy:[{field:[c.FIELDS.TIME],direction:"DESC"}]})}function a(e){var t=[];if(u.isUndefined(e))throw new Error("rule is undefined");if(!u.isObject(e))throw new Error("rule is not an Object");"0.2"!==e["version"]&&t.push('version: not "0.2"'),e["filter"]&&(u.isArray(e["filter"])?u.each(e["filter"],(function(e,n){var i=s.validateFieldKeyPathV0_2(e["field"],s.FieldPurpose.FILTER);i&&t.push("filter["+n+"]: "+i);var r=s.validateComparatorAndValue(e["comparator"],e["value"]);r&&t.push("filter["+n+"]: "+r)})):t.push("filter: not an array"));var n=[],i=[];if(e["sort"]&&(e["reduce"]&&e["reduce"]["aggregator"]&&"nth"!==e["reduce"]["aggregator"]&&t.push("sort: superfluous because we can apply aggregator "+l.stringify(e["reduce"]["aggregator"])+" to unsorted items"),u.isArray(e["sort"])?u.each(e["sort"],(function(e,r){var a=s.validateFieldKeyPathV0_2(e["field"],s.FieldPurpose.SORT);a&&t.push("sort["+r+"]: "+a),e["field"]&&"frequency"===e["field"][0]?n.push(e):i.push(e);var u=o(e["direction"]);u&&t.push("sort["+r+"]: "+u)})):t.push("sort: not an array"),n.length&&i.length&&t.push('sort: sorting by non-["frequency"] field is pointless because we are going to sort the picked values by ["frequency"]'),n.length&&!e["pick"]&&t.push('sort: sorting by ["frequency"] is impossible because no values have been picked')),e["pick"]){e["reduce"]&&"count"===e["reduce"]["aggregator"]&&t.push('pick: superfluous because we can apply aggregator "count" to raw events');var r=s.validateFieldKeyPathV0_2(e["pick"]["field"]);r&&t.push("pick: "+r)}if(e["reduce"]){var a=e["reduce"]["aggregator"],c="aggregator "+(l.stringify(a)||String(a)),d=e["reduce"]["n"],f="index "+(l.stringify(d)||String(d));u.includes(["sum","avg","max","min","count","nth"],a)||t.push("reduce: "+c+" is unknown"),u.includes(["sum","avg","max","min"],a)&&(e["pick"]||t.push("reduce: "+c+" is impossible to use because no values have been picked")),"nth"===a?((!u.isNumber(d)||isNaN(d)||parseInt(d,10)!==d||d<0)&&t.push("reduce: "+f+" is not a non-negative integer (mandated by "+c+")"),e["sort"]||t.push('reduce: aggregator "nth" is meaningless without a specific sort order')):u.isUndefined(d)||t.push("reduce: "+f+" is defined (not mandated by "+c+")")}if(t.length)throw new Error(t.join("\n"))}function o(e){var t="direction "+(l.stringify(e)||String(e));if(!u.includes(["ascending","descending"],e))return t+' is not "ascending" or "descending"'}var s=t,u=n(2),c={FIELDS:n(59).FIELDS,FIELDS_V0_2:n(59).FIELDS_V0_2},l=n(23),d=n(20),f=n(151);s.MILLIS_IN_A_DAY=864e5,s.aggregateField=function(e,t){return u.isString(t)&&(t=[t]),t=t||f.DEFAULT_FIELD,[f.generateAlias(e,t)]},s.groupField=function(e){return u.isString(e)&&(e=[e]),e=e||f.DEFAULT_FIELD,[e.join(".")]};var p={"<":"lt","<=":"lte",">":"gt",">=":"gte","=":"eq","==":"eq"};s.fieldComparison=function(e,t,n){return e=i(e),u.isString(t)&&(t=[t]),"exists"===e?{op:e,args:[{field:t}]}:{op:e,args:[{field:t},{value:n}]}},s.relativeTimeComparison=function(e,t){return{op:i(e),args:[{op:"-",args:[{eval:"now"},{field:[c.FIELDS.TIME]}]},{value:t*s.MILLIS_IN_A_DAY}]}},s.rangeTimeComparison=function(e){return u.isArray(e)?{op:"between",args:[{field:[c.FIELDS.TIME]},{value:[e[0]||+new Date(0),e[1]||+new Date]}]}:(d.error("Rule builder","rangeTimeComparison passed invalid range",e),null)},s.groupBy=function(e){for(var t=[],n=0;n<e.length;n++)t[n]={field:e[n]};return t},s.aggregate=function(e,t){return u.isString(t)&&(t=[t]),t=t||f.DEFAULT_FIELD,{op:e,args:[{field:t}]}},s.SOURCE_TYPES={BEHAVIOR:"events",CUSTOM_BEHAVIOR:"custom_behavior",DCP:"dcp"},s.FREQUENCY_FILTERS={MOST_FREQUENT:"most_frequent",LEAST_FREQUENT:"least_frequent"},s.RECENCY_FILTERS={MOST_RECENT:"most_recent",LEAST_RECENT:"least_recent"},s.getFieldKeyPathForSource=function(e,t){t=t||s.SOURCE_TYPES.BEHAVIOR;var n=[];return u.isString(e)?(n=[e],t!==s.SOURCE_TYPES.BEHAVIOR||u.includes(u.values(c.FIELDS),e)||(n=[c.FIELDS.OPTIONS,e])):n=e,n},s.buildFromSpecV0_1=function(e){if(!(e.action||e.filters&&0!==e.filters.length))throw new Error('Audience spec must have an "action" field or at least one "filter" '+l.stringify(e));var t=s.fieldComparison("gt",c.FIELDS.TIME,0),n=[],i=[];if(e.action&&(i.push(s.fieldComparison("eq",c.FIELDS.NAME,e.action.value)),e.action.type&&i.push(s.fieldComparison("eq",c.FIELDS.TYPE,e.action.type))),e.time)if("last_days"===e.time.type)i.push(s.relativeTimeComparison("lte",e.time.days));else if("range"===e.time.type){var a=s.rangeTimeComparison([e.time.start,e.time.stop]);a&&i.push(a)}else d.error("Rule builder",'Audience spec has bad "time" type',e.time.type);if(t={op:"and",args:i},e.count&&n.push({where:s.fieldComparison(e.count.comparator,"0",e.count.value),from:{select:[{field:s.aggregateField("count")}],where:t,aggregate:[s.aggregate("count")]}}),e.filters&&u.each(e.filters,(function(r){var a,o,u=s.getFieldKeyPathForSource(r.name,e.source);if(r.modifier===s.FREQUENCY_FILTERS.MOST_FREQUENT?(a=s.aggregate("count"),o=s.aggregateField("count")):r.modifier===s.RECENCY_FILTERS.MOST_RECENT&&(a=s.aggregate("max",c.FIELDS.TIME),o=s.aggregateField("max",c.FIELDS.TIME)),a){var l=u,d=s.groupField(l);n.push({where:s.fieldComparison(r.comparator,"0",r.value),from:{select:[{field:d}],where:t,groupBy:s.groupBy([l]),aggregate:[a],orderBy:[{field:o,direction:"DESC"}],limit:1}})}else i.push(s.fieldComparison(r.comparator,u,r.value))})),e.pick){if(n.length>0)throw new Error('A "pick" clause must not be specified with "count" or "most_recent", "most_frequent" modifiers'+l.stringify(e));return[r(e.pick,t,e.source)]}return n.length>0?n:[{where:t}]},s.buildFromSpecV0_2=function(e){a(e);var t={where:{op:"and",args:u.map(e["filter"]||[],(function(e){return"age"===e["field"][0]?s.relativeTimeComparison(e["comparator"]||"eq",e["value"]/s.MILLIS_IN_A_DAY):s.fieldComparison(e["comparator"]||"eq",s.convertFieldKeyPathFromSpecV0_2(e["field"]),e["value"])}))}};if(e["reduce"]&&"count"===e["reduce"]["aggregator"])return u.extend(t,{aggregate:[{op:"count",args:[{field:["*"]}]}],select:[{field:["_count_*"]}]});var n=[],i=[];if(e["sort"]&&(u.each(e["sort"],(function(e){u.includes(["ascending","descending"],e["direction"])&&(u.includes(["time","age"],e["field"][0])&&i.push(e),"frequency"===e["field"][0]&&n.push(e))})),i.length&&!n.length&&(t["orderBy"]=u.filter(u.map(i,(function(e){return"time"===e["field"][0]?{field:s.convertFieldKeyPathFromSpecV0_2(["time"]),direction:"ascending"===e["direction"]?"ASC":"DESC"}:"age"===e["field"][0]?{field:s.convertFieldKeyPathFromSpecV0_2(["time"]),direction:"ascending"===e["direction"]?"DESC":"ASC"}:void 0}))))),e["pick"]&&e["pick"]["field"]){var r=s.convertFieldKeyPathFromSpecV0_2(e["pick"]["field"]);if(e["reduce"]&&u.includes(["avg","max","min","sum"],e["reduce"]["aggregator"]))return u.extend(t,{aggregate:[{op:e["reduce"]["aggregator"],args:[{field:r}]}],select:[{field:[f.generateAlias(e["reduce"]["aggregator"],r)]}]});t=n.length?u.extend(t,{groupBy:[{field:r}],aggregate:[{op:"count",args:[{field:["*"]}]}],orderBy:[{field:["_count_*"],direction:"ascending"===n[0]["direction"]?"ASC":"DESC"}],select:[{field:[r.join(".")]}]}):u.extend(t,{select:[{field:r}]})}if(e["reduce"]&&"nth"===e["reduce"]["aggregator"]){var o=e["reduce"]["n"];if(u.isNumber(o)&&o>=0&&Number(o)===Math.floor(Number(o)))return u.extend(t,{offset:o,limit:1})}return t},s.convertFieldKeyPathFromSpecV0_2=function(e){return"tags"===e[0]&&"revenue"===e[1]?["r"]:[c.FIELDS_V0_2[e[0]]].concat(e.slice(1))},s.FieldPurpose={FILTER:"filter",SORT:"sort",PICK:"pick"},s.validateFieldKeyPathV0_2=function(e,t){var n="field "+(l.stringify(e)||String(e));if(!u.isArray(e)||!u.every(e,u.isString))return n+" is not an array of strings";if("tags"===e[0]&&e.length>2||"tags"!==e[0]&&e.length>1)return n+" includes too many strings";if("tags"===e[0]&&e.length<2)return n+" does not specify an exact tag";if(e.length<1)return n+" does not specify a top-level field";var i=u.keys(c.FIELDS_V0_2),r=["age","frequency"];return t===s.FieldPurpose.FILTER&&(i.push("age"),r=["frequency"]),t===s.FieldPurpose.SORT&&(i=["time","age","frequency"],r=["name","type","category","tags"]),u.includes(r,e[0])?n+" is not supported here":u.includes(i,e[0])?void 0:n+" is unknown"},s.validateComparatorAndValue=function(e,t){var n="comparator "+(l.stringify(e)||String(e)),i="value "+(l.stringify(t)||String(t));if(!u.isString(e)&&!u.isUndefined(e))return n+" is not a string";switch(e){case void 0:case"eq":case"is":case"contains":break;case"lt":case"gt":case"lte":case"gte":if(!u.isNumber(t))return i+" is not a number (mandated by "+n+")";break;case"in":if(!u.isArray(t))return i+" is not an array (mandated by "+n+")";break;case"between":if(!(u.isArray(t)&&2===t.length&&u.isNumber(t[0])&&u.isNumber(t[1])&&t[0]<=t[1]))return i+" is not a pair of increasing numbers (mandated by "+n+")";break;case"regex":if(!(u.isString(t)||u.isArray(t)&&2===t.length&&u.isString(t[0])&&u.isString(t[1])))return i+" is not a pattern string or a [pattern string, flags string] array (mandated by "+n+")";break;case"exists":if(!u.isUndefined(t))return i+" is not undefined (mandated by "+n+")";break;default:return n+" is unknown"}}}),(function(e,t,n){var i=n(2),r=n(22),a=n(20),o=i.bind(a.log,a),s=n(21),u=n(60).getFieldValue,c=n(23),l=t;l.getValueOrDefault=function(e,t,n){if(e.getValueOrDefault)return e.getValueOrDefault(t,n);var i=u(e,t);return"undefined"==typeof i&&(i=n),i},l.maybeTrimLowerCase=function(e){return"string"==typeof e?e.trim().toLowerCase():e},l.clause={WHERE:"where",GROUP_BY:"groupBy",AGGREGATE:"aggregate",HAVING:"having",ORDER_BY:"orderBy",SELECT:"select",OFFSET:"offset",LIMIT:"limit",FROM:"from"},l.DEFAULT_FIELD=["*"],l.booleanOperators={eq:function(e){var t=i.map(e,l.maybeTrimLowerCase);return t[0]==t[1]},is:function(e){return e[0]===e[1]},gt:function(e){return e[0]>e[1]},lt:function(e){return e[0]<e[1]},gte:function(e){return e[0]>=e[1]},lte:function(e){return e[0]<=e[1]},"in":function(e){var t=i.map(e[1]||[],l.maybeTrimLowerCase);return i.includes(t,l.maybeTrimLowerCase(e[0]))},between:function(e){return e[1][0]<=e[0]&&e[0]<=e[1][1]},contains:function(e){var t=i.map(e,(function(e){return"string"==typeof e?e.toLowerCase():e}));return(t[0]||"").indexOf(t[1])!==-1},regex:function(e){try{var t,n;return i.isString(e[1])?(t=e[1],n="i"):(t=e[1][0]||"",n=e[1][1]||""),new RegExp(t,n).test(e[0])}catch(e){return a.error("Rules",'In operator "regex", error: '+(e.message||"invalid RegExp /"+[t,n].join("/"))),!1}},exists:function(e){return"undefined"!=typeof e[0]},and:function(e){return i.every(e,(function(e){return e}))},or:function(e){return i.some(e,(function(e){return e}))},not:function(e){return!e[0]}},l.arithmeticOperators={"+":function(e){return(e[0]||0)+(e[1]||0)},"-":function(e){return(e[0]||0)-(e[1]||0)},"/":function(e){return(e[0]||0)/(e[1]||1)},"%":function(e){return(e[0]||0)%(e[1]||1)}},l.aggregateOperators={sum:function(e,t){for(var n=e[0]||l.DEFAULT_FIELD,i=0,r=0;r<t.length;r++)i+=l.getValueOrDefault(t[r],n,0);return i},avg:function(e,t){if(0===t.length)return 0;for(var n=e[0]||l.DEFAULT_FIELD,i=0,r=0;r<t.length;r++)i+=l.getValueOrDefault(t[r],n,0);return i/t.length},max:function(e,t){for(var n=e[0]||l.DEFAULT_FIELD,i=Number.NEGATIVE_INFINITY,r=0;r<t.length;r++)i=Math.max(i,l.getValueOrDefault(t[r],n,Number.NEGATIVE_INFINITY));return i},min:function(e,t){for(var n=e[0]||l.DEFAULT_FIELD,i=Number.POSITIVE_INFINITY,r=0;r<t.length;r++)i=Math.min(i,l.getValueOrDefault(t[r],n,Number.POSITIVE_INFINITY));return i},count:function(e,t){return t.length}},l.functions={now:function(){return s.now()}},l.getScalarOperator=function(e){return e in l.booleanOperators?l.booleanOperators[e]:e in l.arithmeticOperators?l.arithmeticOperators[e]:null},l.operate=function(e,t){if(t.hasOwnProperty("value"))return t["value"];if(t.hasOwnProperty("field"))return l.getValueOrDefault(e,t["field"]);if(t.hasOwnProperty("eval"))return t["eval"]in l.functions?l.functions[t["eval"]]():void a.error("Rules","Unknown function: "+t["eval"]);if(!t["op"])return void a.error("Rules","No operator specified: "+c.stringify(t));var n=l.getScalarOperator(t["op"]);if(!n)return void a.error("Rules","Unknown operator: "+t["op"]);var r=i.partial(l.operate,e),o=t["args"]||[],s=i.map(o,(function(e){return r(e)}));return n(s,e)},l.groupBy=function(e,t){var n={};if("undefined"==typeof e||!i.isArray(e)||0===e.length)return n["*"]={fieldValues:{},events:t},n;for(var r=i.map(e,(function(e){return e["field"]})),a=0;a<t.length;a++){for(var o=t[a],s=[],u={},d=0;d<r.length;d++){var f=r[d],p=l.getValueOrDefault(o,f),g=f.join(".");u[g]=p,s.push(encodeURIComponent(g)+"="+encodeURIComponent(c.stringify(p)))}var h=s.join("&");n.hasOwnProperty(h)||(n[h]={fieldValues:u,events:[]}),n[h].events.push(o)}return n},l.generateAlias=function(e,t){return"_"+e+"_"+t.join(".")},l.aggregate=function(e,t){var n={};return i.each(t,(function(t,i){n[i]={};for(var r=0;r<e.length;r++){var o=e[r],s=o["op"];if(s in l.aggregateOperators){var u=(o["args"]&&o["args"][0]||{})["field"]||l.DEFAULT_FIELD,c=l.generateAlias(s,u),d=l.aggregateOperators[s]([u],t.events);n[i][c]=d}else a.error("Rules","Unknown aggregate operator "+s)}})),n},l.project=function(e,t){var n=[];return i.each(e,(function(e,r){var a=i.extend({},e.fieldValues),o=t[r]||{};i.extend(a,o),n.push(a)})),n},l.orderBy=function(e,t){return i.isArray(e)?0===e.length?t:t.sort((function(t,n){for(var i=0;i<e.length;i++){var r=e[i],a=r["direction"]||"ASC",o="ASC"===a?1:-1,s=r["field"],u=l.getValueOrDefault(t,s,0),c=l.getValueOrDefault(n,s,0);if(u<c)return-o;if(u>c)return o}return 0})):(o("Rules","groupBy rule must be an array"),t)},l.rewrite=function(e){function t(e,o){if(i.isArray(e)&&("and"!==e[0]&&"or"!==e[0]&&"not"!==e[0]&&a.error("Rules","Unexpected operation "+e[0]+". Continuing optimistically."),e={op:e[0],args:e.slice(1)}),e.hasOwnProperty("field")||e.hasOwnProperty("value")||e.hasOwnProperty("eval"))return e;if(o&&e["op"]in l.aggregateOperators){var s=(e["args"]&&e["args"][0]||{})["field"]||l.DEFAULT_FIELD,u=l.generateAlias(e["op"],s);return u in r||(n.push({op:e["op"],args:e["args"]}),r[u]=!0),{field:[u]}}for(var c=[],d=e["args"]||[],f=0;f<d.length;f++)c[f]=t(d[f],o);return{op:e["op"],args:c}}var n=[],r={},o={};e.hasOwnProperty(l.clause.WHERE)&&(o[l.clause.WHERE]=t(e[l.clause.WHERE],!1)),e.hasOwnProperty(l.clause.HAVING)&&(o[l.clause.HAVING]=t(e[l.clause.HAVING],!0)),(e.hasOwnProperty(l.clause.AGGREGATE)||n.length>0)&&(o[l.clause.AGGREGATE]=(e[l.clause.AGGREGATE]||[]).concat(n));for(var s=[l.clause.GROUP_BY,l.clause.ORDER_BY,l.clause.SELECT,l.clause.OFFSET,l.clause.LIMIT],u=0;u<s.length;u++)e.hasOwnProperty(s[u])&&(o[s[u]]=e[s[u]]);return e.hasOwnProperty(l.clause.FROM)&&(o[l.clause.FROM]=l.rewrite(e[l.clause.FROM])),o},l.verify=function(e,t){t=t||0;var n=[];if(e.hasOwnProperty(l.clause.WHERE)?e[l.clause.WHERE]["op"]?e[l.clause.WHERE]["op"]in l.booleanOperators||n.push("Non-boolean WHERE clause operator"):n.push("Missing WHERE clause operator"):n.push("Missing WHERE clause"),e.hasOwnProperty(l.clause.HAVING)&&(e[l.clause.HAVING]["op"]?e[l.clause.HAVING]["op"]in l.booleanOperators||n.push("Non-boolean HAVING clause operator"):n.push("Missing HAVING clause operator")),e.hasOwnProperty(l.clause.GROUP_BY)&&!e.hasOwnProperty(l.clause.AGGREGATE)&&n.push("No AGGREGATE clause specified with GROUP_BY clause"),e.hasOwnProperty(l.clause.SELECT)){var r=e[l.clause.SELECT];if(i.isArray(r))for(var a=0;a<r.length;a++)r[a]["op"]&&r[a]["op"]in l.aggregateOperators&&n.push('In SELECT clause, aggregate operator "'+r[a]["op"]+'" specified in selector at index '+a);else n.push("SELECT clause must be an array")}if(e.hasOwnProperty(l.clause.OFFSET)){var o=e[l.clause.OFFSET];(!i.isNumber(o)||Number(o)<0||Number(o)!==Math.floor(Number(o)))&&n.push("OFFSET must be a non-negative integer")}if(e.hasOwnProperty(l.clause.LIMIT)){var s=e[l.clause.LIMIT];(!i.isNumber(s)||Number(s)<0||Number(s)!==Math.floor(Number(s)))&&n.push("LIMIT must be a non-negative integer")}return t>0&&(n=i.map(n,(function(e){return"Sub-rule "+t+": "+e}))),e.hasOwnProperty(l.clause.FROM)&&(n=n.concat(l.verify(e[l.clause.FROM],t+1))),n},l.select=function(e,t){return i.map(t,(function(t){return i.map(e,(function(e){return l.operate(t,e)}))}))},l.executeRecursively=function(e,t){var n=t;if(e.hasOwnProperty(l.clause.FROM)&&(a.debug("Evaluating FROM clause:",e[l.clause.FROM]),n=l.executeRecursively(e[l.clause.FROM],n),a.debug("Results after FROM:",n)),a.debug("Evaluating WHERE clause:",e[l.clause.WHERE]),n=i.filter(n,(function(t){return l.operate(t,e[l.clause.WHERE])})),a.debug("Results after WHERE:",n),e.hasOwnProperty(l.clause.AGGREGATE)){a.debug("Evaluating AGGREGATE clause:",e[l.clause.AGGREGATE]);var r=l.groupBy(e[l.clause.GROUP_BY],n),o=l.aggregate(e[l.clause.AGGREGATE],r);n=l.project(r,o),a.debug("Results after AGGREGATE:",n)}e.hasOwnProperty(l.clause.HAVING)&&(a.debug("Evaluating HAVING clause:",e[l.clause.HAVING]),n=i.filter(n,(function(t){return l.operate(t,e[l.clause.HAVING])})),a.debug("Results after HAVING:",n)),e.hasOwnProperty(l.clause.ORDER_BY)&&(a.debug("Evaluating ORDER_BY clause:",e[l.clause.ORDER_BY]),n=l.orderBy(e[l.clause.ORDER_BY],n),a.debug("Results after ORDER_BY:",n));var s=0;e.hasOwnProperty(l.clause.OFFSET)&&(a.debug("Evaluating OFFSET clause:",e[l.clause.OFFSET]),s=Number(e[l.clause.OFFSET]));var u;return e.hasOwnProperty(l.clause.LIMIT)&&(a.debug("Evaluating LIMIT clause:",e[l.clause.LIMIT]),u=s+Number(e[l.clause.LIMIT])),(s>0||!i.isUndefined(u))&&(n=n.slice(s,u),a.debug("Results after OFFSET/LIMIT:",n)),e.hasOwnProperty(l.clause.SELECT)&&(a.debug("Evaluating SELECT clause:",e[l.clause.SELECT]),n=l.select(e[l.clause.SELECT],n),a.debug("Results after SELECT:",n)),n},l.execute=function(e,t){e=l.rewrite(e),a.shouldLog(r.LogLevel.DEBUG)&&a.groupCollapsed("Evaluating Behavioral Rule"),a.debug("Rule:",e,c.stringify(e)),a.debug("Events:",t);var n=l.verify(e);if(n.length>0)throw new Error("Rule "+c.stringify(e)+" has violations: "+n.join("\n"));var i=l.executeRecursively(e,t);return a.debug("Rule result:",i),a.shouldLog(r.LogLevel.DEBUG)&&a.groupEnd(),i},l.isSatisfied=function(e,t){try{return l.execute(e,t).length>0}catch(t){return a.error("Rules","Error "+t.toString()+" while evaluating rule "+c.stringify(e)),!1}}}),(function(e,t,n){e.exports=function(e){e.registerVisitorProfileProvider(n(153))}}),(function(e,t,n){var i=n(2),r=n(154),a=n(148),o=n(23),s=n(150);e.exports={provides:"customBehavior",shouldTrack:!0,isLazy:!1,getter:["stores/global","stores/visitor_attribute_entity","stores/visitor_events","stores/visitor",function(e,t,n){var u=e.getProjectId(),c=i.filter(i.map(t.getCustomBehavioralAttributes(u),(function(e){try{return{id:e.id,granularity:r.GRANULARITY.ALL,rule:s.buildFromSpecV0_2(o.parse(e.rule_json))}}catch(e){return}}))),l=a.getEvents(n);return r.evaluate(c,l)}]}}),(function(e,t,n){function i(e){if(0===e.length)return[];for(var t=e.length-1,n=o.FIELDS.SESSION_ID,i=e[t][n];t>0&&i===e[t-1][n];)t--;return e.slice(t)}function r(e,t){if(0===e.length||t<=0)return[];var n=+new Date-t*s.MILLIS_IN_A_DAY;n-=n%s.MILLIS_IN_A_DAY;for(var i=e.length;i>0&&n<=e[i-1][o.FIELDS.TIME];)i--;return e.slice(i)}var a=n(20),o={FIELDS:n(59).FIELDS},s=n(150),u=n(151);t.GRANULARITY={ALL:"all",CURRENT_SESSION:"current_session",LAST_30_DAYS:"last_30_days",LAST_60_DAYS:"last_60_days"},t.evaluate=function(e,n){var o={};if(0===n.length){for(var s=0;s<e.length;s++)o[e[s].id]=e[s].defaultValue;return o}var c=i(n),l=r(n,60);for(s=0;s<e.length;s++){var d=e[s],f=n;d.granularity===t.GRANULARITY.CURRENT_SESSION?f=c:d.granularity===t.GRANULARITY.LAST_60_DAYS&&(f=l);try{var p=f;d.rule&&(p=u.execute(d.rule,f)),o[d.id]=d.defaultValue,1===p.length?o[d.id]=p[0][0]||d.defaultValue:a.debug("Behavior / Rule for",d.id,"returned",p.length,"results, expected 1")}catch(e){a.error("Behavior / Rule for",d.id,"failed with",e.message||"")}}return o}}),(function(e,t,n){e.exports=function(e){e.registerVisitorProfileProvider(n(156)),e.registerAudienceMatcher("first_session",n(157))}}),(function(e,t,n){var i=n(2),r=n(59),a=n(148),o=n(60).getFieldValue;e.exports={provides:"first_session",shouldTrack:!0,getter:["stores/visitor_events",function(e){var t=a.getEvents(e);if(t&&t.length>0){var n=o(t[0],[r.FIELDS.SESSION_ID]);return i.every(t,(function(e){return e[r.FIELDS.SESSION_ID]===n}))}return!0}]}}),(function(e,t){e.exports={fieldsNeeded:["first_session"],match:function(e){return!!e.first_session}}}),(function(e,t,n){e.exports=function(e){e.registerApiModule("behavior",n(159))}}),(function(e,t,n){function i(e,t){var n=d.buildFromSpecV0_1(t);if(1!==n.length)throw new Error("Invalid query descriptor; verify that no aggregators are specified");return f.execute(n[0],e)}function r(e,t){return c.map(e,(function(e){return c.isFunction(e.toObject)?e.toObject(t):e}))}function a(e,t){if(!e)return["Descriptor not defined"];var n=[];return e.count&&n.push('Unexpected "count" clause specified'),e.pick&&e.pick.modifier&&t.indexOf(e.pick.modifier)===-1&&n.push('Invalid "pick" modifier "'+e.pick.modifier+'"'),c.each(e.filters,(function(e){c.isUndefined(e.modifier)||n.push('Unexpected "filter" modifier "'+e.modifier+'"')})),n.length>0?n:void 0}function o(e,t){var n,o={revenueAsTag:!1,timeAsTimestamp:!0};if(c.isUndefined(t))return n=l.getEvents(e),r(n,o);if(c.isNumber(t)){if(t<=0)throw new Error("Count must be a positive integer, got "+t);return n=l.getEvents(e),r(n.slice(-t),o)}var s=a(t,c.values(d.RECENCY_FILTERS));if(s)throw new Error(s.join("\n"));return n=l.getEvents(e),r(i(n,t),o)}function s(e,t){if(t=c.cloneDeep(t)||{},!t.pick)throw new Error('No "pick" clause provided in query descriptor');if(!t.pick.name)throw new Error('No field name provided in "pick" clause');t.pick.modifier=t.pick.modifier||d.FREQUENCY_FILTERS.MOST_FREQUENT;var n=a(t,c.values(d.FREQUENCY_FILTERS));if(n)throw new Error(n.join("\n"));var r=l.getEvents(e);return i(r,t)}function u(e,t){var n=d.buildFromSpecV0_2(t),i=l.getEvents(e),a=r(f.execute(n,i),{revenueAsTag:!0,timeAsTimestamp:!1});return(t.pick||t.reduce&&"count"===t.reduce.aggregator)&&(a=c.flatten(a)),t.reduce&&(a=a[0]),a}var c=n(2),l=n(148),d=n(150),f=n(151);e.exports=["stores/visitor_events",function(e){return{getEvents:c.partial(o,e),getByFrequency:c.partial(s,e),query:c.partial(u,e)}}]}),(function(e,t,n){e.exports=function(e){e.registerDependency("sources/browser_id",n(161)),e.registerVisitorProfileProvider(n(166)),e.registerVisitorProfileProvider(n(167)),e.registerAudienceMatcher("browser_version",n(168))}}),(function(e,t,n){var i=n(162);t.getId=function(){return i.get().browser.id},t.getVersion=function(){return i.get().browser.version}}),(function(e,t,n){var i=n(2),r=n(163),a=n(36),o=n(7),s=n(16),u=n(9),c=s.get("stores/ua_data");t.get=function(){var e=c.get();return i.isEmpty(e)&&(e=r.parseUA(a.getUserAgent()),u.dispatch(o.SET_UA_DATA,{data:e})),e}}),(function(e,t,n){function i(e){if(e=(e||"").toLowerCase(),e in u)return e;var t=a.keys(u);return a.find(t,(function(t){var n=u[t];return a.includes(n,e)}))||"unknown"}function r(e,t,n){return t?t:"unknown"===e?"unknown":n?"mobile":"desktop_laptop"}var a=n(2),o=n(164);t.parseUA=function(e){var t=new o(e),n=t.getBrowser(),a=t.getOS(),u=t.getDevice(),l=(a.name||"unknown").toLowerCase(),d=(n.name||"unknown").toLowerCase(),f=s(u.type,d,l);return{browser:{id:i(n.name),version:n.version},platform:{name:l,version:a.version},device:{model:c[u.model]||"unknown",type:r(d,u.type,f),isMobile:f}}};var s=function(e,t,n){if(a.includes(["mobile","tablet"],e))return!0;if(a.includes(["opera mini"],t))return!0;var i=["android","blackberry","ios","windows phone"];return!!a.includes(i,n)},u={gc:["chrome","chromium","silk","yandex","maxthon"],edge:["edge"],ie:["internet explorer","iemobile"],ff:["firefox","iceweasel"],opera:["opera","opera mini","opera tablet"],safari:["safari","mobile safari","webkit"],ucbrowser:["uc browser"]},c={iPhone:"iphone",iPad:"ipad"}}),(function(e,t,n){var i;!(function(r,a){"use strict";var o="0.7.12",s="",u="?",c="function",l="undefined",d="object",f="string",p="major",g="model",h="name",v="type",_="vendor",E="version",m="architecture",y="console",I="mobile",S="tablet",T="smarttv",A="wearable",w="embedded",b={extend:function(e,t){var n={};for(var i in e)t[i]&&t[i].length%2===0?n[i]=t[i].concat(e[i]):n[i]=e[i];return n},has:function(e,t){return"string"==typeof e&&t.toLowerCase().indexOf(e.toLowerCase())!==-1},lowerize:function(e){return e.toLowerCase()},major:function(e){return typeof e===f?e.replace(/[^\d\.]/g,"").split(".")[0]:a},trim:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},D={rgx:function(){for(var e,t,n,i,r,o,s,u=0,f=arguments;u<f.length&&!o;){var p=f[u],g=f[u+1];if(typeof e===l){e={};for(i in g)g.hasOwnProperty(i)&&(r=g[i],typeof r===d?e[r[0]]=a:e[r]=a)}for(t=n=0;t<p.length&&!o;)if(o=p[t++].exec(this.getUA()))for(i=0;i<g.length;i++)s=o[++n],r=g[i],typeof r===d&&r.length>0?2==r.length?typeof r[1]==c?e[r[0]]=r[1].call(this,s):e[r[0]]=r[1]:3==r.length?typeof r[1]!==c||r[1].exec&&r[1].test?e[r[0]]=s?s.replace(r[1],r[2]):a:e[r[0]]=s?r[1].call(this,s,r[2]):a:4==r.length&&(e[r[0]]=s?r[3].call(this,s.replace(r[1],r[2])):a):e[r]=s?s:a;u+=2}return e},str:function(e,t){for(var n in t)if(typeof t[n]===d&&t[n].length>0){for(var i=0;i<t[n].length;i++)if(b.has(t[n][i],e))return n===u?a:n}else if(b.has(t[n],e))return n===u?a:n;return e}},R={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2000:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},O={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[h,E],[/(opios)[\/\s]+([\w\.]+)/i],[[h,"Opera Mini"],E],[/\s(opr)\/([\w\.]+)/i],[[h,"Opera"],E],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs)\/([\w\.-]+)/i],[h,E],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[h,"IE"],E],[/(edge)\/((\d+)?[\w\.]+)/i],[h,E],[/(yabrowser)\/([\w\.]+)/i],[[h,"Yandex"],E],[/(comodo_dragon)\/([\w\.]+)/i],[[h,/_/g," "],E],[/(micromessenger)\/([\w\.]+)/i],[[h,"WeChat"],E],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[E,[h,"MIUI Browser"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[h,/(.+)/,"$1 WebView"],E],[/android.+samsungbrowser\/([\w\.]+)/i,/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],[E,[h,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i,/(qqbrowser)[\/\s]?([\w\.]+)/i],[h,E],[/(uc\s?browser)[\/\s]?([\w\.]+)/i,/ucweb.+(ucbrowser)[\/\s]?([\w\.]+)/i,/juc.+(ucweb)[\/\s]?([\w\.]+)/i],[[h,"UCBrowser"],E],[/(dolfin)\/([\w\.]+)/i],[[h,"Dolphin"],E],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[h,"Chrome"],E],[/;fbav\/([\w\.]+);/i],[E,[h,"Facebook"]],[/fxios\/([\w\.-]+)/i],[E,[h,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[E,[h,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[E,h],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[h,[E,D.str,R.browser.oldsafari.version]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],[h,E],[/(navigator|netscape)\/([\w\.-]+)/i],[[h,"Netscape"],E],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/([\w\.-]+)/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]+)*/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[h,E]],
cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[[m,"amd64"]],[/(ia32(?=;))/i],[[m,b.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[[m,"ia32"]],[/windows\s(ce|mobile);\sppc;/i],[[m,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[[m,/ower/,"",b.lowerize]],[/(sun4\w)[;\)]/i],[[m,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+;))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[[m,b.lowerize]]],device:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[g,_,[v,S]],[/applecoremedia\/[\w\.]+ \((ipad)/],[g,[_,"Apple"],[v,S]],[/(apple\s{0,1}tv)/i],[[g,"Apple TV"],[_,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[_,g,[v,S]],[/(kf[A-z]+)\sbuild\/[\w\.]+.*silk\//i],[g,[_,"Amazon"],[v,S]],[/(sd|kf)[0349hijorstuw]+\sbuild\/[\w\.]+.*silk\//i],[[g,D.str,R.device.amazon.model],[_,"Amazon"],[v,I]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[g,_,[v,I]],[/\((ip[honed|\s\w*]+);/i],[g,[_,"Apple"],[v,I]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|huawei|meizu|motorola|polytron)[\s_-]?([\w-]+)*/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[_,g,[v,I]],[/\(bb10;\s(\w+)/i],[g,[_,"BlackBerry"],[v,I]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone)/i],[g,[_,"Asus"],[v,S]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[_,"Sony"],[g,"Xperia Tablet"],[v,S]],[/(?:sony)?(?:(?:(?:c|d)\d{4})|(?:so[-l].+))\sbuild\//i],[[_,"Sony"],[g,"Xperia Phone"],[v,I]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[_,g,[v,y]],[/android.+;\s(shield)\sbuild/i],[g,[_,"Nvidia"],[v,y]],[/(playstation\s[34portablevi]+)/i],[g,[_,"Sony"],[v,y]],[/(sprint\s(\w+))/i],[[_,D.str,R.device.sprint.vendor],[g,D.str,R.device.sprint.model],[v,I]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[_,g,[v,S]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w+)*/i,/(alcatel|geeksphone|huawei|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]+)*/i],[_,[g,/_/g," "],[v,I]],[/(nexus\s9)/i],[g,[_,"HTC"],[v,S]],[/(nexus\s6p)/i],[g,[_,"Huawei"],[v,I]],[/(microsoft);\s(lumia[\s\w]+)/i],[_,g,[v,I]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[g,[_,"Microsoft"],[v,y]],[/(kin\.[onetw]{3})/i],[[g,/\./g," "],[_,"Microsoft"],[v,I]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?(:?\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w+)*/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[g,[_,"Motorola"],[v,I]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[g,[_,"Motorola"],[v,S]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[_,b.trim],[g,b.trim],[v,T]],[/hbbtv.+maple;(\d+)/i],[[g,/^/,"SmartTV"],[_,"Samsung"],[v,T]],[/\(dtv[\);].+(aquos)/i],[g,[_,"Sharp"],[v,T]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[_,"Samsung"],g,[v,S]],[/smart-tv.+(samsung)/i],[_,[v,T],g],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)*/i,/sec-((sgh\w+))/i],[[_,"Samsung"],g,[v,I]],[/sie-(\w+)*/i],[g,[_,"Siemens"],[v,I]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]+)*/i],[[_,"Nokia"],g,[v,I]],[/android\s3\.[\s\w;-]{10}(a\d{3})/i],[g,[_,"Acer"],[v,S]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[_,"LG"],g,[v,S]],[/(lg) netcast\.tv/i],[_,g,[v,T]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w+)*/i],[g,[_,"LG"],[v,I]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[g,[_,"Lenovo"],[v,S]],[/linux;.+((jolla));/i],[_,g,[v,I]],[/((pebble))app\/[\d\.]+\s/i],[_,g,[v,A]],[/android.+;\s(glass)\s\d/i],[g,[_,"Google"],[v,A]],[/android.+(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus|note lte)?[\s_]*(?:\d\w)?)\s+build/i],[[g,/_/g," "],[_,"Xiaomi"],[v,I]],[/android.+a000(1)\s+build/i],[g,[_,"OnePlus"],[v,I]],[/\s(tablet)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[v,b.lowerize],_,g]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[E,[h,"EdgeHTML"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[h,E],[/rv\:([\w\.]+).*(gecko)/i],[E,h]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[h,E],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s]+\w)*/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[h,[E,D.str,R.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[h,"Windows"],[E,D.str,R.os.windows.version]],[/\((bb)(10);/i],[[h,"BlackBerry"],E],[/(blackberry)\w*\/?([\w\.]+)*/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]+)*/i,/linux;.+(sailfish);/i],[h,E],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[[h,"Symbian"],E],[/\((series40);/i],[h],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[h,"Firefox OS"],E],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w+)*/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]+)*/i,/(hurd|linux)\s?([\w\.]+)*/i,/(gnu)\s?([\w\.]+)*/i],[h,E],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[h,"Chromium OS"],E],[/(sunos)\s?([\w\.]+\d)*/i],[[h,"Solaris"],E],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],[h,E],[/(haiku)\s(\w+)/i],[h,E],[/(ip[honead]+)(?:.*os\s([\w]+)*\slike\smac|;\sopera)/i],[[h,"iOS"],[E,/_/g,"."]],[/(mac\sos\sx)\s?([\w\s\.]+\w)*/i,/(macintosh|mac(?=_powerpc)\s)/i],[[h,"Mac OS"],[E,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]+)*/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]+)*/i],[h,E]]},N=function(e,t){if(!(this instanceof N))return new N(e,t).getResult();var n=e||(r&&r.navigator&&r.navigator.userAgent?r.navigator.userAgent:s),i=t?b.extend(O,t):O;return this.getBrowser=function(){var e=D.rgx.apply(this,i.browser);return e.major=b.major(e.version),e},this.getCPU=function(){return D.rgx.apply(this,i.cpu)},this.getDevice=function(){return D.rgx.apply(this,i.device)},this.getEngine=function(){return D.rgx.apply(this,i.engine)},this.getOS=function(){return D.rgx.apply(this,i.os)},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return n},this.setUA=function(e){return n=e,this},this};N.VERSION=o,N.BROWSER={NAME:h,MAJOR:p,VERSION:E},N.CPU={ARCHITECTURE:m},N.DEVICE={MODEL:g,VENDOR:_,TYPE:v,CONSOLE:y,MOBILE:I,SMARTTV:T,TABLET:S,WEARABLE:A,EMBEDDED:w},N.ENGINE={NAME:h,VERSION:E},N.OS={NAME:h,VERSION:E},typeof t!==l?(typeof e!==l&&e.exports&&(t=e.exports=N),t.UAParser=N):"function"===c&&n(165)?(i=function(){return N}.call(t,n,t,e),!(i!==a&&(e.exports=i))):r.UAParser=N;var C=r.jQuery||r.Zepto;if(typeof C!==l){var P=new N;C.ua=P.getResult(),C.ua.get=function(){return P.getUA()},C.ua.set=function(e){P.setUA(e);var t=P.getResult();for(var n in t)C.ua[n]=t[n]}}})("object"==typeof window?window:this)}),(function(e,t){(function(t){e.exports=t}).call(t,{})}),(function(e,t){e.exports={provides:"browserId",shouldTrack:!0,isSticky:!0,getter:["sources/browser_id",function(e){return e.getId()}]}}),(function(e,t){e.exports={provides:"browserVersion",getter:["sources/browser_id",function(e){return e.getVersion()}]}}),(function(e,t,n){var i=n(169).compareVersion;e.exports={fieldsNeeded:["browserVersion","browserId"],match:function(e,t){var n=t.value,r=e.browserId,a=e.browserVersion;if(0===n.indexOf(r)){var o=n.substr(r.length);return 0===i(a,o)}return!1}}}),(function(e,t,n){var i=n(2);t.compareVersion=function(e,t){if(!t)return 0;for(var n=t.toString().split("."),r=e.toString().split("."),a=0;a<n.length;a++){if(i.isUndefined(r[a]))return-1;if(isNaN(Number(r[a]))){if(r[a]!==n[a])return-1}else{if(Number(r[a])<Number(n[a]))return-1;if(Number(r[a])>Number(n[a]))return 1}}return 0}}),(function(e,t,n){e.exports=function(e){e.registerVisitorProfileProvider(n(171)),e.registerAudienceMatcher("campaign",n(172))}}),(function(e,t,n){var i=n(115);e.exports={provides:"campaign",shouldTrack:!0,isSticky:!0,getter:[function(){return i.getQueryParamValue("utm_campaign")}]}}),(function(e,t,n){var i=n(173);e.exports={fieldsNeeded:["campaign"],match:function(e,t){return i.hasMatch(t.value,t.match,e.campaign)}}}),(function(e,t,n){var i=n(2);t.hasMatch=function(e,t,n){var r=!i.isUndefined(n)&&null!==n,a=!i.isUndefined(e)&&null!==e,o=t||(a?"exact":"exists");switch(o){case"exists":return r;case"exact":return r&&String(n)===e;case"substring":return r&&String(n).indexOf(e)>-1;case"regex":try{if(a&&r){var s=new RegExp(e);return s.test(String(n))}return!1}catch(e){}return!1;case"range":var u=e.split(":"),c=parseFloat(u[0]),l=parseFloat(u[1]),d=parseFloat(n);return d>=c&&d<=l;default:return!1}}}),(function(e,t,n){e.exports=function(e){e.registerAudienceMatcher("code",n(175))}}),(function(e,t,n){var i=n(2),r=n(139);t.fieldsNeeded=[],t.match=function(e,t){if(i.isUndefined(t.value))return!0;if("function"==typeof t.value)try{return Boolean(r.apply(t.value))}catch(e){return!1}else try{return Boolean(r.eval(t.value))}catch(e){return!1}return!1}}),(function(e,t,n){e.exports=function(e){e.registerVisitorProfileProvider(n(177)),e.registerAudienceMatcher("cookies",n(178))}}),(function(e,t,n){var i=n(72);e.exports={provides:"cookies",isLazy:!0,getter:[function(){return i.getAll()}]}}),(function(e,t,n){var i=n(173);e.exports={fieldsNeeded:["cookies"],match:function(e,t){var n=t.name,r=t.value,a=t.match,o=e.cookies[n];return i.hasMatch(r,a,o)}}}),(function(e,t,n){e.exports=function(e){e.registerVisitorProfileProvider(n(180));var t=n(181);e.registerAudienceMatcher("custom_attribute",t),e.registerAudienceMatcher("custom_dimension",t)}}),(function(e,t,n){var i=n(2),r=n(22),a=n(20),o=n(16),s=o.get("stores/dimension_data");e.exports={provides:"custom",attributionType:r.AttributionTypes.LAST_TOUCH,restorer:function(e){return i.reduce(e,(function(e,t,n){var r=t,o=n,u=s.getByApiName(n),c=s.getById(n);return i.isObject(t)&&!t.id&&(u&&!c?(o=u.id,r={id:u.segmentId||u.id,value:t.value}):c||a.warn("Unable to determine ID for custom attribute:",n,"; segmentation is disabled.")),e[o]=r,e}),{})},shouldTrack:!0}}),(function(e,t,n){var i=n(2),r=n(173);t.match=function(e,t){var n;return e.custom&&(n=e.custom[t.name]),i.isObject(n)&&(n=n.value),r.hasMatch(t.value,t.match,n)}}),(function(e,t,n){e.exports=function(e){e.registerDependency("sources/device",n(183)),e.registerVisitorProfileProvider(n(184)),e.registerAudienceMatcher("device",n(185))}}),(function(e,t,n){var i=n(162);t.getDevice=function(){var e=i.get().device;return"unknown"!==e.model?e.model:"tablet"===e.type?"tablet":e.isMobile?"mobile":"desktop"}}),(function(e,t){e.exports={provides:"device",shouldTrack:!0,isSticky:!0,getter:["sources/device",function(e){return e.getDevice()}]}}),(function(e,t){e.exports={fieldsNeeded:["device"],match:function(e,t){return e.device===t.value}}}),(function(e,t,n){e.exports=function(e){e.registerVisitorProfileProvider(n(187)),e.registerAudienceMatcher("device_type",n(188))}}),(function(e,t,n){var i=n(162);e.exports={provides:"device_type",shouldTrack:!0,isSticky:!0,getter:[function(){var e=i.get().device;switch(e.type){case"mobile":return"phone";case"tablet":case"desktop_laptop":return e.type;default:return"other"}}]}}),(function(e,t){e.exports={fieldsNeeded:["device_type"],match:function(e,t){return e.device_type===t.value}}}),(function(e,t,n){e.exports=function(e){e.registerVisitorProfileProvider(n(190)),e.registerAudienceMatcher("referrer",n(191))}}),(function(e,t,n){var i=n(77),r=n(95);e.exports={provides:"referrer",shouldTrack:!0,isSticky:!0,getter:[function(){var e=r.getReferrer()||i.getReferrer();return""===e&&(e=null),e}]}}),(function(e,t,n){var i=n(192);t.fieldsNeeded=["referrer"],t.match=function(e,t){return null!==e.referrer&&i(e.referrer,t)}}),(function(e,t,n){function i(e){var t=e.indexOf("?");return t!==-1&&(e=e.substring(0,t)),t=e.indexOf("#"),t!==-1&&(e=e.substring(0,t)),e}function r(e){return a(i(e))}function a(e,t){e=e.replace("/?","?"),e=e.toLowerCase().replace(/[\/&?]+$/,"");var n=l.slice(0);t||(n=n.concat(u));for(var i=n.length,r=0;r<i;r++){var a=n[r],o=new RegExp("^"+a);e=e.replace(o,"")}return e}function o(e){var t=e.split("?");if(t[1]){var n=t[1].split("#"),i=n[0],r=n[1],a=i.split("&"),o=[];return s.each(a,(function(e){0!==e.indexOf(c)&&o.push(e)})),t[1]="",o.length>0&&(t[1]="?"+o.join("&")),r&&(t[1]+="#"+r),t.join("")}return e}var s=n(2);e.exports=function(e,t){e=o(e);var n=t.value;switch(t.match){case"exact":return e=a(e),e===a(n);case"regex":try{return Boolean(e.match(n))}catch(e){}return!1;case"simple":return e=r(e),n=r(n),e===n;case"substring":return e=a(e,!0),n=a(n,!0),e.indexOf(n)!==-1;default:return!1}};var u=["www."],c="optimizely_",l=["https?://.*?.?optimizelyedit.(com|test)/","https?://.*.?optimizelypreview.(com|test)/","https?://(edit|preview)(-hrd|-devel)?.optimizely.(com|test)/","https?://.*?.?optimizelyedit(-hrd)?.appspot.com/","https?://"]}),(function(e,t,n){e.exports=function(e){e.registerVisitorProfileProvider(n(194)),e.registerAudienceMatcher("source_type",n(196))}}),(function(e,t,n){var i=n(115),r=n(77),a=n(95),o=n(195),s=["google\\.\\w{2,3}(\\.\\w{2,3})?/(search|url)","https://(www)?\\.google\\..*?/$","bing\\.\\w{2,3}(\\.\\w{2,3})?/(search|url)","yahoo\\.\\w{2,3}(\\.\\w{2,3})?/search","baidu\\.\\w{2,3}(\\.\\w{2,3})?/s?"];e.exports={provides:"source_type",shouldTrack:!0,isSticky:!1,getter:[function(){return function(e,t){var n=function(){if(i.getQueryParamValue("utm_source")||i.getQueryParamValue("gclid")||i.getQueryParamValue("otm_source"))return"campaign";for(var e=a.getReferrer()||r.getReferrer(),t=0;t<s.length;t++){var n=s[t],u=e.match(n);if(u)return"search"}return e&&o.getDomain(e)!==o.getDomain(i.getUrl())?"referral":"direct"},u=function(e,t){return!e||"direct"!==t},c=e(),l=n();u(c,l)&&t(l)}}]}}),(function(e,t){t.getDomain=function(e,t){if(!e)return"";try{return t?e.match(/:\/\/(.[^\/]+)/)[1]:e.match(/:\/\/(?:www[0-9]?\.)?(.[^\/:]+)/)[1]}catch(e){return""}}}),(function(e,t,n){var i=n(173);t.fieldsNeeded=["source_type"],t.match=function(e,t){return i.hasMatch(t.value,t.match,e.source_type)}}),(function(e,t,n){e.exports=function(e){e.registerVisitorProfileProvider(n(198)),e.registerVisitorProfileProvider(n(199)),e.registerAudienceMatcher("time_and_day",n(200))}}),(function(e,t,n){var i=n(21);e.exports={provides:"currentTimestamp",shouldTrack:!0,isLazy:!0,getter:[function(){return i.now()}]}}),(function(e,t){e.exports={provides:"offset",shouldTrack:!0,isLazy:!0,getter:[function(){return(new Date).getTimezoneOffset()}]}}),(function(e,t,n){var i=n(201);t.fieldsNeeded=["currentTimestamp"],t.match=function(e,t){return i.test(t.value,new Date(e.currentTimestamp))}}),(function(e,t,n){function i(e){var t=e.split(o);if(3!==t.length)throw new Error("Invalid time and day string "+e);var n=t[2].split(s);return{start_time:t[0],end_time:t[1],days:n}}function r(e){var t=e.split(u);if(2!==t.length)throw new Error("optly.timeAndDayInterval.timeStringToMinutes: Invalid time string "+e);return 60*parseInt(t[0],10)+parseInt(t[1],10)}var a=n(2),o="_",s=",",u=":";t.test=function(e,t){var n=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],o=i(e),s=r(o.start_time),u=r(o.end_time),c=60*t.getHours()+t.getMinutes(),l=n[t.getDay()];return c>=s&&c<=u&&a.includes(o.days,l)}}),(function(e,t,n){function i(e){var t=e.getGlobal(d);return t?e.getGlobal(t):null}var r=n(2),a=n(23),o=n(20),s=n(84),u=n(95),c=n(111),l=n(36),d="GoogleAnalyticsObject",f=150,p="google_universal_analytics",g=n(91),h=["stores/layer_data",function(e,t){return function(t){var n=t.decision.layerId,i=t.decision.experimentId,a=t.decision.variationId,s=e.get(n),u=t.decision.isLayerHoldback,c=r.find(s.experiments,{id:i});if(c){var l=c["integrationSettings"]||s["integrationSettings"]||{};if(l){var d=l[p];if(d){var h=r.find(c.variations,{id:a});if(h){var v=g.generateAnalyticsString(s,c,h,u,f,!0);if(v)return _(v,d)["catch"]((function(e){o.warn("Tracker for",p,"failed:",e)}))}}}}}}],v=function(e){var t=e.integrationSettings;if(t&&t[p]&&e.experimentId&&e.variationId){var n={id:e.layerId,name:e.layerName,policy:e.layerPolicy,integrationStringVersion:e.integrationStringVersion},i={id:e.experimentId,name:e.experimentName},r={id:e.variationId,name:e.variationName},a=e.isLayerHoldback,s=g.generateAnalyticsString(n,i,r,a,f,!0);if(s)return _(s,t[p])["catch"]((function(e){o.warn("Tracker for",p,"failed:",e)}))}},_=function(e,t){var n=50,r=200;return s.pollFor((function(){return i(l)}),r,n).then((function(n){var i=t.universal_analytics_tracker,r=i?i+".":"",a=t.universal_analytics_slot,o=u.getReferrer();o&&n(r+"set","referrer",o);var s={nonInteraction:!0};s["dimension"+a]=e,n(r+"send","event","Optimizely","Assigned To Campaign",s)}))},E={preRedirectPolicy:c.PreRedirectPolicies.PERSIST_BEFORE_REDIRECT,postRedirectPolicy:c.PostRedirectPolicies.TRACK_IMMEDIATELY,nonRedirectPolicy:c.NonRedirectPolicies.TRACK_IMMEDIATELY,onLayerDecision:h,trackLayerDecision:v,serializeSettings:a.stringify,deserializeSettings:a.parse};e.exports=function(e){e.registerAnalyticsTracker("google_universal_analytics",E)}}),(function(e,t,n){function i(e){function t(e,t,n){try{u(t),e[n]=t}catch(e){N.emitError(new q("Bad value for eventTags["+n+"]: "+e.message))}return e}var n=O.keys(Z),i=O.omit(e,n),r=O.pick(e,n),a=O.reduce(i,t,{}),o=O.reduce(r,(function(e,n,i){var r=Z[i];r.excludeFeature||t(a,n,i);try{r.validate(n),e[i]=r.sanitize(n),a[i]=e[i]}catch(e){N.emitError(new q("Bad value for eventMetrics["+i+"]: "+e.message))}return e}),{});return o.tags=a,o}function r(e){var t=O.extend({entity_id:e.pageId,key:e.pageId,timestamp:e.timestamp,uuid:e.eventId,type:Q},i(e.eventTags));return t}function a(e){return O.extend({entity_id:e.event.id,key:e.event.apiName,timestamp:e.timestamp,uuid:e.eventId,type:e.event.category},i(e.eventTags))}function o(e){return O.extend({entity_id:e.eventEntityId,key:e.eventApiName,timestamp:e.timestamp,uuid:e.eventId,type:e.eventCategory},i(e.eventTags))}function s(e){return{entity_id:null,type:X,uuid:e.eventId,timestamp:e.timestamp}}function u(e){if(null==e)throw new Error("Feature value is null");if("object"==typeof e){var t;try{t=k.stringify(e)}catch(e){}throw new Error('Feature value is complex: "'+t||'[object]"')}}function c(e){if(null==e)throw new Error("Metric value is null");if(!O.isNumber(e))throw new Error("Metric value is not numeric")}function l(e){return O.reduce(e,(function(e,t){try{u(t.value),e.push({entity_id:t.id||null,key:t.name,type:t.type,value:t.value})}catch(e){x.warn("Error evaluating user feature",t,e)}return e}),[])}function d(e,t,n){H.dispatch(L.REGISTER_TRACKER_EVENT,{event:e,decisions:n}),f(t),b()}function f(e){var t=l(e);H.dispatch(L.UPDATE_TRACKER_VISITOR_ATTRIBUTES,{attributes:t})}function p(e){var t=l(e.userFeatures),n={account_id:e.accountId,anonymize_ip:e.anonymizeIP,client_name:e.clientEngine,client_version:e.clientVersion,project_id:e.projectId,visitors:[{session_id:h(e.sessionId),visitor_id:e.visitorId,attributes:t,snapshots:[{decisions:[{campaign_id:e.layerId,experiment_id:e.experimentId,variation_id:e.variationId,is_campaign_holdback:e.isLayerHoldback}],events:[{uuid:e.decisionId,entity_id:e.layerId,timestamp:e.timestamp,type:W}]}]}]};H.dispatch(L.REGISTER_PREVIOUS_BATCH,n),b()}function g(e){var t=O.isNull(Y.getAnonymizeIP())?void 0:Y.getAnonymizeIP(),n={account_id:e.accountId,anonymize_ip:t,client_name:e.clientEngine,client_version:e.clientVersion,project_id:e.projectId,visitors:[]};n.revision=e.revision;var i={session_id:h(e.sessionId),visitor_id:e.visitorId,attributes:[],snapshots:[]},r=D(e.layerStates);H.dispatch(L.REGISTER_TRACKER_VISITOR,{data:n,visitor:i,decisions:r}),b()}function h(e){return ie?ne:e}function v(e){var t={entity_id:e.layerId,type:W,uuid:e.decisionId,timestamp:e.timestamp};H.dispatch(L.REGISTER_TRACKER_DECISION,{decisionEvent:t,decisions:D(e.layerStates)}),f(e.userFeatures),b()}function _(){if(!K.canSend())return void x.debug("Not sending events (holding)");var e=K.hasEventsToSend(),t=K.hasPreviousBatchesToSend();return e||t?(t&&(O.each(K.getPreviousBatches(),E),H.dispatch(L.RESET_TRACKER_PREVIOUS_BATCHES)),void(e&&(H.dispatch(L.FINALIZE_BATCH_SNAPSHOT),E(K.getEventBatch()),H.dispatch(L.RESET_TRACKER_EVENTS)))):void x.debug("Not sending events because there are no events to send")}function E(e){x.debug("Sending ticket:",e);var t=C.generate();U.retryableRequest({url:P,method:"POST",data:m(e)},t)}function m(e){var t=O.extend({},O.pick(e,["account_id","anonymize_ip","client_name","client_version","project_id","revision"]),{visitors:O.map(e.visitors,y)});return t}function y(e){return{visitor_id:e.visitor_id,session_id:ne,attributes:O.map(e.attributes,I),snapshots:O.map(e.snapshots,S)}}function I(e){return w(e,{entity_id:"e",key:"k",type:"t",value:"v"})}function S(e){return{activationTimestamp:Y.getActivationTimestamp(),decisions:O.map(e.decisions,T),events:O.map(e.events,A)}}function T(e){return w(e,{campaign_id:"c",experiment_id:"x",is_campaign_holdback:"h",variation_id:"v"})}function A(e){return e.key===W&&(e.type=W,delete e.key),w(e,{entity_id:"e",key:"k",quantity:"q",revenue:"$",tags:"a",timestamp:"t",uuid:"u",value:"v",type:"y"})}function w(e,t){return O.reduce(e,(function(e,n,i){return i in t&&(e[t[i]||i]=n),e}),{})}function b(){function e(){var t=!ee||B.isLoaded();t&&_(),K.isPolling()&&setTimeout(e,J)}return K.shouldBatch()?void(K.isPolling()||(setTimeout(e,J),H.dispatch(L.SET_TRACKER_POLLING,!0),setTimeout((function(){H.dispatch(L.SET_TRACKER_BATCHING,!1),H.dispatch(L.SET_TRACKER_POLLING,!1)}),$))):void _()}function D(e){return O.map(e,(function(e){return{campaign_id:e.layerId,experiment_id:e.decision.experimentId,variation_id:e.decision.variationId,is_campaign_holdback:e.decision.isLayerHoldback}}))}function R(){var e=K.getPersistableState();if(e)try{x.debug("Persisting pending batch:",e),M.persistTrackerOptimizelyData(e),H.dispatch(L.SET_TRACKER_DIRTY,!1)}catch(e){x.debug("Failed to persist pending batch:",e)}}var O=n(2),N=n(79),C=n(5),P="https://logx.optimizely.com/v1/events",L=n(7),V=n(73).create,k=n(23),x=n(20),F=n(111),M=n(71),U=n(86),G=n(16),B=n(77),z=n(80),j=n(107),H=n(9),Y=G.get("stores/global"),K=G.get("stores/tracker_optimizely"),q=t.Error=V("OptimizelyTrackerError"),X="client_activation",W="campaign_activated",Q="view_activated",$=1e4,J=1e3,Z={revenue:{validate:c,sanitize:Math.floor,excludeFeature:!0},quantity:{validate:c,sanitize:Math.floor,excludeFeature:!0},value:{validate:c,sanitize:O.identity}},ee=!1,te=!1,ne="AUTO",ie=!0,re=[function(){return function(e){v(O.extend(e,e.decision))}}],ae=function(e){e.timing===F.TrackLayerDecisionTimingFlags.postRedirectPolicy?p(e):v(e)},oe=[function(){return function(e){d(r(e),e.userFeatures,D(e.layerStates))}}],se=[function(){return function(e){g(e),d(s(e),e.userFeatures,D(e.layerStates))}}],ue=[function(){return function(e){d(o(e),e.userFeatures,D(e.layerStates))}}],ce=[function(){return function(e){d(a(e),e.userFeatures,D(e.layerStates))}}],le={onLayerDecision:re,trackLayerDecision:ae,postRedirectPolicy:F.PostRedirectPolicies.TRACK_AFTER_SYNC,nonRedirectPolicy:F.NonRedirectPolicies.TRACK_IMMEDIATELY,onPageActivated:oe,onClientActivation:se,onClickEvent:ce,onCustomEvent:ue};e.exports=function(e){e.registerAnalyticsTracker("optimizely",le),z.on({filter:{type:j.TYPES.ANALYTICS,name:"sendEvents"},handler:function(){H.dispatch(L.SET_TRACKER_SEND_EVENTS,!0)}}),z.on({filter:{type:j.TYPES.ANALYTICS,name:"holdEvents"},handler:function(){H.dispatch(L.SET_TRACKER_SEND_EVENTS,!1)}}),H.dispatch(L.SET_TRACKER_SEND_EVENTS,!te);var t=z.on({filter:{type:"lifecycle",name:"activated"},handler:function(){K.observe(R),z.off(t)}})}}),(function(e,t,n){e.exports=function(e){e.registerViewProvider(n(205)),e.registerViewMatcher("url",n(206))}}),(function(e,t,n){var i=n(115);e.exports={provides:"url",getter:[function(){return i.getUrl()}]}}),(function(e,t,n){var i=n(192);e.exports={fieldsNeeded:["url"],match:function(e,t){return i(e.url,t)}}}),(function(e,t,n){function i(e){return"apiName: "+e.apiName+", selector: "+e.eventFilter.selector}var r=n(106),a=n(208),o=n(20),s=n(118);e.exports=function(e){var t=new a(function(e){s.updateAllViewTags();var t=r.trackClickEvent(e);t?o.log("Tracking click event:",e):o.log("Not tracking click event:",e)});e.registerEventImplementation("click",{attach:function(e){t.hasEvents()||t.listen(),t.addEvent(e),o.debug("Started listening for click event ("+i(e)+"):",e)},detach:function(e){t.removeEvent(e),t.hasEvents()||t.unlisten(),o.debug("Stopped listening for click event ("+i(e)+"):",e)}})}}),(function(e,t,n){function i(e){this.handler=e,this.events=[],this.unlistenFn=null,this.clickHandler=a.bind((function(e){a.forEach(this.events,a.bind((function(t){try{var n=t.config&&t.config.selector?t.config.selector:t.eventFilter.selector;r(e,n,t)&&this.handler(t)}catch(e){o.emitError(new l("Unable to handle click for selector"+n+":"+e.message))}}),this))}),this)}function r(e,t,n){for(var i=e.target,r=0;i;){var s;try{s=c(i,t)}catch(s){var u={typeofElementValue:typeof i,nodeName:a.result(i,["nodeName"],null),nodeType:a.result(i,["nodeType"],null),targetName:a.result(e,["target","nodeName"],null),targetType:a.result(e,["target","nodeType"],null),numParentsTraversed:r,selector:t,errorMessage:s.message,eventId:n.id};return o.emitError(new l("Unable to evaluate match for element"),u),!1}if(s)return!0;i=i.parentElement,r++}return!1}var a=n(2),o=n(79),s=n(73).create,u=n(77),c=n(209),l=t.Error=s("ClickDelegateError");i.prototype.listen=function(){this.unlistenFn=u.addEventListener("click",this.clickHandler,!0)},i.prototype.unlisten=function(){this.unlistenFn&&(this.unlistenFn(),this.unlistenFn=null)},i.prototype.hasEvents=function(){return this.events.length>0},i.prototype.addEvent=function(e){this.events.push(e)},i.prototype.removeEvent=function(e){this.events=a.filter(this.events,(function(t){return t.apiName!==e.apiName}))},e.exports=i}),(function(e,t,n){e.exports=n(210)}),(function(e,t){"use strict";function n(e,t){if(r)return r.call(e,t);for(var n=e.parentNode.querySelectorAll(t),i=0;i<n.length;i++)if(n[i]==e)return!0;return!1}var i=Element.prototype,r=i.matches||i.matchesSelector||i.webkitMatchesSelector||i.mozMatchesSelector||i.msMatchesSelector||i.oMatchesSelector;e.exports=n}),(function(e,t,n){function i(e,t){this.change=e,this.identifier=t.identifier,this.startTime=t.startTime}var r=n(2),a=n(132),o=n(212),s=n(213),u=n(16).get("stores/directive"),c=n(77),l=n(214),d=n(20),f=n(131),p=n(96).create();i.prototype.numberOfRootNodes=function(e){var t=document.createElement("div");return t.innerHTML=e,t.childNodes.length},i.prototype.getSiblingElements=function(e,t,n){for(var i=e,r=[],a=0;a<t;a++)n?(r.push(i.nextSibling),i=i.nextSibling):(r.push(i.previousSibling),i=i.previousSibling);return r},i.prototype.apply=function(){this.applyDeferred=s();try{var e=this.numberOfRootNodes(this.change.value);if(!e)throw new Error("No DOM elements to be created for this change: "+this.change.value);var t={},n=r.partial(this.applyDeferred.reject,new Error("Unable to find selector."));u.shouldObserveChangesIndefinitely()?u.isEditor()&&p.waitUntil(r.partial(f.isTimedOut,this.startTime)).then(n,n):t={timeout:r.partial(f.isTimedOut,this.startTime),onTimeout:n},this.unobserveSelector=p.observeSelector(this.change.selector,r.bind(this.applyToElement,this),t);var i=c.querySelectorAll(this.change.selector);r.each(i,r.bind(this.applyToElement,this))}catch(e){this.applyDeferred.reject(e)}return this.applyDeferred},i.prototype.applyToElement=function(e){var t=a.CHANGE_ID_ATTRIBUTE_PREFIX+this.change.id;if(e.hasAttribute(t))return void d.debug("Not applying AppendChange to element",e,"because it was inserted by this change");var n;switch(this.change.operator){case l.DOMInsertionType.AFTER:n=l.insertAdjacentHTMLType.AFTER_END;break;case l.DOMInsertionType.APPEND:n=l.insertAdjacentHTMLType.BEFORE_END;break;case l.DOMInsertionType.BEFORE:n=l.insertAdjacentHTMLType.BEFORE_BEGIN;break;case l.DOMInsertionType.PREPEND:n=l.insertAdjacentHTMLType.AFTER_BEGIN;break;default:n=l.insertAdjacentHTMLType.BEFORE_END}e.insertAdjacentHTML(n,this.change.value),e.setAttribute(t,""),o.setData(e,this.change.id,this.identifier,[]);var i,s,u=this.numberOfRootNodes(this.change.value)-1;n===l.insertAdjacentHTMLType.BEFORE_END?(i=e.lastChild,s=this.getSiblingElements(i,u,!1)):n===l.insertAdjacentHTMLType.AFTER_BEGIN?(i=e.firstChild,s=this.getSiblingElements(i,u,!0)):n===l.insertAdjacentHTMLType.BEFORE_BEGIN?(i=e.previousSibling,s=this.getSiblingElements(i,u,!1)):n===l.insertAdjacentHTMLType.AFTER_END&&(i=e.nextSibling,s=this.getSiblingElements(i,u,!0)),s.unshift(i),r.each(s,r.bind((function(e){var n=e.nodeType===Node.ELEMENT_NODE?e:c.parentElement(e);n.setAttribute(t,"");var i=o.getData(n,this.change.id,this.identifier)||[];i.push(e),o.setData(n,this.change.id,this.identifier,i),r.each(c.childrenOf(n),(function(e){e.setAttribute(t,"")}))}),this)),this.applyDeferred.resolve()},i.prototype.cancel=function(){this.unobserveSelector&&this.unobserveSelector()},e.exports=function(e){e.registerChangeApplier(l.changeType.APPEND,i)}}),(function(e,t,n){function i(e,t){return[e,t].join("_")}var r=n(2),a=n(132).CHANGE_DATA_KEY;t.getData=function(e,t,n){var r=i(t,n);return e[a]&&e[a][r]?e[a][r]:null},t.hasData=function(e){return Boolean(e&&e[a]&&!r.isEmpty(e[a]))},t.removeData=function(e,t,n){e[a]&&delete e[a][i(t,n)]},t.setData=function(e,t,n,r){if("object"!=typeof r)throw new Error("setData expects an object");e[a]||(e[a]={}),e[a][i(t,n)]=r}}),(function(e,t,n){var i=n(2),r=n(12).Promise,a=function(){var e,t,n=new r(function(n,i){e=n,t=i});return n.resolve=function(){return e.apply(null,i.toArray(arguments)),n},n.reject=function(){return t.apply(null,i.toArray(arguments)),n},n};e.exports=a}),(function(e,t,n){var i=n(8);e.exports={changeType:{CUSTOM_CODE:"custom_code",ATTRIBUTE:"attribute",APPEND:"append",REARRANGE:"rearrange",REDIRECT:"redirect",WIDGET:"widget"},DOMInsertionType:{AFTER:"after",APPEND:"append",BEFORE:"before",PREPEND:"prepend"},insertAdjacentHTMLType:{AFTER_BEGIN:"afterbegin",AFTER_END:"afterend",BEFORE_BEGIN:"beforebegin",BEFORE_END:"beforeend"},selectorChangeType:{CLASS:"class",HTML:"html",HREF:"href",SRC:"src",STYLE:"style",TEXT:"text",HIDE:"hide",REMOVE:"remove"},changeApplierState:i({APPLIED:null,APPLYING:null,UNAPPLIED:null,UNDOING:null}),changeState:i({BLOCKED:null,UNAPPLIED:null,APPLIED:null,APPLYING:null,UNDOING:null,TIMED_OUT:null,IGNORED:null,ERROR:null})}}),(function(e,t,n){function i(e,t){this.change=r.cloneDeep(e),this.change=p.transformVisibilityAttributesToCSS(this.change),this.identifier=t.identifier,this.startTime=t.startTime,this.disconnectObserverQueue=[]}var r=n(2),a=n(132),o=n(212),s=n(213),u=n(16).get("stores/directive"),c=n(77),l=n(214),d=n(216),f=n(131),p=n(217),g=n(96).create(),h={attributes:!0,childList:!0,subtree:!0,characterData:!0},v=!1;i.prototype.apply=function(){this.applyDeferred=s();try{var e={},t=r.partial(this.applyDeferred.reject,new Error("Unable to find selector."));u.shouldObserveChangesIndefinitely()?u.isEditor()&&g.waitUntil(r.partial(f.isTimedOut,this.startTime)).then(t,t):e={timeout:r.partial(f.isTimedOut,this.startTime),onTimeout:t},this.unobserveSelector=g.observeSelector(this.change.selector,r.bind(this.applyToElement,this),e);var n=c.querySelectorAll(this.change.selector);r.each(n,r.bind(this.applyToElement,this))}catch(e){this.applyDeferred.reject(e)}return this.applyDeferred},i.prototype.applyToElement=function(e){var t=a.CHANGE_ID_ATTRIBUTE_PREFIX+this.change.id;if(e.hasAttribute(t)){var n="AttributeChange not being applied. Element already changed, or is a child of an element that was changed by this AttributeChange. "+e;return void this.applyDeferred.resolve(n)}var i=r.bind(this.setAttributesAndChangeData,this,e,t);if(i(),v){var o=d.create((function(){this.disconnect(),i(),this.observe(e,h)}));d.observe(o,e,h),this.disconnectObserverQueue.push(r.partial(d.disconnect,o))}this.applyDeferred.resolve()},i.prototype.setAttributesAndChangeData=function(e,t){
var n={};r.forOwn(this.change.attributes,(function(i,a){switch(a){case l.selectorChangeType.CLASS:r.isUndefined(e.className)||(n[l.selectorChangeType.CLASS]=e.className,e.className=i);break;case l.selectorChangeType.HREF:r.isUndefined(e.href)||(n[l.selectorChangeType.HREF]=e.href,e.href=i);break;case l.selectorChangeType.HTML:r.isUndefined(e.innerHTML)||(n[l.selectorChangeType.HTML]=e.innerHTML,e.innerHTML=i,r.each(c.childrenOf(e),(function(e){e.setAttribute(t,"")})));break;case l.selectorChangeType.SRC:r.isUndefined(e.src)||(n[l.selectorChangeType.SRC]=e.src,e.src=i);break;case l.selectorChangeType.STYLE:break;case l.selectorChangeType.TEXT:r.isUndefined(e.textContent)||(n[l.selectorChangeType.TEXT]=e.textContent,e.textContent=i);break;default:throw new Error("Unrecognized attribute: "+a)}}));var i=p.createStylesFromChange(e.style.cssText,this.change);r.isString(i)&&(n[l.selectorChangeType.STYLE]=e.style.cssText,e.style.cssText=i),e.setAttribute(t,""),o.setData(e,this.change.id,this.identifier,n)},i.prototype.cancel=function(){this.unobserveSelector&&this.unobserveSelector(),r.each(this.disconnectObserverQueue,(function(e){try{e()}catch(e){}}))},e.exports=function(e){e.registerChangeApplier(l.changeType.ATTRIBUTE,i)}}),(function(e,t){t.create=function(e){return new MutationObserver(e)},t.observe=function(e,t,n){e.observe(t,n)},t.disconnect=function(e){e.disconnect()}}),(function(e,t,n){var i=n(2),r=n(214);t.transformVisibilityAttributesToCSS=function(e){if(!e.attributes)return e;if(e.attributes[r.selectorChangeType.HIDE]||e.attributes[r.selectorChangeType.REMOVE]){var t=i.extend({css:{}},i.cloneDeep(e));return e.attributes[r.selectorChangeType.HIDE]&&(t.css.visibility="hidden",delete t.attributes[r.selectorChangeType.HIDE]),e.attributes[r.selectorChangeType.REMOVE]&&(t.css.display="none",delete t.attributes[r.selectorChangeType.REMOVE]),t}return e},t.createStylesFromChange=function(e,t){if(i.isEmpty(t.css))return t.attributes.style;var n="",r=t.attributes.style||"";return i.each(t.css,(function(e,t){var i=new RegExp(t+"\\s?:");i.test(r)||(n+=t+":"+e+";")})),i.isUndefined(t.attributes.style)?(e||"")+n:n+r}}),(function(e,t,n){function i(e,t){if(!r.isFunction(e.value))throw new Error("Custom code must be a function");this.change=e}var r=n(2),a=n(213),o=n(214),s=n(139);i.prototype.apply=function(){var e=a();try{s.apply(this.change.value),e.resolve()}catch(t){e.reject(t)}return e},e.exports=function(e){e.registerChangeApplier(o.changeType.CUSTOM_CODE,i)}}),(function(e,t,n){var i=n(136),r=n(137).DecisionError,a="single_experiment",o="multivariate",s={selectExperiment:function(e,t,n){if(e.experiments.length<1)throw new r("Unable to find experiment to bucket user into");var a=e.experiments[0];if(!i.isValidExperiment(t,a))throw new r('Audience conditions failed for experiment: "'+a.id+'".');return a}};e.exports=function(e){e.registerDecider(a,s),e.registerDecider(o,s)}})]);